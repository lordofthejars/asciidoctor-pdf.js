<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<style>
svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}
</style>

<link href="./redhat/assets/style.css" rel="stylesheet">
</head>
<body>
<header>
  <h1>Quarkus Cheat-Sheet</h1>
  <img class="logo" src="./redhat/assets/quarkus.png"/>
</header>
<section class="content">
<div class="sect1">
<h2 id="_what_is_quarkus"><a class="anchor" href="#_what_is_quarkus"></a><a class="link" href="#_what_is_quarkus">What is Quarkus?</a></h2>
<div class="sectionbody">
<p class=""><a href="https://quarkus.io/">Quarkus</a> is a Kubernetes Native Java stack tailored for GraalVM &amp; OpenJDK HotSpot, crafted from the best of breed Java libraries and standards.
Also focused on developer experience, making things just work with little to no configuration and allowing to do live coding.</p>
<p class="">Cheat-sheet tested with <strong>Quarkus 1.13.0.Final</strong>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started"><a class="anchor" href="#_getting_started"></a><a class="link" href="#_getting_started">Getting Started</a></h2>
<div class="sectionbody">
<p class="">Quarkus comes with a Maven archetype to scaffold a very simple starting project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn io.quarkus:quarkus-maven-plugin:1.13.0.Final:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=getting-started \
    -DclassName="org.acme.quickstart.GreetingResource" \
    -Dpath="/hello"</code></pre>
</div>
</div>
<p class="">This creates a simple JAX-RS resource called <code>GreetingResource</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/hello")
public class GreetingResource {

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return "hello";
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gradle"><a class="anchor" href="#_gradle"></a><a class="link" href="#_gradle">Gradle</a></h2>
<div class="sectionbody">
<p class="">There is no way to scaffold a project in Gradle but you only need to do:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">plugins {
    id 'java'
    id 'io.quarkus' version '0.26.1'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation enforcedPlatform('io.quarkus:quarkus-bom:0.26.1')
    implementation 'io.quarkus:quarkus-resteasy'
}</code></pre>
</div>
</div>
<p class="">Or in Kotlin:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="kotlin" class="language-kotlin hljs">plugins {
    java
}
apply(plugin = "io.quarkus")

repositories {
    mavenCentral()
}

dependencies {
    implementation(enforcedPlatform("io.quarkus:quarkus-bom:0.26.1"))
    implementation("io.quarkus:quarkus-resteasy")
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_packaging"><a class="anchor" href="#_packaging"></a><a class="link" href="#_packaging">Packaging</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash-shell" class="language-bash-shell hljs">mvn clean package</code></pre>
</div>
</div>
<p class="">You need to distribute the <code>-runner.jar</code> file together with <code>quarkus-app</code> directory.</p>
<p class="">If <code>quarkus.package.uber-jar</code> property is set to true, then a uber-jar is created with all dependencies bundled inside the JAR.</p>
<p class="">By default, Quarkus uses fast jar packaging, if <code>quarkus.package.type</code> property is set to <code>legacy-jar</code> then Quarkus creates the old standard jar file.</p>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.package.uber-jar=true
quarkus.package.type=legacy-jar</code></pre>
</div>
</div>
<p class="">To compile to native, you need to set <code>GRAALVM_HOME</code> environment variable and run the <code>native</code> profile.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash-shell" class="language-bash-shell hljs">mvn clean package -Pnative

./gradlew build -Dquarkus.package.type=native</code></pre>
</div>
</div>
<p class="">Possible <code>quarkus.package.type</code> are: <code>jar</code>, <code>legacy-jar</code>, <code>uber-jar</code> and <code>native</code>.</p>
<p class=""><strong>AppCDS</strong></p>
<p class="">Automatically generate AppCDS as part of the build process set the next property: <code>quarkus.package.create-appcds=true</code>.</p>
<p class="">To make use of it, just run <code>java -jar -XX:SharedArchiveFile=app-cds.jsa myapp.jar</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_command_mode"><a class="anchor" href="#_command_mode"></a><a class="link" href="#_command_mode">Command mode</a></h2>
<div class="sectionbody">
<p class="">You can define the <code>main</code> CLI method to start Quarkus.
There are two ways, implementing <code>io.quarkus.runtime.QuarkusApplication</code> interface or use the Java main method to launch Quarkus.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@io.quarkus.runtime.annotations.QuarkusMain
public class HelloWorldMain implements QuarkusApplication {
  @Override
  public int run(String... args) throws Exception {
    System.out.println("Hello World");
    return 10;
 }
}</code></pre>
</div>
</div>
<p class=""><code>run</code> method called when Quarkus starts, and stops when it finishes.</p>
<p class="">As Java <code>main</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusMain
public class JavaMain {
    public static void main(String... args) {
        Quarkus.run(HelloWorldMain.class, args);
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
Use <code>@QuarkusMain</code> in only one place.
</td>
</tr>
</table>
</div>
<p class="">Use <code>Quarkus.waitForExit()</code> from the main thread if you want to run some logic on startup, and then run like a normal application (i.e. not exit).</p>
<p class="">You can inject command line arguments by using <code>@CommandLineArguments</code> annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CommandLineArguments
String[] args;</code></pre>
</div>
</div>
<p class=""><strong>Picocli</strong></p>
<p class="">You can use Picocli to implement CLI applications:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="picocli"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CommandLine.Command
public class HelloCommand implements Runnable {

    @CommandLine.Option(names = {"-n", "--name"}, description = "Who will we greet?", defaultValue = "World")
    String name;

    private final GreetingService greetingService;

    public HelloCommand(GreetingService greetingService) {
        this.greetingService = greetingService;
    }

    @Override
    public void run() {
        greetingService.sayHello(name);
    }
}</code></pre>
</div>
</div>
<p class="">All classes annotated with <code>picocli.CommandLine.Command</code> are registered as CDI beans.</p>
<p class="">If only one class annotated with <code>picocli.CommandLine.Command</code> it will be used as entry point.
If you want to provide your own <code>@QuarkusMain</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusMain
@CommandLine.Command(name = "demo", mixinStandardHelpOptions = true)
public class ExampleApp implements Runnable, QuarkusApplication {

    @Inject
    CommandLine.IFactory factory;

    @Override
    public void run() {
    }

    @Override
    public int run(String... args) throws Exception {
        return new CommandLine(this, factory).execute(args);
    }
}</code></pre>
</div>
</div>
<p class="">Use <code>quarkus.picocli.native-image.processing.enable</code> to <code>false</code> to use the <code>picocli-codegen</code> annotation processor instead of build steps.</p>
<p class="">You can also configure CDI beans with PicoCLI arguments:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CommandLine.Command
public class EntryCommand implements Runnable {
    @CommandLine.Option(names = "-c", description = "JDBC connection string")
    String connectionString;

    @Inject
    DataSource dataSource;
}

@ApplicationScoped
class DatasourceConfiguration {

    @Produces
    @ApplicationScoped
    DataSource dataSource(CommandLine.ParseResult parseResult) {
        System.out.println(parseResult.matchedOption("c").getValue().toString());
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_extensions"><a class="anchor" href="#_extensions"></a><a class="link" href="#_extensions">Extensions</a></h2>
<div class="sectionbody">
<p class="">Quarkus comes with extensions to integrate with some libraries such as JSON-B, Camel or MicroProfile spec.
To list all available extensions just run:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:list-extensions</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
You can use <code>-DsearchPattern=panache</code> to filter out all extensions except the ones matching the expression.
</td>
</tr>
</table>
</div>
<p class="">And to register the extensions into build tool:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension -Dextensions=""

./mvnw quarkus:remove-extension -Dextensions=""</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
<code>extensions</code> property supports CSV format to register more than one extension at once.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_application_lifecycle"><a class="anchor" href="#_application_lifecycle"></a><a class="link" href="#_application_lifecycle">Application Lifecycle</a></h2>
<div class="sectionbody">
<p class="">You can be notified when the application starts/stops by observing <code>StartupEvent</code> and <code>ShutdownEvent</code> events.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ApplicationLifecycle {
    void onStart(@Observes StartupEvent event) {}
    void onStop(@Observes ShutdownEvent event) {}
}</code></pre>
</div>
</div>
<p class="">Quarkus supports graceful shutdown.
By default there is no timeout but can be set by using the <code>quarkus.shutdown.timeout</code> config property.</p>
</div>
</div>
<div class="sect1">
<h2 id="_dev_mode"><a class="anchor" href="#_dev_mode"></a><a class="link" href="#_dev_mode">Dev Mode</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw compile quarkus:dev

./gradlew quarkusDev</code></pre>
</div>
</div>
<p class="">Endpoints are registered automatically to provide some basic debug info in dev mode:</p>
<div class="ulist">
<ul>
<li>
<p><code>HTTP GET /quarkus/arc/beans</code></p>
<div class="ulist">
<ul>
<li>
<p>Query Parameters: <code>scope</code>, <code>beanClass</code>, <code>kind</code>.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>HTTP GET /quarkus/arc/observers</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dev_ui"><a class="anchor" href="#_dev_ui"></a><a class="link" href="#_dev_ui">Dev UI</a></h2>
<div class="sectionbody">
<p class="">Quarkus adds a Dev UI console to expose extension features.</p>
<p class="">The Dev UI is available in dev mode only and accessible at the <code>/q/dev</code> endpoint by default.</p>
</div>
</div>
<div class="sect1">
<h2 id="_adding_configuration_parameters"><a class="anchor" href="#_adding_configuration_parameters"></a><a class="link" href="#_adding_configuration_parameters">Adding Configuration Parameters</a></h2>
<div class="sectionbody">
<p class="">To add configuration to your application, Quarkus relies on <a href="https://github.com/eclipse/microprofile-config" target="_blank" rel="noopener">MicroProfile Config</a> spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "greetings.message")
String message;

@ConfigProperty(name = "greetings.message",
                defaultValue = "Hello")
String messageWithDefault;

@ConfigProperty(name = "greetings.message")
Optional&lt;String&gt; optionalMessage;</code></pre>
</div>
</div>
<p class="">Properties can be set (in decreasing priority) as:</p>
<div class="ulist">
<ul>
<li>
<p>System properties (<code>-Dgreetings.message</code>).</p>
</li>
<li>
<p>Environment variables (<code>GREETINGS_MESSAGE</code>).</p>
</li>
<li>
<p>Environment file named <code>.env</code> placed in the current working directory (<code>GREETING_MESSAGE=</code>).</p>
</li>
<li>
<p>External config directory under the current working directory: <code>config/application.properties</code>.</p>
</li>
<li>
<p>Resources <code>src/main/resources/application.properties</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">greetings.message = Hello World</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
<code>Array</code>, <code>List</code> and <code>Set</code> are supported. The delimiter is comma (<code>,</code>) char and <code>\</code> is the escape char.
</td>
</tr>
</table>
</div>
<p class=""><strong>Configuration Profiles</strong></p>
<p class="">Quarkus allow you to have multiple configuration in the same file (<code>application.properties</code>).</p>
<p class="">The syntax for this is <code>%{profile}.config.key=value</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.port=9090
%dev.quarkus.http.port=8181</code></pre>
</div>
</div>
<p class="">HTTP port will be 9090, unless the 'dev' profile is active.</p>
<p class="">Default profiles are:</p>
<div class="ulist">
<ul>
<li>
<p><code>dev</code>: Activated when in development mode (<code>quarkus:dev</code>).</p>
</li>
<li>
<p><code>test</code>: Activated when running tests.</p>
</li>
<li>
<p><code>prod</code>: The default profile when not running in development or test mode</p>
</li>
</ul>
</div>
<p class="">You can create custom profile names by enabling the profile either setting <code>quarkus.profile</code> system property or <code>QUARKUS_PROFILE</code> environment variable.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.port=9090
%staging.quarkus.http.port=9999</code></pre>
</div>
</div>
<p class="">And enable it <code>quarkus.profile=staging</code>.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon icon-note">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info-circle" class="svg-inline--fa fa-info-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg>
</td>
<td class="content">
To get the active profile programmatically use <code>io.quarkus.runtime.configuration.ProfileManager.getActiveProfile()</code>.
</td>
</tr>
</table>
</div>
<p class="">You can also set it in the build tool:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
&lt;version&gt;${surefire-plugin.version}&lt;/version&gt;
&lt;configuration&gt;
    &lt;systemPropertyVariables&gt;
        &lt;quarkus.test.profile&gt;foo&lt;/quarkus.test.profile&gt;
        &lt;buildDirectory&gt;${project.build.directory}
        &lt;/buildDirectory&gt;
    &lt;/systemPropertyVariables&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
Same for <code>maven-failsafe-plugin</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">test {
    useJUnitPlatform()
    systemProperty "quarkus.test.profile", "foo"
}</code></pre>
</div>
</div>
<p class="">Special properties are set in <strong>prod</strong> mode: <code>quarkus.application.version</code> and <code>quarkus.application.name</code> to get them available at runtime.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "quarkus.application.name")
String applicationName;</code></pre>
</div>
</div>
<p class=""><strong>Additional locations</strong></p>
<p class="">You can use <code>smallrye.config.locations</code> property to set additional configuration files.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">smallrye.config.locations=config.properties</code></pre>
</div>
</div>
<p class="">or</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">java -jar -Dsmallrye.config.locations=config.properties</code></pre>
</div>
</div>
<p class="">You can embed configuration files inside a dependency by adding <code>META-INF/microprofile.properties</code> inside the JAR.
When dependency is added to the application, configuration properties are merged with current configuration.</p>
<p class=""><strong>@ConfigProperties</strong></p>
<p class="">As an alternative to injecting multiple related configuration values, you can also use the <code>@io.quarkus.arc.config.ConfigProperties</code> annotation to group properties.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public class GreetingConfiguration {
    private String message;
    // getter/setter
}</code></pre>
</div>
</div>
<p class="">This class maps <code>greeting.message</code> property defined in <code>application.properties</code>.</p>
<p class="">You can inject this class by using CDI <code>@Inject GreetingConfiguration greeting;</code>.</p>
<p class="">Also you can use an interface approach:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public interface GreetingConfiguration {

    @ConfigProperty(name = "message")
    String message();
    String getSuffix();</code></pre>
</div>
</div>
<p class="">If property does not follow getter/setter naming convention you need to use <code>org.eclipse.microprofile.config.inject.ConfigProperty</code> to set it.</p>
<p class="">Nested objects are also supporte:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public class GreetingConfiguration {
    public String message;
    public HiddenConfig hidden;

    public static class HiddenConfig {
        public List&lt;String&gt; recipients;
    }
}</code></pre>
</div>
</div>
<p class="">And an <code>application.properties</code> mapping previous class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">greeting.message = hello
greeting.hidden.recipients=Jane,John</code></pre>
</div>
</div>
<p class="">Bean Validation is also supported so properties are validated at startup time, for example <code>@Size(min = 20) public String message;</code>.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
<code>prefix</code> attribute is not mandatory. If not provided, attribute is determined by class name (ie <code>GreeetingConfiguration</code> is translated to <code>greeting</code> or <code>GreetingExtraConfiguration</code> to <code>greeting-extra</code>). The suffix of the class is always removed.
</td>
</tr>
</table>
</div>
<p class="">Naming strategy can be changed with property <code>namingStrategy</code>. <code>KEBAB_CASE</code> (whatever.foo-bar) or <code>VERBATIM</code> (whatever.fooBar).</p>
<p class=""><code>@io.quarkus.arc.config.ConfigIgnore</code> annotation can be used to ignore the injection of configuration elements.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigIgnore
public Integer ignored;</code></pre>
</div>
</div>
<p class=""><strong>YAML Config</strong></p>
<p class="">YAML configuration is also supported.
The configuration file is called <code>application.yaml</code> and you need to register a dependency to enable its support:</p>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-config-yaml&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">quarkus:
  datasource:
    url: jdbc:postgresql://localhost:5432/some-database
    driver: org.postgresql.Driver</code></pre>
</div>
</div>
<p class="">Or with profiles:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">"%dev":
  quarkus:
    datasource:
      url: jdbc:postgresql://localhost:5432/some-database
      driver: org.postgresql.Driver</code></pre>
</div>
</div>
<p class="">In case of subkeys <code>~</code> is used to refer to the unprefixed part.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">quarkus:
  http:
    cors:
      ~: true
      methods: GET,PUT,POST</code></pre>
</div>
</div>
<p class="">Is equivalent to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.cors=true
quarkus.http.cors.methods=GET,PUT,POST</code></pre>
</div>
</div>
<p class=""><strong>Custom Loader</strong></p>
<p class="">You can implement your own <code>ConfigSource</code> to load configuration from different places than the default ones provided by Quarkus.
For example, database, custom XML, REST Endpoints, &#8230;&#8203;</p>
<p class="">You need to create a new class and implement <code>ConfigSource</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package com.acme.config;
public class InMemoryConfig implements ConfigSource {

    private Map&lt;String, String&gt; prop = new HashMap&lt;&gt;();

    public InMemoryConfig() {
        // Init properties
    }

    @Override
    public int getOrdinal() {
        // The highest ordinal takes precedence
        return 900;
    }

    @Override
    public Map&lt;String, String&gt; getProperties() {
        return prop;
    }

    @Override
    public String getValue(String propertyName) {
        return prop.get(propertyName);
    }

    @Override
    public String getName() {
        return "MemoryConfigSource";
    }
}</code></pre>
</div>
</div>
<p class="">Then you need to register the <code>ConfigSource</code> as Java service.
Create a file with the following content:</p>
<div class="listingblock">
<div class="title">/META-INF/services/org.eclipse.microprofile.config.spi.ConfigSource</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">com.acme.config.InMemoryConfig</code></pre>
</div>
</div>
<p class=""><strong>Custom Converters</strong></p>
<p class="">You can implement your own conversion types from String.
Implement <code>org.eclipse.microprofile.config.spi.Converter</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Priority(DEFAULT_QUARKUS_CONVERTER_PRIORITY + 100)
public class CustomInstantConverter
    implements Converter&lt;Instant&gt; {

    @Override
    public Instant convert(String value) {
        if ("now".equals(value.trim())) {
            return Instant.now();
        }
        return Instant.parse(value);
    }
}</code></pre>
</div>
</div>
<p class=""><code>@Priority</code> annotation is used to override the default <code>InstantConverter</code>.</p>
<p class="">Then you need to register the <code>Converter</code> as Java service.
Create a file with the following content:</p>
<div class="listingblock">
<div class="title">/META-INF/services/org.eclipse.microprofile.config.spi.Converter</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">com.acme.config.CustomInstantConverter</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_undertow_properties"><a class="anchor" href="#_undertow_properties"></a><a class="link" href="#_undertow_properties">Undertow Properties</a></h2>
<div class="sectionbody">
<p class="">Possible parameters with prefix <code>quarkus.servlet</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>context-path</code></dt>
<dd>
<p>The context path to serve all Servlet context from. (default: <code>/</code>)</p>
</dd>
<dt class="hdlist1"><code>default-charset</code></dt>
<dd>
<p>The default charset to use for reading and writing requests. (default: <code>UTF-8</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_injection"><a class="anchor" href="#_injection"></a><a class="link" href="#_injection">Injection</a></h2>
<div class="sectionbody">
<p class="">Quarkus is based on CDI 2.0 to implement injection of code.
It is not fully supported and only a subset of the <a href="https://quarkus.io/guides/cdi-reference" target="_blank" rel="noopener">specification is implemented</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class GreetingService {

    public String message(String message) {
        return message.toUpperCase();
    }
}</code></pre>
</div>
</div>
<p class="">Scope annotation is mandatory to make the bean discoverable.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
GreetingService greetingService;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
Quarkus is designed with Substrate VM in mind. For this reason, we encourage you to use <em>package-private</em> scope instead of <em>private</em>.
</td>
</tr>
</table>
</div>
<p class=""><strong>Produces</strong></p>
<p class="">You can also create a factory of an object by using <code>@javax.enterprise.inject.Produces</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
@ApplicationScoped
Message message() {
    Message m = new Message();
    m.setMsn("Hello");
    return m;
}

@Inject
Message msg;</code></pre>
</div>
</div>
<p class=""><strong>Qualifiers</strong></p>
<p class="">You can use qualifiers to return different implementations of the same interface or to customize the configuration of the bean.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface Quote {
    @Nonbinding String value();
}

@Produces
@Quote("")
Message message(InjectionPoint msg) {
    Message m = new Message();
    m.setMsn(
        msg.getAnnotated()
        .getAnnotation(Quote.class)
        .value()
    );

    return m;
}

@Inject
@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
Quarkus breaks the CDI spec by allowing you to inject qualified beans without using <code>@Inject</code> annotation.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
Quarkus breaks the CDI spec by skipping the <code>@Produces</code> annotation completely if the producer method is annotated with a scope annotation, a stereotype or a qualifier.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Quote("")
Message message(InjectionPoint msg) {
}

@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
<p class=""><strong>Alternatives</strong></p>
<p class="">It is also possible to select alternatives for an application using <code>application.properties</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.arc.selected-alternatives=org.acme.Foo,org.acme.*,Bar</code></pre>
</div>
</div>
<p class=""><strong>Beans by Quarkus Profile</strong></p>
<p class="">Using <code>@io.quarkus.arc.profile.IfBuildProfile</code> and <code>@io.quarkus.arc.profile.UnlessBuildProfile</code> annotations, you can conditionally enable a bean.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Dependent
public class TracerConfiguration {
    @Produces
    @IfBuildProfile("prod")
    public Tracer realTracer(Reporter reporter, Configuration configuration) {
        return new RealTracer(reporter, configuration);
    }
    @Produces
    @DefaultBean
    public Tracer noopTracer() {
        return new NoopTracer();
    }
}</code></pre>
</div>
</div>
<p class="">Using <code>@io.quarkus.arc.profile.IfBuildProperty</code> annotation, you can conditionally enable a bean.
<code>@io.quarkus.arc.DefaultBean</code> sets the default bean.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Dependent
public class TracerConfiguration {
    @Produces
    @IfBuildProperty(name = "some.tracer.enabled", stringValue = "true")
    public Tracer realTracer(Reporter reporter, Configuration configuration) {}

    @Produces
    @DefaultBean
    public Tracer noopTracer() {}
}</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon icon-note">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info-circle" class="svg-inline--fa fa-info-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg>
</td>
<td class="content">
Properties set at runtime have absolutely no effect on the bean resolution using <code>@IfBuildProperty</code>.
</td>
</tr>
</table>
</div>
<p class=""><strong>Container-managed Concurrency</strong></p>
<p class="">Quarkus provides <code>@io.quarkus.arc.Lock</code> and a built-in interceptor for concurrency control.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Lock
@ApplicationScoped
class SharedService {

    void addAmount(BigDecimal amout) {
    }

    @Lock(value = Lock.Type.READ, time = 1, unit = TimeUnit.SECONDS)
    BigDecimal getAmount() {
    }
}</code></pre>
</div>
</div>
<p class="">By default the class is in write mode (so no concurrent calls allowed) except when lock type is <code>READ</code> where the method can be called concurrently if no write operation in process.</p>
</div>
</div>
<div class="sect1">
<h2 id="_json_marshallingunmarshalling"><a class="anchor" href="#_json_marshallingunmarshalling"></a><a class="link" href="#_json_marshallingunmarshalling">JSON Marshalling/Unmarshalling</a></h2>
<div class="sectionbody">
<p class="">To work with <code>JSON-B</code> you need to add a dependency:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-resteasy-jsonb"</code></pre>
</div>
</div>
<p class="">Any POJO is marshaled/unmarshalled automatically.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Sauce {
    private String name;
    private long scovilleHeatUnits;

    // getter/setters
}</code></pre>
</div>
</div>
<p class="">JSON equivalent:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
	"name":"Blair's Ultra Death",
	"scovilleHeatUnits": 1100000
}</code></pre>
</div>
</div>
<p class="">In a <code>POST</code> endpoint example:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@POST
@Consumes(MediaType.APPLICATION_JSON)
public Response create(Sauce sauce) {
    // Create Sauce
    return Response.created(URI.create(sauce.getId()))
            .build();
}</code></pre>
</div>
</div>
<p class="">To provide custom  JsonBConfig object:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Dependent
JsonbConfig jsonConfig(Instance&lt;JsonbConfigCustomizer&gt; customizers) {
    JsonbConfig config = myJsonbConfig(); // Custom `JsonbConfig`
    for (JsonbConfigCustomizer customizer : customizers) {
        customizer.customize(config);
    }

    return config;
}</code></pre>
</div>
</div>
<p class="">To work with <code>Jackson</code> you need to add:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-jackson"</code></pre>
</div>
</div>
<p class="">If you don&#8217;t want to use the default <code>ObjectMapper</code> you can customize it by:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CustomObjectMapperConfig {
    @Singleton
    @Produces
    public ObjectMapper objectMapper(Instance&lt;ObjectMapperCustomizer&gt; customizers) {
        ObjectMapper objectMapper = new ObjectMapper();
        // perform configuration

        for (ObjectMapperCustomizer customizer : customizers) {
            customizer.customize(mapper);
        }
        return objectMapper;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
Default media type in Quarkus RestEasy is JSON.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_xml_marshallingunmarshalling"><a class="anchor" href="#_xml_marshallingunmarshalling"></a><a class="link" href="#_xml_marshallingunmarshalling">XML Marshalling/Unmarshalling</a></h2>
<div class="sectionbody">
<p class="">To work with <code>JAX-B</code> you need to add a dependency:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-jaxb"</code></pre>
</div>
</div>
<p class="">Then annotated POJOs are converted to XML.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@XmlRootElement
public class Message {
}

@GET
@Produces(MediaType.APPLICATION_XML)
public Message hello() {
    return message;
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jaxp"><a class="anchor" href="#_jaxp"></a><a class="link" href="#_jaxp">JAXP</a></h2>
<div class="sectionbody">
<p class="">To work with <code>JAX-P</code> you need to add a dependency:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="jaxp"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">final DocumentBuilder dBuilder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
final Document doc = dBuilder.parse(in);
return doc.getDocumentElement().getTextContent();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validator"><a class="anchor" href="#_validator"></a><a class="link" href="#_validator">Validator</a></h2>
<div class="sectionbody">
<p class="">Quarkus uses <a href="https://hibernate.org/validator/" target="_blank" rel="noopener">Hibernate Validator</a> to validate input/output of REST services and business services using Bean validation spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-hibernate-validator"</code></pre>
</div>
</div>
<p class="">Annotate POJO objects with validator annotations such as: <code>@NotNull</code>, <code>@Digits</code>, <code>@NotBlank</code>, <code>@Min</code>, <code>@Max</code>, &#8230;&#8203;</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Sauce {

    @NotBlank(message = "Name may not be blank")
    private String name;
    @Min(0)
    private long scovilleHeatUnits;

    // getter/setters
}</code></pre>
</div>
</div>
<p class="">To validate an object use <code>@Valid</code> annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public Response create(@Valid Sauce sauce) {}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
If a validation error is triggered, a violation report is generated and serialized as JSON. If you want to manipulate the output, you need to catch in the code the <code>ConstraintViolationException</code> exception.
</td>
</tr>
</table>
</div>
<p class=""><strong>Create Your Custom Constraints</strong></p>
<p class="">First you need to create the custom annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR,
            PARAMETER, TYPE_USE })
@Retention(RUNTIME)
@Documented
@Constraint(validatedBy = { NotExpiredValidator.class})
public @interface NotExpired {

    String message() default "Sauce must not be expired";
    Class&lt;?&gt;[] groups() default { };
    Class&lt;? extends Payload&gt;[] payload() default { };

}</code></pre>
</div>
</div>
<p class="">You need to implement the validator logic in a class that implements <code>ConstraintValidator</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class NotExpiredValidator
    implements ConstraintValidator&lt;NotExpired, LocalDate&gt;
    {

    @Override
    public boolean isValid(LocalDate value,
                        ConstraintValidatorContext ctx) {
        if ( value == null ) return true;
        LocalDate today = LocalDate.now();
        return ChronoUnit.YEARS.between(today, value) &gt; 0;
    }
}</code></pre>
</div>
</div>
<p class="">And use it normally:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@NotExpired
@JsonbDateFormat(value = "yyyy-MM-dd")
private LocalDate expired;</code></pre>
</div>
</div>
<p class=""><strong>Manual Validation</strong></p>
<p class="">You can call the validation process manually instead of relaying to <code>@Valid</code> by injecting <code>Validator</code> class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Validator validator;</code></pre>
</div>
</div>
<p class="">And use it:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Set&lt;ConstraintViolation&lt;Sauce&gt;&gt; violations =
            validator.validate(sauce);</code></pre>
</div>
</div>
<p class=""><strong>Localization</strong></p>
<p class="">You can configure the based locale for validation messages.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.default-locale=ca-ES
# Supported locales resolved by Accept-Language
quarkus.locales=en-US,es-ES,fr-FR, ca_ES</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ValidationMessages_ca_ES.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">pattern.message=No conforme al patro</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Pattern(regexp = "A.*", message = "{pattern.message}")
private String name;</code></pre>
</div>
</div>
<p class="">Bean Validation can be configured .
The prefix is: <code>quarkus.hibernate-validator</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>fail-fast</code></dt>
<dd>
<p>When fail fast is enabled the validation will stop on the first constraint violation detected. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>method-validation.allow-overriding-parameter-constraints</code></dt>
<dd>
<p>Define whether overriding methods that override constraints should throw an exception. (default: <code>false</code>).</p>
</dd>
<dt class="hdlist1"><code>method-validation.allow-parameter-constraints-on-parallel-methods</code></dt>
<dd>
<p>Define whether parallel methods that define constraints should throw an exception. (default: <code>false</code>).</p>
</dd>
<dt class="hdlist1"><code>method-validation.allow-multiple-cascaded-validation-on-return-values</code></dt>
<dd>
<p>Define whether more than one constraint on a return value may be marked for cascading validation are allowed. (default: <code>false</code>).</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_logging"><a class="anchor" href="#_logging"></a><a class="link" href="#_logging">Logging</a></h2>
<div class="sectionbody">
<p class="">You can configure how Quarkus logs:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.log.console.enable=true
quarkus.log.console.level=DEBUG
quarkus.log.console.color=false
quarkus.log.category."com.lordofthejars".level=DEBUG</code></pre>
</div>
</div>
<p class="">Prefix is <code>quarkus.log</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>category."&lt;category-name&gt;".level</code></dt>
<dd>
<p>Minimum level category (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>level</code></dt>
<dd>
<p>Default minimum level (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>console.enabled</code></dt>
<dd>
<p>Console logging enabled (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>console.format</code></dt>
<dd>
<p>Format pattern to use for logging. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>console.level</code></dt>
<dd>
<p>Minimum log level (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>console.color</code></dt>
<dd>
<p>Allow color rendering (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>file.enable</code></dt>
<dd>
<p>File logging enabled (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.format</code></dt>
<dd>
<p>Format pattern to use for logging. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %h %N[%i] %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>file.level</code></dt>
<dd>
<p>Minimum log level (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>file.path</code></dt>
<dd>
<p>The path to log file (default: <code>quarkus.log</code>)</p>
</dd>
<dt class="hdlist1"><code>file.rotation.max-file-size</code></dt>
<dd>
<p>The maximum file size of the log file</p>
</dd>
<dt class="hdlist1"><code>file.rotation.max-backup-index</code></dt>
<dd>
<p>The maximum number of backups to keep (default: <code>1</code>)</p>
</dd>
<dt class="hdlist1"><code>file.rotation.file-suffix</code></dt>
<dd>
<p>Rotating log file suffix.</p>
</dd>
<dt class="hdlist1"><code>file.rotation.rotate-on-boot</code></dt>
<dd>
<p>Indicates rotate logs at bootup (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async</code></dt>
<dd>
<p>Log asynchronously (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async.queue-length</code></dt>
<dd>
<p>The queue length to use before flushing writing (default: <code>512</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async.overflow</code></dt>
<dd>
<p>Action when queue is full (default: <code>BLOCK</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.enable</code></dt>
<dd>
<p>syslog logging is enabled (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.format</code></dt>
<dd>
<p>The format pattern to use for logging to syslog. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %h %N[%i] %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>syslog.level</code></dt>
<dd>
<p>The minimum log level to write to syslog (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.endpoint</code></dt>
<dd>
<p>The IP address and port of the syslog server (default: <code>localhost:514</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.app-name</code></dt>
<dd>
<p>The app name used when formatting the message in RFC5424 format (default: current process name)</p>
</dd>
<dt class="hdlist1"><code>syslog.hostname</code></dt>
<dd>
<p>The name of the host the messages are being sent from (default: current hostname)</p>
</dd>
<dt class="hdlist1"><code>syslog.facility</code></dt>
<dd>
<p>Priority of the message as defined by RFC-5424 and RFC-3164 (default: <code>USER_LEVEL</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.syslog-type</code></dt>
<dd>
<p>The syslog type of format message (default: <code>RFC5424</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.protocol</code></dt>
<dd>
<p>Protocol used (default: <code>TCP</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.use-counting-framing</code></dt>
<dd>
<p>Message prefixed with the size of the message (default <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.truncate</code></dt>
<dd>
<p>Message should be truncated (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.block-on-reconnect</code></dt>
<dd>
<p>Block when attempting to reconnect (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async</code></dt>
<dd>
<p>Log asynchronously (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async.queue-length</code></dt>
<dd>
<p>The queue length to use before flushing writing (default: <code>512</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async.overflow</code></dt>
<dd>
<p>Action when queue is full (default: <code>BLOCK</code>)</p>
</dd>
</dl>
</div>
<p class="">You can inject logger instance:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.jboss.logging.Logger;
import io.quarkus.arc.log.LoggerName;

@Inject
Logger log;

@LoggerName("foo")
Logger fooLog;

public void ping() {
    log.info("Simple!");
}</code></pre>
</div>
</div>
<p class=""><strong>Gelf ouput</strong></p>
<p class="">You can configure the output to be in <em>GELF</em> format instead of plain text.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-gelf"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>handler.gelf.enabled</code></dt>
<dd>
<p>Enable GELF logging handler (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.host</code></dt>
<dd>
<p>Hostname/IP of Logstash/Graylof. Prepend <code>tcp:</code> for using TCP protocol. (default: <code>udp:localhost</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.port</code></dt>
<dd>
<p>The port. (default: <code>12201</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.version</code></dt>
<dd>
<p>GELF version. (default: <code>1.1</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.extract-stack-trace</code></dt>
<dd>
<p>Post Stack-Trace to StackTrace field. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.stack-trace-throwable-reference</code></dt>
<dd>
<p>Gets the cause level to stack trace. <code>0</code> is fulls tack trace. (default: <code>0</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.filter-stack-trace</code></dt>
<dd>
<p>Stack-Trace filtering. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.timestamp-pattern</code></dt>
<dd>
<p>Java Date pattern. (default: <code>yyyy-MM-dd HH:mm:ss,SSS</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.level</code></dt>
<dd>
<p>Log level <code>java.util.logging.Level</code>. (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.facility</code></dt>
<dd>
<p>Name of the facility. (default: <code>jboss-logmanage</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.additional-field.&lt;field&gt;.&lt;subfield&gt;</code></dt>
<dd>
<p>Post additional fields. <code>quarkus.log.handler.gelf.additional-field.field1.type=String</code></p>
</dd>
<dt class="hdlist1"><code>handler.gelf.include-full-mdc</code></dt>
<dd>
<p>Include all fields from the MDC.</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.maximum-message-size</code></dt>
<dd>
<p>Maximum message size (in bytes). (default: <code>8192</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.include-log-message-parameters</code></dt>
<dd>
<p>Include message parameters from the log event. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.include-location</code></dt>
<dd>
<p>Include source code location. (default: <code>true</code>)</p>
</dd>
</dl>
</div>
<p class=""><strong>JSON output</strong></p>
<p class="">You can configure the output to be in <em>JSON</em> format instead of plain text.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-json"</code></pre>
</div>
</div>
<p class="">And the configuration values are prefix with <code>quarkus.log</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>json</code></dt>
<dd>
<p>JSON logging is enabled (default: true).</p>
</dd>
<dt class="hdlist1"><code>json.pretty-print</code></dt>
<dd>
<p>JSON output is "pretty-printed" (default: false)</p>
</dd>
<dt class="hdlist1"><code>json.date-format</code></dt>
<dd>
<p>Specify the date format to use (default: the default format)</p>
</dd>
<dt class="hdlist1"><code>json.record-delimiter</code></dt>
<dd>
<p>Record delimiter to add (default: no delimiter)</p>
</dd>
<dt class="hdlist1"><code>json.zone-id</code></dt>
<dd>
<p>The time zone ID</p>
</dd>
<dt class="hdlist1"><code>json.exception-output-type</code></dt>
<dd>
<p>The exception output type: <code>detailed</code>, <code>formatted</code>, <code>detailed-and-formatted</code> (default: <code>detailed</code>)</p>
</dd>
<dt class="hdlist1"><code>json.print-details</code></dt>
<dd>
<p>Detailed caller information should be logged (default: false)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_client"><a class="anchor" href="#_rest_client"></a><a class="link" href="#_rest_client">Rest Client</a></h2>
<div class="sectionbody">
<p class="">Quarkus implements <a href="https://github.com/eclipse/microprofile-rest-client" target="_blank" rel="noopener">MicroProfile Rest Client</a> spec:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-rest-client"</code></pre>
</div>
</div>
<p class="">To get content from <a href="http://worldclockapi.com/api/json/cet/now" class="bare">http://worldclockapi.com/api/json/cet/now</a> you need to create a service interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/api")
@RegisterRestClient
public interface WorldClockService {

    @GET @Path("/json/cet/now")
    @Produces(MediaType.APPLICATION_JSON)
    WorldClock getNow();

    @GET
    @Path("/json/{where}/now")
    @Produces(MediaType.APPLICATION_JSON)
    WorldClock getSauce(@BeanParam
                    WorldClockOptions worldClockOptions);

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class WorldClockOptions {
    @HeaderParam("Authorization")
    String auth;

    @PathParam("where")
    String where;
}</code></pre>
</div>
</div>
<p class="">And configure the hostname at <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/url=
        http://worldclockapi.com</code></pre>
</div>
</div>
<p class="">Injecting the client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RestClient
WorldClockService worldClockService;</code></pre>
</div>
</div>
<p class="">If invokation happens within JAX-RS, you can propagate headers from incoming to outgoing by using next property.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.eclipse.microprofile.rest.client.propagateHeaders=
            Authorization,MyCustomHeader</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
You can still use the JAX-RS client without any problem <code>ClientBuilder.newClient().target(&#8230;&#8203;)</code>
</td>
</tr>
</table>
</div>
<p class=""><strong>Adding headers</strong></p>
<p class="">You can customize the headers passed by implementing MicroProfile <code>ClientHeadersFactory</code> annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RegisterForReflection
public class BaggageHeadersFactory
                implements ClientHeadersFactory {
    @Override
    public MultivaluedMap&lt;String, String&gt; update(
        MultivaluedMap&lt;String, String&gt; incomingHeaders,
        MultivaluedMap&lt;String, String&gt; outgoingHeaders) {}
}</code></pre>
</div>
</div>
<p class="">And registering it in the client using <code>RegisterClientHeaders</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RegisterClientHeaders(BaggageHeadersFactory.class)
@RegisterRestClient
public interface WorldClockService {}</code></pre>
</div>
</div>
<p class="">Or statically set:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@ClientHeaderParam(name="X-Log-Level", value="ERROR")
Response getNow();</code></pre>
</div>
</div>
<p class=""><strong>Asynchronous</strong></p>
<p class="">A method on client interface can return a <code>CompletionStage</code> class to be executed asynchronously.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET @Path("/json/cet/now")
@Produces(MediaType.APPLICATION_JSON)
CompletionStage&lt;WorldClock&gt; getNow();</code></pre>
</div>
</div>
<p class=""><strong>Reactive</strong></p>
<p class="">Rest Client also integrates with reactive library named Mutiny.
To start using it you need to add the <code>quarkus-rest-client-mutiny</code>.</p>
<p class="">After that, a methodon a client interface can return a <code>io.smallrye.mutiny.Uni</code> instance.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET @Path("/json/cet/now")
@Produces(MediaType.APPLICATION_JSON)
Uni&lt;WorldClock&gt; getNow();</code></pre>
</div>
</div>
<p class="">A RESTEasy Reactive-based REST Client extension.
You only need to replace the <code>quarkus-rest-client</code> to  <code>quarkus-rest-client-reactive</code>.</p>
<p class=""><strong>Multipart</strong></p>
<p class="">It is really easy to send multipart form-data with Rest Client.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
    &lt;artifactId&gt;resteasy-multipart-provider&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">The model object:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import java.io.InputStream;

import javax.ws.rs.FormParam;
import javax.ws.rs.core.MediaType;

import
    org.jboss.resteasy.annotations.providers.multipart.PartType;

public class MultipartBody {

    @FormParam("file")
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    private InputStream file;

    @FormParam("fileName")
    @PartType(MediaType.TEXT_PLAIN)
    private String name;

    // getter/setters
}</code></pre>
</div>
</div>
<p class="">And the Rest client interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import
    org.jboss.resteasy.annotations.providers.multipart.MultipartForm;

@Path("/echo")
@RegisterRestClient
public interface MultipartService {

    @POST
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces(MediaType.TEXT_PLAIN)
    String sendMultipartData(@MultipartForm
                        MultipartBody data);

}</code></pre>
</div>
</div>
<p class=""><strong>SSL</strong></p>
<p class="">You can configure Rest Client key stores.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/trustStore=
    classpath:/store.jks
org.acme.quickstart.WorldClockService/mp-rest/trustStorePassword=
    supersecret</code></pre>
</div>
</div>
<p class="">Possible configuration properties:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>%s/mp-rest/trustStore</code></dt>
<dd>
<p>Trust store location defined with <code>classpath:</code> or <code>file:</code> prefix.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/trustStorePassword</code></dt>
<dd>
<p>Trust store password.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/trustStoreType</code></dt>
<dd>
<p>Trust store type (default: <code>JKS</code>)</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/hostnameVerifier</code></dt>
<dd>
<p>Custom hostname verifier class name. To disable SSL verification you can use <code>io.quarkus.restclient.NoopHostnameVerifier</code>.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStore</code></dt>
<dd>
<p>Key store location defined with <code>classpath:</code> or <code>file:</code> prefix.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStorePassword</code></dt>
<dd>
<p>Key store password.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStoreType</code></dt>
<dd>
<p>Key store type (default: <code>JKS</code>)</p>
</dd>
</dl>
</div>
<p class=""><strong>Timeout</strong></p>
<p class="">You can define the timeout of the Rest Client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/connectTimeout=
    1000
org.acme.quickstart.WorldClockService/mp-rest/readTimeout=
    2000</code></pre>
</div>
</div>
<p class=""><strong>Instantiate client programmatically</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">MovieReviewService reviewSvc = RestClientBuilder.newBuilder()
            .baseUri(apiUri)
            .build(WorldClockService.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_testing"><a class="anchor" href="#_testing"></a><a class="link" href="#_testing">Testing</a></h2>
<div class="sectionbody">
<p class="">Quarkus archetype adds test dependencies with JUnit 5 and Rest-Assured library to test REST endpoints.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTest
public class GreetingResourceTest {

    @Test
    public void testHelloEndpoint() {
        given()
          .when().get("/hello")
          .then()
             .statusCode(200)
             .body(is("hello"));
    }
}</code></pre>
</div>
</div>
<p class="">Test port can be set in <code>quarkus.http.test-port</code> property.
Timeout can be set in <code>quarkus.http.test-timeout</code> property.</p>
<p class="">You can also inject the URL where Quarkus is started:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@TestHTTPResource("index.html")
URL url;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@TestHTTPEndpoint(GreetingResource.class)
@TestHTTPResource
URL url;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTest
@TestHTTPEndpoint(GreetingResource.class)
public class GreetingResourceTest {
    @Test
    public void testHelloEndpoint() {
        given()
          .when().get()
          .then()
             .statusCode(200)
             .body(is("hello"));
    }
}</code></pre>
</div>
</div>
<p class="">Root path is calculated automatically, not necessary to explicitly set.</p>
<p class="">If you want any changes made to be rolled back at the end ofthe test you can use the <code>io.quarkus.test.TestTransaction</code> annotation.</p>
<p class=""><strong>QuarkusTestProfile</strong></p>
<p class="">You can define for each Test class a different configuration options.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
This implies that the Quarkus service is restarted.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyProfile implements io.quarkus.test.junit.QuarkusTestProfile {

    @Override
    public Map&lt;String, String&gt; getConfigOverrides() {
        return Map.of("greetings.message", "This is a Test");
    }

    @Override
    public String getConfigProfile() {
        return "my-test-profile";
    }

    @Override
    public Set&lt;String&gt; tags() {
        return Collections.singleton("test1");
    }
}

@QuarkusTest
@TestProfile(MyProfile.class)
public class MyTestClass {
}</code></pre>
</div>
</div>
<p class=""><code>quarkus.test.profile.tags</code> property can be set to limit test execution of test profiles.
If not set all tests are executed.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.test.profile.tags=test1</code></pre>
</div>
</div>
<p class=""><strong>Quarkus Test Resource</strong></p>
<p class="">You can execute some logic before the first test run (<code>start</code>) and execute some logic at the end of the test suite (<code>stop</code>).</p>
<p class="">You need to create a class implementing <code>QuarkusTestResourceLifecycleManager</code> interface and register it in the test via <code>@QuarkusTestResource</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyCustomTestResource
    implements QuarkusTestResourceLifecycleManager {

    @Override
    public Map&lt;String, String&gt; start() {
        // return system properties that
        // should be set for the running test
        return Collections.emptyMap();
    }

    @Override
    public void stop() {
    }

    // optional
    @Override
    public void inject(Object testInstance) {
    }

    // optional
    @Override
    public int order() {
        return 0;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
Returning new system properties implies running parallel tests in different JVMs.
</td>
</tr>
</table>
</div>
<p class="">And the usage:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(MyCustomTestResource.class)
public class MyTest {
}</code></pre>
</div>
</div>
<p class="">When using multiple <code>QuarkusTestResource</code> you can set <code>parallel</code> attribute to <code>true</code> to start them concurrently.</p>
<p class=""><strong>Testing Callbacks</strong></p>
<p class="">You can enrich <strong>all</strong> your <code>@QuarkusTest</code> classes by implementing the following callback interfaces:</p>
<div class="ulist">
<ul>
<li>
<p><code>io.quarkus.test.junit.callback.QuarkusTestBeforeClassCallback</code></p>
</li>
<li>
<p><code>io.quarkus.test.junit.callback.QuarkusTestAfterConstructCallback</code></p>
</li>
<li>
<p><code>io.quarkus.test.junit.callback.QuarkusTestBeforeEachCallback</code></p>
</li>
<li>
<p><code>io.quarkus.test.junit.callback.QuarkusTestAfterEachCallback</code></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class SimpleAnnotationCheckerBeforeClassCallback implements QuarkusTestBeforeClassCallback {
   @Override
    public void beforeClass(Class&lt;?&gt; testClass) {
    }
}</code></pre>
</div>
</div>
<p class="">And needs to be registered as Java SPI:</p>
<div class="listingblock">
<div class="title">META-INF/services/io.quarkus.test.junit.callback.QuarkusTestBeforeClassCallback</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">io.quarkus.it.main.SimpleAnnotationCheckerBeforeClassCallback</code></pre>
</div>
</div>
<p class=""><strong>Mocking</strong></p>
<p class="">If you need to provide an alternative implementation of a service (for testing purposes) you can do it by using CDI <code>@Alternative</code> annotation using it in the test service placed at <code>src/test/java</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Alternative
@Priority(1)
@ApplicationScoped
public class MockExternalService extends ExternalService {}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
This does not work when using native image testing.
</td>
</tr>
</table>
</div>
<p class="">A stereotype annotation <code>io.quarkus.test.Mock</code> is provided declaring <code>@Alternative</code>, <code>@Priority(1)</code> and <code>@Dependent</code>.</p>
<p class=""><strong>Mockito</strong></p>
<p class="">Instead of creating stubs, you can also create mocks of your services with mockito.
Add the following dependency <code>io.quarkus:quarkus-junit5-mockito</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@InjectMock
GreetingService greetingService;

@BeforeEach
public void setup() {
    Mockito.when(greetingService.greet()).thenReturn("Hi");
}

@Path("/hello")
public class ExampleResource {

    @Inject
    GreetingService greetingService;
}</code></pre>
</div>
</div>
<p class="">Mock is automatically injected and only valid for the defined test class.</p>
<p class="">Also <code>spy</code> is supported:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@InjectSpy
GreetingService greetingService;

Mockito.verify(greetingService, Mockito.times(1)).greet();</code></pre>
</div>
</div>
<p class=""><strong>REST Client</strong></p>
<p class="">To Mock REST Client, you need to define the interface with <code>@ApplicationScope</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
@RegisterRestClient
public interface GreetingService {
}

@InjectMock
@RestClient
GreetingService greetingService;

Mockito.when(greetingService.hello()).thenReturn("hello from mockito");</code></pre>
</div>
</div>
<p class=""><strong>Interceptors</strong></p>
<p class="">Tests are actually full CDI beans, so you can apply CDI interceptors:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTest
@Stereotype
@Transactional
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface TransactionalQuarkusTest {
}

@TransactionalQuarkusTest
public class TestStereotypeTestCase {}</code></pre>
</div>
</div>
<p class=""><strong>Test Coverage</strong></p>
<p class="">Due the nature of Quarkus to calculate correctly the coverage information with JaCoCo, you might need offline instrumentation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-jacoco "</code></pre>
</div>
</div>
<p class="">Possible configuration parameters prefixed <code>quarkus.jacoco</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>data-file</code></dt>
<dd>
<p>The jacoco data file. (default: <code>jacoco-quarkus.exec</code>)</p>
</dd>
<dt class="hdlist1"><code>report</code></dt>
<dd>
<p>If Quarkus should generate the Jacoco report. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>output-encoding</code></dt>
<dd>
<p>Encoding of the generated reports. (default: <code>UTF-8</code>)</p>
</dd>
<dt class="hdlist1"><code>title</code></dt>
<dd>
<p>Name of the root node HTML report pages.</p>
</dd>
<dt class="hdlist1"><code>footer</code></dt>
<dd>
<p>Footer text used in HTML report pages.</p>
</dd>
<dt class="hdlist1"><code>source-encoding</code></dt>
<dd>
<p>Encoding of the source files. (default: <code>UTF-8</code>)</p>
</dd>
<dt class="hdlist1"><code>includes</code></dt>
<dd>
<p>A list of class files to include in the report. (default: <code>**</code>)</p>
</dd>
<dt class="hdlist1"><code>excludes</code></dt>
<dd>
<p>A list of class files to exclude from the report.</p>
</dd>
<dt class="hdlist1"><code>report-location</code></dt>
<dd>
<p>The location of the report files. (default: <code>jacoco-report</code>)</p>
</dd>
</dl>
</div>
<p class=""><strong>Native Testing</strong></p>
<p class="">To test native executables annotate the test with <code>@NativeImageTest</code>.</p>
<p class=""><strong>Quarkus Integration Tests</strong></p>
<p class=""><code>@QuarkusIntegrationTest</code> should be used to launch and test the artifact produced by the Quarkus build.
If the result of a Quarkus build is a JAR then the app is launched as <code>java -jar</code>, if native is launched as <code>./application</code>, if container image is created (JiB, Docker extensions) is launched as <code>docker run</code>.</p>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_persistence"><a class="anchor" href="#_persistence"></a><a class="link" href="#_persistence">Persistence</a></h2>
<div class="sectionbody">
<p class="">Quarkus works with JPA(Hibernate) as persistence solution.
But also provides an <a href="https://en.wikipedia.org/wiki/Active_record_pattern" target="_blank" rel="noopener">Active Record pattern</a> implementation under Panache project.</p>
<p class="">To use database access you need to add Quarkus JDBC drivers instead of the original ones.
At this time <code>Apache Derby</code>, <code>H2</code>, <code>MariaDB</code>, <code>MySQL</code>, <code>MSSQL</code> and <code>PostgreSQL</code> drivers are supported.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-hibernate-orm-panache,
                io.quarkus:quarkus-jdbc-mariadb"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class Developer extends PanacheEntity {

    // id field is implicit

    public String name;
}</code></pre>
</div>
</div>
<p class="">And configuration in <code>src/main/resources/application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.jdbc.url=jdbc:mariadb://localhost:3306/mydb
quarkus.datasource.db-kind=mariadb
quarkus.datasource.username=developer
quarkus.datasource.password=developer
quarkus.hibernate-orm.database.generation=update</code></pre>
</div>
</div>
<p class="">List of datasource parameters.</p>
<p class=""><code>quarkus.datasource</code> as prefix is skipped in the next table.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>db-kind</code></dt>
<dd>
<p>Built-in datasource kinds so the JDBC driver is resolved automatically. Possible values: <code>derby</code>, <code>h2</code>, <code>mariadb</code>, <code>mssql</code>, <code>mysql</code>, <code>postgresql</code>, <code>db2</code>.</p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>Username to access.</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>Password to access.</p>
</dd>
<dt class="hdlist1"><code>driver</code></dt>
<dd>
<p>JDBC Driver class. It is not necessary to set if <code>db-kind</code> used.</p>
</dd>
<dt class="hdlist1"><code>credentials-provider</code></dt>
<dd>
<p>Sets a custom credential provider name.</p>
</dd>
<dt class="hdlist1"><code>credentials-provider-name</code></dt>
<dd>
<p>It is the <code>@Named</code> value of the credentials provider bean. Not necessary if only one implementation.</p>
</dd>
<dt class="hdlist1"><code>jdbc.url</code></dt>
<dd>
<p>The datasource URL.</p>
</dd>
<dt class="hdlist1"><code>jdbc.min-size</code></dt>
<dd>
<p>The datasource pool minimum size. (default: <code>0</code>)</p>
</dd>
<dt class="hdlist1"><code>jdbc.max-size</code></dt>
<dd>
<p>The datasource pool maximum size. (default: <code>20</code>)</p>
</dd>
<dt class="hdlist1"><code>jdbc.initial-size</code></dt>
<dd>
<p>The initial size of the pool.</p>
</dd>
<dt class="hdlist1"><code>jdbc.background-validation-interval</code></dt>
<dd>
<p>The interval at which we validate idle connections in the background. (default: <code>2M</code>)</p>
</dd>
<dt class="hdlist1"><code>jdbc.acquisition-timeout</code></dt>
<dd>
<p>The timeout before cancelling the acquisition of a new connection. (default: <code>5</code>)</p>
</dd>
<dt class="hdlist1"><code>jdbc.leak-detection-interval</code></dt>
<dd>
<p>The interval at which we check for connection leaks.</p>
</dd>
<dt class="hdlist1"><code>jdbc.idle-removal-interval</code></dt>
<dd>
<p>The interval at which we try to remove idle connections. (default: <code>5M</code>)</p>
</dd>
<dt class="hdlist1"><code>jdbc.max-lifetime</code></dt>
<dd>
<p>The max lifetime of a connection.</p>
</dd>
<dt class="hdlist1"><code>jdbc.transaction-isolation-level</code></dt>
<dd>
<p>The transaction isolation level. Possible values: <code>UNDEFINED</code>, <code>NONE</code>, <code>READ_UNCOMMITTED</code>, <code>READ_COMMITTED</code>, <code>REPEATABLE_READ</code>, <code>SERIALIZABLE</code>.</p>
</dd>
<dt class="hdlist1"><code>jdbc.detect-statement-leaks</code></dt>
<dd>
<p>Warn when a connection is returned to the pool without the application having closed all open statements. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>jdbc.new-connection-sql</code></dt>
<dd>
<p>Query executed when first using a connection.</p>
</dd>
<dt class="hdlist1"><code>jdbc.validation-query-sql</code></dt>
<dd>
<p>Query executed to validate a connection.</p>
</dd>
<dt class="hdlist1"><code>jdbc.pooling-enabled</code></dt>
<dd>
<p>Disable pooling to prevent reuse of Connections. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>jdbc.enable-metrics</code></dt>
<dd>
<p>Enable datasource metrics collection when using <code>quarkus-smallrye-metrics</code> extension.</p>
</dd>
<dt class="hdlist1"><code>jdbc.additional-jdbc-properties.&lt;extraProperty&gt;</code></dt>
<dd>
<p>Unspecified properties to be passed to the JDBC driver when creating new connections.</p>
</dd>
</dl>
</div>
<p class="">Hibernate configuration properties.
Prefix <code>quarkus.hibernate-orm</code> is skipped.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dialect</code></dt>
<dd>
<p>Class name of the Hibernate ORM dialect.</p>
</dd>
<dt class="hdlist1"><code>dialect.storage-engine</code></dt>
<dd>
<p>The storage engine when the dialect supports multiple storage engines.</p>
</dd>
<dt class="hdlist1"><code>sql-load-script</code></dt>
<dd>
<p>Name of the file containing the SQL statements to execute when starts.
<code>no-file</code> force Hibernate to skip SQL import. (default: <code>import.sql</code>)</p>
</dd>
<dt class="hdlist1"><code>batch-fetch-size</code></dt>
<dd>
<p>The size of the batches. (default: -1 disabled)</p>
</dd>
<dt class="hdlist1"><code>maxFetchDepth</code></dt>
<dd>
<p>The maximum depth of outer join fetch tree for single-ended associations.</p>
</dd>
<dt class="hdlist1"><code>multitenant</code></dt>
<dd>
<p>Defines the method for multi-tenancy. Possible values: <code>DATABASE</code>, <code>NONE</code>, <code>SCHEMA</code>. (default: <code>NONE</code>)</p>
</dd>
<dt class="hdlist1"><code>multitenant-schema-datasource</code></dt>
<dd>
<p>Defines the name of the data source to use in case of SCHEMA approach.</p>
</dd>
<dt class="hdlist1"><code>query.query-plan-cache-max-size</code></dt>
<dd>
<p>The maximum size of the query plan cache.</p>
</dd>
<dt class="hdlist1"><code>query.default-null-ordering</code></dt>
<dd>
<p>Default precedence of null values in <code>ORDER BY</code>. Possible values: <code>none</code>, <code>first</code>, <code>last</code>. (default: <code>none</code>)</p>
</dd>
<dt class="hdlist1"><code>database.generation</code></dt>
<dd>
<p>Database schema is generation. Possible values: <code>none</code>, <code>create</code>, <code>drop-and-create</code>, <code>drop</code>, <code>update</code>. (default: <code>none</code>)</p>
</dd>
<dt class="hdlist1"><code>database.generation.halt-on-error</code></dt>
<dd>
<p>Stop on the first error when applying the schema. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>database.generation.create-schemas</code></dt>
<dd>
<p>Hibernate ORM should create the schemas automatically (for databases supporting them).</p>
</dd>
<dt class="hdlist1"><code>database.default-catalog</code></dt>
<dd>
<p>Default catalog.</p>
</dd>
<dt class="hdlist1"><code>database.default-schema</code></dt>
<dd>
<p>Default Schema.</p>
</dd>
<dt class="hdlist1"><code>database.charset</code></dt>
<dd>
<p>Charset.</p>
</dd>
<dt class="hdlist1"><code>jdbc.timezone</code></dt>
<dd>
<p>Time Zone JDBC driver.</p>
</dd>
<dt class="hdlist1"><code>jdbc.statement-fetch-size</code></dt>
<dd>
<p>Number of rows fetched at a time.</p>
</dd>
<dt class="hdlist1"><code>jdbc.statement-batch-size</code></dt>
<dd>
<p>Number of updates sent at a time.</p>
</dd>
<dt class="hdlist1"><code>log.sql</code></dt>
<dd>
<p>Show SQL logs (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>log.jdbc-warnings</code></dt>
<dt class="hdlist1"><code>statistics</code></dt>
<dd>
<p>Enable statiscs collection. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>physical-naming-strategy</code></dt>
<dd>
<p>Class name of the Hibernate PhysicalNamingStrategy implementation.</p>
</dd>
<dt class="hdlist1"><code>globally-quoted-identifiers</code></dt>
<dd>
<p>Should quote all identifiers. (default: <code>false</code>)</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>metrics-enabled</code></dt>
<dd>
<p>Metrics published with smallrye-metrics extension (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1">second-level-caching-enabled</dt>
<dd>
<p>Enable/Disable 2nd level cache. (default: <code>true</code>)</p>
</dd>
</dl>
</div>
<p class="">Database operations:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">// Insert
Developer developer = new Developer();
developer.name = "Alex";
developer.persist();

// Find All
Developer.findAll().list();

// Hibernate Filters
Person.findAll().filter("Person.hasName", Parameters.with("name", "Alex"));

// Find By Query
Developer.find("name", "Alex").firstResult();

// Delete
Developer developer = new Developer();
developer.id = 1;
developer.delete();

Person.deleteById(id);
// Delete By Query
long numberOfDeleted = Developer.delete("name", "Alex");</code></pre>
</div>
</div>
<p class="">Remember to annotate methods with <code>@Transactional</code> annotation to make changes persisted in the database.</p>
<p class="">If queries start with the keyword <code>from</code> then they are treated as <em>HQL</em> query, if not then next short form is supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>order by</code> which expands to <code>from EntityName order by &#8230;&#8203;</code></p>
</li>
<li>
<p><code>&lt;columnName&gt;</code> which expands to <code>from EntityName where &lt;columnName&gt;=?</code></p>
</li>
<li>
<p><code>&lt;query&gt;</code> which is expanded to <code>from EntityName where &lt;query&gt;</code></p>
</li>
</ul>
</div>
<p class=""><strong>Static Methods</strong></p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>findById</code>: <code>Object</code></dt>
<dd>
<p>Returns object or null if not found. Overloaded version with <code>LockModeType</code> is provided.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>findByIdOptional</code>: <code>Optional&lt;Object&gt;</code></dt>
<dd>
<p>Returns object or <code>java.util.Optional</code>.</p>
</dd>
<dt class="hdlist1"><code>find</code>: <code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Lists of entities meeting given query with parameters set. Returning a <code>PanacheQuery</code>.</p>
</dd>
<dt class="hdlist1"><code>find</code>: <code>String</code>, <code>Sort</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Lists of entities meeting given query with parameters set sorted by <code>Sort</code> attribute/s. Returning a <code>PanacheQuery</code>.</p>
</dd>
<dt class="hdlist1"><code>findAll</code></dt>
<dd>
<p>Finds all entities. Returning a <code>PanacheQuery</code>.</p>
</dd>
<dt class="hdlist1"><code>findAll</code>: <code>Sort</code></dt>
<dd>
<p>Finds all entities sorted by <code>Sort</code> attribute/s. Returning a <code>PanacheQuery</code>.</p>
</dd>
<dt class="hdlist1"><code>list</code>: <code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Lists of entities meeting given query with parameters set. Returning a <code>List</code>.</p>
</dd>
<dt class="hdlist1"><code>list</code>: <code>String</code>, <code>Sort</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Lists of entities meeting given query with parameters set sorted by <code>Sort</code> attribute/s. Returning a <code>List</code>.</p>
</dd>
<dt class="hdlist1"><code>listAll</code></dt>
<dd>
<p>Finds all entities. Returning a <code>List</code>.</p>
</dd>
<dt class="hdlist1"><code>listAll</code>: <code>Sort</code></dt>
<dd>
<p>Finds all entities sorted by <code>Sort</code> attribute/s. Returning a <code>List</code>.</p>
</dd>
<dt class="hdlist1"><code>stream</code>: <code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p><code>java.util.stream.Stream</code> of entities meeting given query with parameters set.</p>
</dd>
<dt class="hdlist1"><code>stream</code>: <code>String</code>, <code>Sort</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p><code>java.util.stream.Stream</code> of entities meeting given query with parameters set sorted by <code>Sort</code> attribute/s.</p>
</dd>
<dt class="hdlist1"><code>streamAll</code></dt>
<dd>
<p><code>java.util.stream.Stream</code> of all entities.</p>
</dd>
<dt class="hdlist1"><code>streamAll</code>: <code>Sort</code></dt>
<dd>
<p><code>java.util.stream.Stream</code> of all entities sorted by <code>Sort</code> attribute/s.</p>
</dd>
<dt class="hdlist1"><code>count</code></dt>
<dd>
<p>Number of entities.</p>
</dd>
<dt class="hdlist1"><code>count</code>: <code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Number of entities meeting given query with parameters set.</p>
</dd>
</dl>
</div>
<p class="">Enables a Hibernate filter during fetching of results for this query.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>deleteAll</code></dt>
<dd>
<p>Number of deleted entities.</p>
</dd>
<dt class="hdlist1"><code>delete</code>: <code>String</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Number of deleted entities meeting given query with parameters set.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>deleteById</code>: <code>boolean</code>, [<code>Object</code>]</dt>
<dd>
<p>Delete by id. Returns if deleted or not.</p>
</dd>
<dt class="hdlist1"><code>persist</code>: [<code>Iterable</code>, <code>Steram</code>, <code>Object&#8230;&#8203;</code>]</dt>
<dd>
<p>Persist object.</p>
</dd>
</dl>
</div>
<p class="">In case of using streams, remember to close them or use a <code>try/catch</code> block: <code>try (Stream&lt;Person&gt; persons = Person.streamAll())</code>.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
<code>find</code> methods defines a <code>withLock(LockModeType)</code> to define the lock type and <code>withHint(QueryHints.HINT_CACHEABLE, "true")</code> to define hints.
</td>
</tr>
</table>
</div>
<p class=""><strong>Named Queries</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
@NamedQuery(name = "Person.getByName", query = "from Person where name = :name")
public class Person extends PanacheEntity {

    public static Person findByName(String name){
        return find("#Person.getByName", name).firstResult();
    }
}</code></pre>
</div>
</div>
<p class=""><strong>Pagination</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons = Person
            .find("status", Status.Alive);
livingPersons.page(Page.ofSize(25));

// get the first page
List&lt;Person&gt; firstPage = livingPersons.list();
// get the second page
List&lt;Person&gt; secondPage = livingPersons.nextPage().list();</code></pre>
</div>
</div>
<p class=""><strong>Range</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons = Person
            .find("status", Status.Alive);
List&lt;Person&gt; secondRange = livingPersons.range(25, 49).list();</code></pre>
</div>
</div>
<p class="">You cannot mix pagination and range.</p>
<p class="">If entities are defined in external JAR, you need to enable in these projects the <code>Jandex</code> plugin in project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
    &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.3&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-index&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;jandex&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss&lt;/groupId&gt;
            &lt;artifactId&gt;jandex&lt;/artifactId&gt;
            &lt;version&gt;2.1.1.Final&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<p class="">Panache includes an annotation processor that enhance your entities.
If you disable annotation processors you might need to create a marker file on Panache archives at <code>META-INF/panache-archive.marker</code> manually.</p>
<p class=""><strong>Testing</strong></p>
<p class="">To mock using active record pattern:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-panache-mock&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Test
public void testPanacheMocking() {
    PanacheMock.mock(Person.class);

    Mockito.when(Person.count()).thenReturn(23l);
    Assertions.assertEquals(23, Person.count());
    PanacheMock.verify(Person.class, Mockito.times(1)).count();
}</code></pre>
</div>
</div>
<p class=""><strong>DevServices</strong></p>
<p class="">When testing or running in dev mode Quarkus can even provide you with a zero config database out of the box.
Depending on your database type you may need docker installed in order to use this feature.</p>
<p class="">The following open source databases:</p>
<div class="ulist">
<ul>
<li>
<p>Postgresql (container)</p>
</li>
<li>
<p>MySQL (container)</p>
</li>
<li>
<p>MariaDB (container)</p>
</li>
<li>
<p>H2 (in-process)</p>
</li>
<li>
<p>Apache Derby (in-process)</p>
</li>
</ul>
</div>
<p class="">To use DevServices don’t configure a database URL, username and password, Quarkus will provide the database and you can just start coding without worrying about config.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.db-kind=mariadb
%prod.quarkus.datasource.jdbc.url=jdbc:mariadb://db:3306/mydb
%prod.quarkus.datasource.username=developer
%prod.quarkus.datasource.password=developer</code></pre>
</div>
</div>
<p class="">Possible configuration values prefixed with <code>quarkus.datasource</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>devservices</code></dt>
<dd>
<p>If devservices is enabled or not. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>devservices.image-name</code></dt>
<dd>
<p>The container image name to use instead of the default one.</p>
</dd>
<dt class="hdlist1"><code>devservices.properties</code></dt>
<dd>
<p>Generic properties that are added to the database connection URL.</p>
</dd>
</dl>
</div>
<p class=""><strong>DAO pattern</strong></p>
<p class="">Also supports <em>DAO</em> pattern with <code>PanacheRepository&lt;TYPE&gt;</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class DeveloperRepository
    implements PanacheRepository&lt;Person&gt; {
   public Person findByName(String name){
     return find("name", name).firstResult();
   }
}</code></pre>
</div>
</div>
<p class=""><strong>EntityManager</strong>
You can inject <code>EntityManager</code> in your classes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
EntityManager em;

@Inject
org.hibernate.Session session;

@Inject
org.hibernate.SessionFactory sessionFactory;

em.persist(car);</code></pre>
</div>
</div>
<p class=""><strong>Multiple datasources</strong></p>
<p class="">You can register more than one datasource.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># default
quarkus.datasource.db-kind=h2
quarkus.datasource.jdbc.url=jdbc:h2:tcp://localhost/mem:default
....
# users datasource
quarkus.datasource.users.devservices=false
quarkus.datasource.users.db-kind=h2
quarkus.datasource.users.jdbc.url=jdbc:h2:tcp://localhost/mem:users</code></pre>
</div>
</div>
<p class="">Notice that after <code>datasource</code> you set the datasource name, in previous case <code>users</code>.</p>
<p class="">You can inject then <code>AgroalDataSource</code> with <code>io.quarkus.agroal.DataSource</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@DataSource("users")
AgroalDataSource dataSource1;</code></pre>
</div>
</div>
<p class=""><strong>Flushing</strong></p>
<p class="">You can force flush operation by calling <code>.flush()</code> or <code>.persistAndFlush()</code> to make it in a single call.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
This flush is less efficient and you still need to commit transaction.
</td>
</tr>
</table>
</div>
<p class=""><strong>Testing</strong></p>
<p class="">There is a Quarkus Test Resource that starts and stops H2 server before and after test suite.</p>
<p class="">Register dependency <code>io.quarkus:quarkus-test-h2:test</code>.</p>
<p class="">And annotate the test:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(H2DatabaseTestResource.class)
public class FlywayTestResources {
}</code></pre>
</div>
</div>
<p class=""><strong>Transactions</strong></p>
<p class="">The easiest way to define your transaction boundaries is to use the <code>@Transactional</code> annotation.</p>
<p class="">Transactions are mandatory in case of none idempotent operations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
public void createDeveloper() {}</code></pre>
</div>
</div>
<p class="">You can control the transaction scope:</p>
<div class="ulist">
<ul>
<li>
<p><code>@Transactional(REQUIRED)</code> (default): starts a transaction if none was started, stays with the existing one otherwise.</p>
</li>
<li>
<p><code>@Transactional(REQUIRES_NEW)</code>: starts a transaction if none was started; if an existing one was started, suspends it and starts a new one for the boundary of that method.</p>
</li>
<li>
<p><code>@Transactional(MANDATORY)</code>: fails if no transaction was started ; works within the existing transaction otherwise.</p>
</li>
<li>
<p><code>@Transactional(SUPPORTS)</code>: if a transaction was started, joins it ; otherwise works with no transaction.</p>
</li>
<li>
<p><code>@Transactional(NOT_SUPPORTED)</code>: if a transaction was started, suspends it and works with no transaction for the boundary of the method; otherwise works with no transaction.</p>
</li>
<li>
<p><code>@Transactional(NEVER)</code>: if a transaction was started, raises an exception; otherwise works with no transaction.</p>
</li>
</ul>
</div>
<p class="">You can configure the default transaction timeout using <code>quarkus.transaction-manager.default-transaction-timeout</code> configuration property. By default it is set to 60 seconds.</p>
<p class="">You can set a timeout property, in seconds, that applies to transactions created within the annotated method by using <code>@TransactionConfiguration</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
@TransactionConfiguration(timeout=40)
public void createDeveloper() {}</code></pre>
</div>
</div>
<p class="">If you want more control over transactions you can inject <code>UserTransaction</code> and use a programmatic way.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject UserTransaction transaction

transaction.begin();
transaction.commit();
transaction.rollback();</code></pre>
</div>
</div>
<p class="">You can implement your custom credentials provider (ie Azure KeyVault) to provide a username/password for the database connection. <code>Name</code> information is not necessary if there is only one custom credential provider.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
@Unremovable
@Named("my-credentials-provider")
public class CustomCredentialsProvider implements CredentialsProvider {
    @Inject
    Config config;

    @Override
	public Properties getCredentials(String credentialsProviderName) {

        properties.put(CredentialsProvider.USER_PROPERTY_NAME, "hibernate_orm_test");
		properties.put(CredentialsProvider.PASSWORD_PROPERTY_NAME, "hibernate_orm_test");

    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.credentials-provider=
    custom
quarkus.datasource.credentials-provider-name=
    my-credentials-provider</code></pre>
</div>
</div>
<p class=""><strong>Hibernate Multitenancy</strong></p>
<p class="">Multitenancy is supported using Schema or Database approach.
First you need to define how tenant is identified:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RequestScoped
@Unremovable
public class CustomTenantResolver implements TenantResolver {

    @Inject
    RoutingContext context;

    @Override
    public String getDefaultTenantId() {
        return "base";
    }

    @Override
    public String resolveTenantId() {
    }

}</code></pre>
</div>
</div>
<p class=""><em>Schema approach</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.hibernate-orm.database.generation=none

quarkus.hibernate-orm.multitenant=SCHEMA</code></pre>
</div>
</div>
<p class=""><em>Database approach</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.hibernate-orm.database.generation=none

quarkus.hibernate-orm.multitenant=DATABASE

# default tenant
quarkus.datasource.base.db-kind=postgresql
quarkus.datasource.base.username=quarkus_test
...
# Tenant 'mycompany'
quarkus.datasource.mycompany.db-kind=postgresql
quarkus.datasource.mycompany.username=mycompany
quarkus.flyway.mycompany.locations=classpath:database/mycompany
...</code></pre>
</div>
</div>
<p class="">If you need more dynamic approach implement: <code>@ApplicationScoped io.quarkus.hibernate.orm.runtime.tenant.TenantConnectionResolver</code></p>
</div>
</div>
<div class="sect1">
<h2 id="_hibernate_envers"><a class="anchor" href="#_hibernate_envers"></a><a class="link" href="#_hibernate_envers">Hibernate Envers</a></h2>
<div class="sectionbody">
<p class="">Quarkus supports Hibernate Envers.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="hibernate-envers"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_rest_data_panache"><a class="anchor" href="#_rest_data_panache"></a><a class="link" href="#_rest_data_panache">REST Data Panache</a></h2>
<div class="sectionbody">
<p class="">REST Data with Panache extension can generate the basic CRUD endpoints for your entities and repositories.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="hibernate-orm-rest-data-panache"</code></pre>
</div>
</div>
<p class="">You also need to add the JDBC driver extension and a JSON Marshaller (ie <code>resteasy-jackson</code>).</p>
<p class="">Then you can define interfaces for defining endpoints:</p>
<p class="">In case of Active Record pattern:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface DeveloperResource extends PanacheEntityResource&lt;Developer, Long&gt; {
}</code></pre>
</div>
</div>
<p class="">In case of Repository:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface DeveloperResource extends PanacheRepositoryResource&lt;DeveloperRepository, Developer, Long&gt; {
}</code></pre>
</div>
</div>
<p class="">Quarkus will generate automatically the implementation for you following the next rules:</p>
<div class="ulist">
<ul>
<li>
<p>Default path is a hyphenated lowercase resource name without a suffix of <code>resource</code> or <code>controller</code>.</p>
</li>
<li>
<p><code>get(@PathParam("id"))</code>, <code>list</code>, <code>add(Developer)</code>, <code>update(@PathParam("id"), Developer)</code>, <code>delete(@PathParam("id"))</code></p>
</li>
</ul>
</div>
<p class="">You can customize these defaults by using <code>@ResourceProperties</code> and <code>@MethodProperties</code> annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ResourceProperties(hal = true, path = "my-developer", halCollectionName = "dev-collections")
public interface DeveloperResource extends PanacheEntityResource&lt;Developer, Long&gt; {
    @MethodProperties(path = "all")
    List&lt;Developer&gt; list();
    @MethodProperties(exposed = false)
    void delete(Long id);
}</code></pre>
</div>
</div>
<p class="">If <code>hal</code> is <code>true</code>, you need to send the <code>Accept: application/hal+json</code> HTTP header to get the response.</p>
</div>
</div>
<div class="sect1">
<h2 id="_hibernate_reactive"><a class="anchor" href="#_hibernate_reactive"></a><a class="link" href="#_hibernate_reactive">Hibernate Reactive</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-hibernate-reactive, quarkus-resteasy-mutiny, "</code></pre>
</div>
</div>
<p class="">Also you need to add the reactive driver (ie <code>quarkus-reactive-pg-client</code>).</p>
<p class="">You can use: <code>org.hibernate.reactive.mutiny.Mutiny</code> or <code>org.hibernate.reactive.stage.Stage</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
@Table(name = "dev")
public class Developer {
}

@Inject
CompletionStage&lt;Stage.Session&gt; stageSession;

@Inject
Uni&lt;Mutiny.Session&gt; mutinySession;

public Uni&lt;Long&gt; reactivePersist() {
    return mutinySession
        .flatMap(s -&gt; s.persist(new Developer(1, "Alex"))
        .flatMap(v -&gt; session.flush())
        ....

}

public CompletionStage&lt;Developer&gt; reactiveFind() {
    return stageSession
        .thenCompose(session -&gt; {
            session.find(Developer.class, 1);
        });
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_infinispan"><a class="anchor" href="#_infinispan"></a><a class="link" href="#_infinispan">Infinispan</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://infinispan.org/" target="_blank" rel="noopener">Infinispan</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="infinispan-client"</code></pre>
</div>
</div>
<p class="">Serialization uses a library called <a href="https://github.com/infinispan/protostream" target="_blank" rel="noopener">Protostream</a>.</p>
<p class=""><strong>Annotation based</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ProtoFactory
public Author(String name, String surname) {
    this.name = name;
    this.surname = surname;
}

@ProtoField(number = 1)
public String getName() {
    return name;
}

@ProtoField(number = 2)
public String getSurname() {
    return surname;
}</code></pre>
</div>
</div>
<p class="">Initializer to set configuration settings.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@AutoProtoSchemaBuilder(includeClasses =
    { Book.class, Author.class },
    schemaPackageName = "book_sample")
interface BookContextInitializer
        extends SerializationContextInitializer {
}</code></pre>
</div>
</div>
<p class=""><strong>User written based</strong></p>
<p class="">There are three ways to create your schema:</p>
<p class=""><em>Protofile</em></p>
<p class="">Creates a <code>.proto</code> file in the <code>META-INF</code> directory.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="proto" class="language-proto hljs">package book_sample;

message Author {
  required string name = 1;
  required string surname = 2;
}</code></pre>
</div>
</div>
<p class="">In case of having a Collection field you need to use the <code>repeated</code> key (ie <code>repeated Author authors = 4</code>).</p>
<p class=""><em>In code</em></p>
<p class="">Setting <code>proto</code> schema directly in a produced bean.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
FileDescriptorSource bookProtoDefinition() {
    return FileDescriptorSource
        .fromString("library.proto",
                    "package book_sample;\n" +
                    "message Author {\n" +
                    "  required string name = 1;\n" +
                    "  required string surname = 2;\n" +
                    "}");
}</code></pre>
</div>
</div>
<p class=""><em>Marshaller</em></p>
<p class="">Using <code>org.infinispan.protostream.MessageMarshaller</code> interface.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class AuthorMarshaller
    implements MessageMarshaller&lt;Author&gt; {

   @Override
   public String getTypeName() {
      return "book_sample.Author";
   }

   @Override
   public Class&lt;? extends Author&gt; getJavaClass() {
      return Author.class;
   }

   @Override
   public void writeTo(ProtoStreamWriter writer,
                    Author author) throws IOException {
      writer.writeString("name", author.getName());
      writer.writeString("surname", author.getSurname());
   }

   @Override
   public Author readFrom(ProtoStreamReader reader)
        throws IOException {
      String name = reader.readString("name");
      String surname = reader.readString("surname");
      return new Author(name, surname);
   }
}</code></pre>
</div>
</div>
<p class="">And producing the marshaller:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
MessageMarshaller authorMarshaller() {
    return new AuthorMarshaller();
}</code></pre>
</div>
</div>
<p class=""><strong>Infinispan Embedded</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="infinispan-embeddedy"</code></pre>
</div>
</div>
<div class="page-break"></div>
<p class="">Configuration in <code>infinispan.xml</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;local-cache name="quarkus-transaction"&gt;
   &lt;transaction
        transaction-manager-lookup=
        "org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup"/&gt;
&lt;/local-cache&gt;</code></pre>
</div>
</div>
<p class="">Set configuration file location in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.infinispan-embedded.xml-config=infinispan.xml</code></pre>
</div>
</div>
<p class="">And you can inject the main entry point for the cache:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.infinispan.manager.EmbeddedCacheManager cacheManager;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_redis"><a class="anchor" href="#_redis"></a><a class="link" href="#_redis">Redis</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with Redis.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="redis-client"</code></pre>
</div>
</div>
<p class="">Configure Redis location:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.redis.hosts=localhost:6379</code></pre>
</div>
</div>
<p class="">You can use synchronous or reactive clients:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
RedisClient redisClient;

@Inject
ReactiveRedisClient reactiveRedisClient;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">void increment(String key, Integer incrementBy) {
    redisClient.incrby(key, incrementBy.toString());
}

Uni&lt;List&lt;String&gt;&gt; keys() {
    return reactiveRedisClient
        .keys("*")
        .map(response -&gt; {
            List&lt;String&gt; result = new ArrayList&lt;&gt;();
            for (Response r : response) {
                result.add(r.toString());
            }
            return result;
        });
}</code></pre>
</div>
</div>
<p class=""><strong>Multiple Redis Clients</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.redis.hosts = localhost:6379
quarkus.redis.second.hosts = localhost:6379</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
RedisClient defaultRedisClient;

@Inject
@RedisClientName("second")
RedisClient redisClient2;</code></pre>
</div>
</div>
<p class="">List of Redis parameters.</p>
<p class=""><code>quarkus.redis</code> as prefix is skipped in the next table.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>health.enabled</code></dt>
<dd>
<p>Health check is published in case the smallrye-health extension is present. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>The Redis password.</p>
</dd>
<dt class="hdlist1"><code>hosts</code></dt>
<dd>
<p>The Redis hosts. (default: <code>localhost:6379</code>)</p>
</dd>
<dt class="hdlist1"><code>database</code></dt>
<dd>
<p>The Redis database.</p>
</dd>
<dt class="hdlist1"><code>timeout</code></dt>
<dd>
<p>The maximum delay to wait before a blocking command to redis server times out. (default: <code>10s</code>)</p>
</dd>
<dt class="hdlist1"><code>ssl</code></dt>
<dd>
<p>Enables or disables the SSL on connect.</p>
</dd>
<dt class="hdlist1"><code>clinet-type</code></dt>
<dd>
<p>The Redis client type. Possible values: <code>standalone</code>, <code>cluster</code>, <code>sentinel</code> (default: <code>standalone</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_flyway"><a class="anchor" href="#_flyway"></a><a class="link" href="#_flyway">Flyway</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://flywaydb.org/">Flyway</a> to help you on database schema migrations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-flyway"</code></pre>
</div>
</div>
<p class="">Then place migration files to the migrations folder (<code>classpath:db/migration</code>).</p>
<p class="">You can inject <code>org.flywaydb.core.Flyway</code> to programmatically execute the migration.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Flyway flyway;

flyway.migrate();</code></pre>
</div>
</div>
<p class="">Or can be automatically executed by setting <code>migrate-at-start</code> property to <code>true</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.flyway.migrate-at-start=true</code></pre>
</div>
</div>
<p class="">List of Flyway parameters.</p>
<p class=""><code>quarkus.flyway</code> as prefix is skipped in the next table.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>clean-at-start</code></dt>
<dd>
<p>Execute Flyway clean command (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>migrate-at-start</code></dt>
<dd>
<p>Flyway migration automatically (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>locations</code></dt>
<dd>
<p>CSV locations to scan recursively for migrations. Supported prefixes <code>classpath</code> and <code>filesystem</code> (default: <code>classpath:db/migration</code>).</p>
</dd>
<dt class="hdlist1"><code>connect-retries</code></dt>
<dd>
<p>The maximum number of retries when attempting to connect (default: 0)</p>
</dd>
<dt class="hdlist1"><code>schemas</code></dt>
<dd>
<p>CSV case-sensitive list of schemas managed (default: none)</p>
</dd>
<dt class="hdlist1"><code>table</code></dt>
<dd>
<p>The name of Flyway’s schema history table (default: <code>flyway_schema_history</code>)</p>
</dd>
<dt class="hdlist1"><code>out-of-order</code></dt>
<dd>
<p>Allows migrations to be run "out of order".</p>
</dd>
<dt class="hdlist1"><code>ignore-missing-migrations</code></dt>
<dd>
<p>Ignore missing migrations when reading the history table.</p>
</dd>
<dt class="hdlist1"><code>sql-migration-prefix</code></dt>
<dd>
<p>Prefix for versioned SQL migrations (default: <code>V</code>)</p>
</dd>
</dl>
</div>
<p class=""><code>repeatable-sql-migration-prefix::</code>
Prefix for repeatable SQL migrations (default: <code>R</code>)</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>baseline-on-migrate</code></dt>
<dd>
<p>Only migrations above <strong>baseline-version</strong> will then be applied</p>
</dd>
<dt class="hdlist1"><code>baseline-version</code></dt>
<dd>
<p>Version to tag an existing schema with when executing baseline (default: 1)</p>
</dd>
<dt class="hdlist1"><code>baseline-description</code></dt>
<dd>
<p>Description to tag an existing schema with when executing baseline (default: <code>Flyway Baseline</code>)</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>validate-on-migrate</code></dt>
<dd>
<p>Validate the applied migrations against the available ones (default: <code>true</code>)</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>placeholder-prefix</code></dt>
<dd>
<p>Prefix of every placeholder (default: <code>${</code>)</p>
</dd>
<dt class="hdlist1"><code>placeholder-suffix</code></dt>
<dd>
<p>Suffix of every placeholder (default: <code>}</code>)</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>callbacks</code></dt>
<dd>
<p>Comma-separated list of fully qualified class names of Callback implementations.</p>
</dd>
<dt class="hdlist1"><code>ignore-future-migrations</code></dt>
<dd>
<p>Ignore future migrations when reading the history table.</p>
</dd>
</dl>
</div>
<p class=""><strong>Multiple Datasources</strong></p>
<p class="">To use multiple datasource in Flyway you just need to add the datasource name just after the <code>flyway</code> property:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.users.jdbc.url=jdbc:h2:tcp://localhost/mem:users
quarkus.datasource.inventory.jdbc.url=jdbc:h2:tcp://localhost/mem:inventory
# ...

quarkus.flyway.users.schemas=USERS_TEST_SCHEMA
quarkus.flyway.inventory.schemas=INVENTORY_TEST_SCHEMA
# ...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_liquibase"><a class="anchor" href="#_liquibase"></a><a class="link" href="#_liquibase">Liquibase</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.liquibase.org/">Liquibase</a> to help you on database schema migrations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-liquibase"</code></pre>
</div>
</div>
<p class="">Then place changelog files to the (<code>src/main/resources/db</code>) folder.</p>
<p class="">You can inject <code>org.quarkus.liquibase.LiquibaseFactory</code> to programmatically execute the migration.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
LiquibaseFactory liquibaseFactory;

try (Liquibase liquibase = liquibaseFactory.createLiquibase()) {
    ...
}</code></pre>
</div>
</div>
<p class="">Or can be automatically executed by setting <code>migrate-at-start</code> property to <code>true</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.liquibase.migrate-at-start=true</code></pre>
</div>
</div>
<p class="">List of Liquibase parameters.</p>
<p class=""><code>quarkus.liquibase</code> as prefix is skipped in the next table.</p>
<div class="dlist">
<dl>
<dt class="hdlist1">change-log</dt>
<dd>
<p>The change log file. <code>XML</code>, <code>YAML</code> , <code>JSON</code>, <code>SQL</code> formats supported. (default: <code>db/changeLog.xml</code>)</p>
</dd>
<dt class="hdlist1">change-log-parameters."&lt;parameter-name&gt;"</dt>
<dd>
<p>Liquibase changelog parameters.</p>
</dd>
<dt class="hdlist1">migrate-at-start</dt>
<dd>
<p>The migrate at start flag. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1">validate-on-migrate</dt>
<dd>
<p>The validate on update flag. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1">clean-at-start</dt>
<dd>
<p>The clean at start flag. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1">contexts</dt>
<dd>
<p>The list of contexts.</p>
</dd>
<dt class="hdlist1">labels</dt>
<dd>
<p>The list of labels.</p>
</dd>
<dt class="hdlist1">database-change-log-table-name</dt>
<dd>
<p>The database change log lock table name. (default: <code>DATABASECHANGELOG</code>)</p>
</dd>
<dt class="hdlist1">database-change-log-lock-table-name</dt>
<dd>
<p>The database change log lock table name. (default: <code>DATABASECHANGELOGLOCK</code>)</p>
</dd>
<dt class="hdlist1">default-catalog-name</dt>
<dd>
<p>The default catalog name.</p>
</dd>
<dt class="hdlist1">default-schema-name</dt>
<dd>
<p>The default schema name.</p>
</dd>
<dt class="hdlist1">liquibase-catalog-name</dt>
<dd>
<p>The liquibase tables catalog name.</p>
</dd>
<dt class="hdlist1">liquibase-schema-name</dt>
<dd>
<p>The liquibase tables schema name.</p>
</dd>
<dt class="hdlist1">liquibase-tablespace-name</dt>
<dd>
<p>The liquibase tables tablespace name.</p>
</dd>
</dl>
</div>
<p class=""><strong>Multiple Datasources</strong></p>
<p class="">To use multiple datasource in Liquibase you just need to add the datasource name just after the <code>liquibase</code> property:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.users.jdbc.url=jdbc:h2:tcp://localhost/mem:users
quarkus.datasource.inventory.jdbc.url=jdbc:h2:tcp://localhost/mem:inventory
# ...

quarkus.liquibase.users.schemas=USERS_TEST_SCHEMA
quarkus.liquibase.inventory.schemas=INVENTORY_TEST_SCHEMA
# ...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hibernate_search"><a class="anchor" href="#_hibernate_search"></a><a class="link" href="#_hibernate_search">Hibernate Search</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener">Elasticsearch</a> to provide a full-featured full-text search using <a href="https://hibernate.org/search/" target="_blank" rel="noopener">Hibernate Search</a> API.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-hibernate-search-elasticsearch"</code></pre>
</div>
</div>
<p class="">You need to annotate your model with Hibernate Search API to index it:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
@Indexed
public class Author extends PanacheEntity {

    @FullTextField(analyzer = "english")
    public String bio;

    @FullTextField(analyzer = "name")
    @KeywordField(name = "firstName_sort",
        sortable = Sortable.YES,
        normalizer = "sort")
    public String firstName;

    @OneToMany
    @IndexedEmbedded
    public List&lt;Book&gt; books;

}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
It is not mandatory to use Panache.
</td>
</tr>
</table>
</div>
<p class="">You need to define the analyzers and normalizers defined in annotations.
You only need to implement <code>ElasticsearchAnalysisConfigurer</code> interface and configure it.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyQuarkusAnalysisConfigurer
            implements ElasticsearchAnalysisConfigurer {

    @Override
    public void configure(
        ElasticsearchAnalysisDefinitionContainerContext ctx)
    {
            ctx.analyzer("english").custom()
                .withTokenizer("standard")
                .withTokenFilters("asciifolding",
                    "lowercase", "porter_stem");

        ctx.normalizer("sort").custom()
            .withTokenFilters("asciifolding", "lowercase");
    }
}</code></pre>
</div>
</div>
<p class="">Use Hibernate Search in REST service:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class LibraryResource {

    @Inject
    EntityManager em;

    @Transactional
    public List&lt;Author&gt; searchAuthors(
        @QueryParam("pattern") String pattern) {
        return Search.getSearchSession(em)
            .search(Author.class)
            .predicate(f -&gt;
                pattern == null || pattern.isEmpty() ?
                    f.matchAll() :
                    f.simpleQueryString()
                        .onFields("firstName",
                            "lastName", "books.title")
                        .matching(pattern)
                )
            .sort(f -&gt; f.byField("lastName_sort")
            .then().byField("firstName_sort"))
            .fetchHits();
    }</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
When not using Hibernate ORM, index data using <code>Search.getSearchSession(em).createIndexer()</code> <code>.startAndWait()</code> at startup time.
</td>
</tr>
</table>
</div>
<p class="">Configure the extension in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.hibernate-search.elasticsearch.version=7
quarkus.hibernate-search.elasticsearch.
    analysis-configurer=MyQuarkusAnalysisConfigurer
quarkus.hibernate-search.elasticsearch.
    automatic-indexing.synchronization-strategy=searchable
quarkus.hibernate-search.elasticsearch.
    index-defaults.lifecycle.strategy=drop-and-create
quarkus.hibernate-search.elasticsearch.
    index-defaults.lifecycle.required-status=yellow</code></pre>
</div>
</div>
<p class="">List of Hibernate-Elasticsearch properties prefixed with <code>quarkus.hibernate-search.elasticsearch</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>backends</code></dt>
<dd>
<p>Map of configuration of additional backends.</p>
</dd>
<dt class="hdlist1"><code>version</code></dt>
<dd>
<p>Version of Elasticsearch</p>
</dd>
<dt class="hdlist1"><code>analysis-configurer</code></dt>
<dd>
<p>Class or name of the neab used to configure.</p>
</dd>
<dt class="hdlist1"><code>hosts</code></dt>
<dd>
<p>List of Elasticsearch servers hosts.</p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>Username for auth.</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>Password for auth.</p>
</dd>
<dt class="hdlist1"><code>connection-timeout</code></dt>
<dd>
<p>Duration of connection timeout.</p>
</dd>
<dt class="hdlist1"><code>max-connections</code></dt>
<dd>
<p>Max number of connections to servers.</p>
</dd>
<dt class="hdlist1"><code>max-connections-per-route</code></dt>
<dd>
<p>Max number of connections to server.</p>
</dd>
<dt class="hdlist1"><code>indexes</code></dt>
<dd>
<p>Per-index specific configuration.</p>
</dd>
<dt class="hdlist1"><code>discovery.enabled</code></dt>
<dd>
<p>Enables automatic discovery.</p>
</dd>
<dt class="hdlist1"><code>discovery.refresh-interval</code></dt>
<dd>
<p>Refresh interval of node list.</p>
</dd>
<dt class="hdlist1"><code>discovery.default-scheme</code></dt>
<dd>
<p>Scheme to be used for the new nodes.</p>
</dd>
<dt class="hdlist1"><code>automatic-indexing.synchronization-strategy</code></dt>
<dd>
<p>Status for which you wait before considering the operation completed (<code>queued</code>,<code>committed</code> or <code>searchable</code>).</p>
</dd>
<dt class="hdlist1"><code>automatic-indexing.enable-dirty-check</code></dt>
<dd>
<p>When enabled, re-indexing of is skipped if the changes are on properties that are not used when indexing.</p>
</dd>
<dt class="hdlist1"><code>index-defaults.lifecycle.strategy</code></dt>
<dd>
<p>Index lifecycle (<code>none</code>, <code>validate</code>, <code>update</code>, <code>create</code>, <code>drop-and-create</code>, <code>drop-abd-create-drop</code>)</p>
</dd>
<dt class="hdlist1"><code>index-defaults.lifecycle.required-status</code></dt>
<dd>
<p>Minimal cluster status (<code>green</code>, <code>yellow</code>, <code>red</code>)</p>
</dd>
<dt class="hdlist1"><code>index-defaults.lifecycle.required-status-wait-timeout</code></dt>
<dd>
<p>Waiting time before failing the bootstrap.</p>
</dd>
<dt class="hdlist1"><code>index-defaults.refresh-after-write</code></dt>
<dd>
<p>Set if index should be refreshed after writes.</p>
</dd>
</dl>
</div>
<p class="">Possible annotations:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>@Indexed</code></dt>
<dd>
<p>Register entity as full text index</p>
</dd>
<dt class="hdlist1"><code>@FullTextField</code></dt>
<dd>
<p>Full text search. Need to set an analyzer to split tokens.</p>
</dd>
<dt class="hdlist1"><code>@KeywordField</code></dt>
<dd>
<p>The string is kept as one single token but can be normalized.</p>
</dd>
<dt class="hdlist1"><code>IndexedEmbedded</code></dt>
<dd>
<p>Include the Book fields into the Author index.</p>
</dd>
<dt class="hdlist1"><code>@ContainerExtraction</code></dt>
<dd>
<p>Sets how to extract a value from container, e.g from a <code>Map</code>.</p>
</dd>
<dt class="hdlist1"><code>@DocumentId</code></dt>
<dd>
<p>Map an unusual entity identifier to a document identifier.</p>
</dd>
<dt class="hdlist1"><code>@GenericField</code></dt>
<dd>
<p>Full text index for any supported type.</p>
</dd>
<dt class="hdlist1"><code>@IdentifierBridgeRef</code></dt>
<dd>
<p>Reference to the identifier bridge to use for a <code>@DocumentId</code>.</p>
</dd>
<dt class="hdlist1"><code>@IndexingDependency</code></dt>
<dd>
<p>How a dependency of the indexing process to a property should affect automatic reindexing.</p>
</dd>
<dt class="hdlist1"><code>@ObjectPath</code></dt>
<dt class="hdlist1"><code>@ScaledNumberField</code></dt>
<dd>
<p>For <code>java.math.BigDecimal</code> or <code>java.math.BigInteger</code> that you need higher precision.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_dynamodb"><a class="anchor" href="#_amazon_dynamodb"></a><a class="link" href="#_amazon_dynamodb">Amazon DynamoDB</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://aws.amazon.com/dynamodb/" class="bare">https://aws.amazon.com/dynamodb/</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-amazon-dynamodb"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
DynamoDbClient dynamoDB;</code></pre>
</div>
</div>
<p class="">To use asycnhronous client with Mutiny:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-amazon-dynamodb, resteasy-mutiny"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
DynamoDbAsyncClient dynamoDB;

Uni.createFrom().completionStage(() -&gt; dynamoDB.scan(scanRequest()))....</code></pre>
</div>
</div>
<p class="">To use it as a local DynamoDB instance:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.dynamodb.region=
    eu-central-1
quarkus.dynamodb.endpoint-override=
    http://localhost:8000
quarkus.dynamodb.credentials.type=STATIC
quarkus.dynamodb.credentials.static-provider
    .access-key-id=test-key
quarkus.dynamodb.credentials.static-provider
.secret-access-key=test-secret</code></pre>
</div>
</div>
<p class="">If you want to work with an AWS account, you’d need to set it with:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">quarkus.dynamodb.region=&lt;YOUR_REGION&gt;
quarkus.dynamodb.credentials.type=DEFAULT</code></pre>
</div>
</div>
<p class=""><code>DEFAULT</code> credentials provider chain:</p>
<div class="ulist">
<ul>
<li>
<p>System properties <code>aws.accessKeyId</code>, <code>aws.secretKey</code></p>
</li>
<li>
<p>Env. Varables <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code></p>
</li>
<li>
<p>Credentials profile <code>~/.aws/credentials</code></p>
</li>
<li>
<p>Credentials through the Amazon EC2 container service if the <code>AWS_CONTAINER_CREDENTIALS_RELATIVE_URI</code> set</p>
</li>
<li>
<p>Credentials through Amazon EC2 metadata service.</p>
</li>
</ul>
</div>
<p class="">Configuration parameters prefixed with <code>quarkus.dynamodb</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>enable-endpoint-discovery</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Endpoint discovery for a service API that supports endpoint discovery.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>endpoint-override</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Configure the endpoint with which the SDK should communicate.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>api-call-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Time to complete an execution.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>interceptors</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">List of class interceptors.</p></div></td>
</tr>
</tbody>
</table>
<p class="">Configuration parameters prefixed with <code>quarkus.dynamodb.aws</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>region</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Region that hosts DynamoDB.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>DEFAULT</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Credentials that should be used <code>DEFAULT</code>, <code>STATIC</code>, <code>SYSTEM_PROPERTY</code>, <code>ENV_VARIABLE</code>, <code>PROFILE</code>, <code>CONTAINER</code>, <code>INSTANCE_PROFILE</code>, <code>PROCESS</code>, <code>ANONYMOUS</code></p></div></td>
</tr>
</tbody>
</table>
<p class="">Credentials specific parameters prefixed with <code>quarkus.dynamodb.aws.credentials</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">DEFAULT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>default-provider.async-credential-update-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Should fetch credentials async.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>default-provider.reuse-last-provider-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Should reuse the last successful credentials.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">STATIC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>static-provider.access-key-id</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">AWS access key id.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>static-provider.secret-access-key</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">AWS secret access key.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROFILE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>profile-provider.profile-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>default</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The name of the profile to use.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROCESS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>process-provider.command</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Command to execute to retrieve credentials.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>process-provider.process-output-limit</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">1024</p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max bytes to retrieve from process.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>process-provider.credential-refresh-threshold</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>PT15S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The amount of time between credentials expire and credentials refreshed.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>process-provider.async-credential-update-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Should fetch credentials async.</p></div></td>
</tr>
</tbody>
</table>
<p class="">In case of synchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.sync-client</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-acquisition-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>10S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection acquisation timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-max-idle-time</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>60S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max time to connection to be opened.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-time-to-live</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>0</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max time connection to be open.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>socket-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>30S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Time to wait for data.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-connections</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>50</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max connections.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>expect-continue-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Client send an HTTP <code>expect-continue</code> handsake.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>use-idle-connection-reaper</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connections in pool should be closed asynchronously.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.endpoint</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Endpoint of the proxy server.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Enables HTTP proxy.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Proxy username.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Proxy password.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.ntlm-domain</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">For NTLM, domain name.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.ntlm-workstation</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">For NTLM, workstation name.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.preemptive-basic-authentication-enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Authenticate pre-emptively.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.non-proxy-hosts</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">List of non proxy hosts.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>system-property</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Path to key store.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Key store type.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Key store password.</p></div></td>
</tr>
</tbody>
</table>
<p class="">In case of asynchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.async-client</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-acquisition-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>10S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection acquisation timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-max-idle-time</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>60S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max time to connection to be opened.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connection timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-time-to-live</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>0</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max time connection to be open.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-concurrency</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>50</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max number of concurrent connections.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>use-idle-connection-reaper</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Connections in pool should be closed asynchronously.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>read-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>30S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Read timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>30S</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Write timeout.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.endpoint</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Endpoint of the proxy server.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.enabled</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Enables HTTP proxy.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>proxy.non-proxy-hosts</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">List of non proxy hosts.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>system-property</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Path to key store.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.type</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Key store type.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-managers-provider.file-store.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Key store password.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>ssl-provider</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">SSL Provider (<code>jdk</code>, <code>openssl</code>, <code>openssl-refcnt</code>).</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>protocol</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>HTTP_1_1</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Sets the HTTP protocol.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-http2-streams</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Max number of concurrent streams.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>event-loop.override</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Enable custom event loop conf.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>event-loop.number-of-threads</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Number of threads to use in event loop.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>event-loop.thread-name-prefix</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>aws-java-sdk-NettyEventLoop</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Prefix of thread names.</p></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_s3"><a class="anchor" href="#_amazon_s3"></a><a class="link" href="#_amazon_s3">Amazon S3</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-amazon-s3"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
S3Client s3Client;</code></pre>
</div>
</div>
<p class="">You need to set a HTTP client either <code>URL Connection</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;url-connection-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">or Apache HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;apache-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.s3.sync-client.type=apache</code></pre>
</div>
</div>
<p class="">And configure it:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.s3.endpoint-override=http://localhost:8008
quarkus.s3.interceptors=io.quarkus.it.amazon.s3.S3ModifyResponse
quarkus.s3.aws.region=us-east-1
quarkus.s3.aws.credentials.type=static
quarkus.s3.aws.credentials.static-provider.access-key-id=test-key
quarkus.s3.aws.credentials.static-provider.secret-access-key=test-secret</code></pre>
</div>
</div>
<p class="">You can inject asynchronous client too:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
S3AsyncClient s3AsyncClient;</code></pre>
</div>
</div>
<p class="">And you need to add the asynchronous Netty client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;netty-nio-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">Configuration properties are the same as <a href="#_amazon_dynamodb">Amazon DynamoDB</a> but changing the prefix from <code>dynamodb</code> to <code>s3</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_neo4j"><a class="anchor" href="#_neo4j"></a><a class="link" href="#_neo4j">Neo4j</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://neo4j.com/" target="_blank" rel="noopener">Neo4j</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-neo4j"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.neo4j.driver.Driver driver;</code></pre>
</div>
</div>
<p class="">Configuration properties:</p>
<p class=""><code>quarkus.neo4j</code> as prefix is skipped in the next table.</p>
<p class="">Prefix is <code>quarkus.neo4j</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>uri</code></dt>
<dd>
<p>URI of Neo4j. (default: <code>localhost:7687</code>)</p>
</dd>
<dt class="hdlist1"><code>authentication.username</code></dt>
<dd>
<p>Username. (default: <code>neo4j</code>)</p>
</dd>
<dt class="hdlist1"><code>authentication.password</code></dt>
<dd>
<p>Password. (default: <code>neo4j</code>)</p>
</dd>
<dt class="hdlist1"><code>authentication.disabled</code></dt>
<dd>
<p>Disable authentication. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>pool.metrics-enabled</code></dt>
<dd>
<p>Enable metrics. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>pool.log-leaked-sessions</code></dt>
<dd>
<p>Enable leaked sessions logging. (default:`false`)</p>
</dd>
<dt class="hdlist1"><code>pool.max-connection-pool-size</code></dt>
<dd>
<p>Max amount of connections. (default: <code>100</code>)</p>
</dd>
<dt class="hdlist1"><code>pool.max-connection-lifetime</code></dt>
<dd>
<p>Pooled connections older will be closed and removed from the pool. (default: <code>1H</code>)</p>
</dd>
<dt class="hdlist1"><code>pool.connection-acquisition-timeout</code></dt>
<dd>
<p>Timout for connection adquisation. (default: 1M)</p>
</dd>
<dt class="hdlist1"><code>pool.idle-time-before-connection-test</code></dt>
<dd>
<p>Pooled connections idled in the pool for longer than this timeout will be tested before they are used. (default: <code>-1</code>)</p>
</dd>
</dl>
</div>
<p class="">As Neo4j uses SSL communication by default, to create a native executable you need to compile with next options GraalVM options:</p>
<p class=""><code>-H:EnableURLProtocols=http,https --enable-all-security-services -H:+JNI</code></p>
<p class="">And Quarkus Maven Plugin with next configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;
&lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;native-image&lt;/id&gt;
        &lt;goals&gt;
            &lt;goal&gt;native-image&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
            &lt;enableHttpUrlHandler&gt;true
            &lt;/enableHttpUrlHandler&gt;
            &lt;enableHttpsUrlHandler&gt;true
            &lt;/enableHttpsUrlHandler&gt;
            &lt;enableAllSecurityServices&gt;true
            &lt;/enableAllSecurityServices&gt;
            &lt;enableJni&gt;true&lt;/enableJni&gt;
        &lt;/configuration&gt;
    &lt;/execution&gt;
&lt;/executions&gt;</code></pre>
</div>
</div>
<p class="">Alternatively, and as a not recommended way in production, you can disable SSL and Quarkus will disable Bolt SSL as well. <code>quarkus.ssl.native=false</code>.</p>
<p class="">If you are using Neo4j 4.0, you can use fully reactive.
Add the next extension: <code>quarkus-resteasy-mutiny</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
public Publisher&lt;String&gt; get() {
    return Multi.createFrom().resource(driver::rxSession,
        session -&gt; session.readTransaction(tx -&gt; {
            RxResult result = tx.run("MATCH (f:Fruit) RETURN f.name as name");
            return Multi.createFrom().publisher(result.records())
                    .map(record -&gt; record.get("name").asString());
        })
    ).withFinalizer(session -&gt; {
        return Uni.createFrom().publisher(session.close());
    });
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mongodb_client"><a class="anchor" href="#_mongodb_client"></a><a class="link" href="#_mongodb_client">MongoDB Client</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.mongodb.com/" target="_blank" rel="noopener">MongoDB</a>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-mongodb-client"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
com.mongodb.client.MongoClient client;

@Inject
io.quarkus.mongodb.reactive.ReactiveMongoClient client;</code></pre>
</div>
</div>
<p class="">INFO: Reactive client uses exposes Mutiny API.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mongodb.connection-string=mongodb://localhost:27018
quarkus.mongodb.write-concern.journal=false</code></pre>
</div>
</div>
<p class=""><strong>Multi MongoDB support</strong></p>
<p class="">You can configure multiple MongoDB clients using same approach as with <code>DataSource</code>.
The syntax is <code>quarkus.mongodb.&lt;optional name&gt;.&lt;property&gt;</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mongodb.users.connection-string = mongodb://mongo2:27017/userdb
quarkus.mongodb.inventory.connection-string = mongodb://mongo3:27017/invdb</code></pre>
</div>
</div>
<p class="">Inject the instance using <code>@io.quarkus.mongodb.runtime.MongoClientName</code> annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@MongoClientName("users")
MongoClient mongoClient1;</code></pre>
</div>
</div>
<div class="page-break"></div>
<p class=""><code>quarkus.mongodb</code> as prefix is skipped in the following table.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-string</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">MongoDB connection URI.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>hosts</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>List&lt;String&gt;</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Addresses passed as <code>host:port</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>application-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-pool-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Int</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>min-pool-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Int</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-connection-idle-time</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle time of a pooled connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-connection-life-time</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Life time of pooled connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>wait-queue-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum wait time for new connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>maintenance-frequency</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time period between runs of maintenance job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>maintenance-initial-delay</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait before running the first maintenance job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>wait-queue-multiple</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Int</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Multiplied with <code>max-pool-size</code> gives max numer of threads waiting.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>connection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>socket-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls-insecure</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [false]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insecure TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tls</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [false]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable TLS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>replica-set-name</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implies hosts given are a seed list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>server-selection-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait for server selection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>local-threshold</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum ping time to make a server eligible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>heartbeat-frequency</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frequency to determine the state of servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>read-preference</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>primary</code>,
<code>primaryPreferred</code>,
<code>secondary</code>,
<code>secondaryPreferred</code>,
<code>nearest</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read preferences.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>max-wait-queue-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Int</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of concurrent operations allowed to wait.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.safe</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [true]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures are writes are ack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.journal</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [true]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Journal writing aspect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.w</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to all write commands.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.retry-writes</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>boolean [false]</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retry writes if network fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>write-concern.w-timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Duration</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout to all write commands.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.username</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.password</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.auth-mechanism</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>MONGO-CR</code>, <code>GSSAPI</code>, <code>PLAIN</code>, <code>MONGODB-X509</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.auth-source</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>String</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source of the authentication credentials.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>credentials.auth-mechanism-properties</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>Map&lt;String, String&gt;</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication mechanism properties.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_mongodb_panache"><a class="anchor" href="#_mongodb_panache"></a><a class="link" href="#_mongodb_panache">MongoDB Panache</a></h2>
<div class="sectionbody">
<p class="">You can also use the Panache framework to write persistence part when using MongoDB.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="mongodb-panache"</code></pre>
</div>
</div>
<p class="">MongoDB configuration comes from <a href="#_mongodb_client">MongoDB Client</a> section.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@MongoEntity(collection="ThePerson")
public class Person extends PanacheMongoEntity {
    public String name;

    @BsonProperty("birth")
    public LocalDate birthDate;

    public Status status;
}</code></pre>
</div>
</div>
<p class="">Possible annotations in fields: <code>@BsonId</code> (for custom ID), <code>@BsonProperty</code> and <code>@BsonIgnore</code>.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
<code>@MongoEntity</code> is optional.
</td>
</tr>
</table>
</div>
<p class=""><strong>Multi-tenancy with MongoDB Panache</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@MongoEntity(collection = "TheBook", clientName = "client2", database = "database2")</code></pre>
</div>
</div>
<p class="">Methods provided are similar of the ones shown in <a href="#_persistence">Persistence</a> section.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">person.persist();
person.update();
person.delete();

List&lt;Person&gt; allPersons = Person.listAll();
person = Person.findById(personId);
List&lt;Person&gt; livingPersons = Person.list("status", Status.Alive);
List&lt;Person&gt; persons = Person.list(Sort.by("name").and("birth"));

long updated = Person.update("name", "Mortal").where("status", Status.Alive);

long countAll = Person.count();

Person.deleteById(id);
Person.delete("status", Status.Alive);</code></pre>
</div>
</div>
<p class="">All <code>list</code> methods have equivalent <code>stream</code> versions.</p>
<p class=""><strong>Pagination</strong></p>
<p class="">You can also use pagination:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons =
    Person.find("status", Status.Alive);
livingPersons.page(Page.ofSize(25));

// get the first page
List&lt;Person&gt; firstPage = livingPersons.list();
// get the second page
List&lt;Person&gt; secondPage = livingPersons.nextPage().list();</code></pre>
</div>
</div>
<p class=""><strong>Range</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons = Person
            .find("status", Status.Alive);
List&lt;Person&gt; secondRange = livingPersons.range(25, 49).list();</code></pre>
</div>
</div>
<p class="">You cannot mix pagination and range.</p>
<p class=""><strong>Queries</strong></p>
<p class="">Native MongoDB queries are supported (if they start with <code>{</code> or <code>org.bson.Document</code> instance) as well as Panache Queries.
Panache Queries equivalence in MongoDB:</p>
<div class="ulist">
<ul>
<li>
<p><code>firstname = ?1 and status = ?2</code> &#8594; <code>{'firstname': ?1, 'status': ?2}</code></p>
</li>
<li>
<p><code>amount &gt; ?1 and firstname != ?2</code> &#8594; <code>{'amount': {'$gt': ?1}, 'firstname': {'$ne': ?2}}</code></p>
</li>
<li>
<p><code>lastname like ?1</code> &#8594; <code>{'lastname': {'$regex': ?1}}</code></p>
</li>
<li>
<p><code>lastname is not null</code> &#8594; <code>{'lastname':{'$exists': true}}</code></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon icon-warning">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-triangle" class="svg-inline--fa fa-exclamation-triangle fa-w-18" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><path fill="currentColor" d="M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
PanacheQL refers to the Object parameter name but native queries refer to MongoDB field names.
</td>
</tr>
</table>
</div>
<p class=""><strong>Projection</strong></p>
<p class="">Projection can be done for both PanacheQL and native queries.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import io.quarkus.mongodb.panache.ProjectionFor;

@ProjectionFor(Person.class) <i class="conum" data-value="1"></i><b>(1)</b>
public class PersonName {
    public String name;
}

PanacheQuery&lt;PersonName&gt; shortQuery = Person.find("status ", Status.Alive).project(PersonName.class);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Entity class.</td>
</tr>
</table>
</div>
<p class=""><strong>Testing</strong></p>
<p class="">To mock using active record pattern:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-panache-mock&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Test
public void testPanacheMocking() {
    PanacheMock.mock(Person.class);

    Mockito.when(Person.count()).thenReturn(23l);
    Assertions.assertEquals(23, Person.count());
    PanacheMock.verify(Person.class, Mockito.times(1)).count();
}</code></pre>
</div>
</div>
<p class=""><strong>DAO pattern</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class PersonRepository
    implements PanacheMongoRepository&lt;Person&gt; {
}</code></pre>
</div>
</div>
<p class=""><strong>Jandex</strong></p>
<p class="">If entities are defined in external JAR, you need to enable in these projects the <code>Jandex</code> plugin in project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
    &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.3&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-index&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;jandex&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss&lt;/groupId&gt;
            &lt;artifactId&gt;jandex&lt;/artifactId&gt;
            &lt;version&gt;2.1.1.Final&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<p class="">Panache includes an annotation processor that enhance your entities.
If you disable annotation processors you might need to create a marker file on Panache archives at <code>META-INF/panache-archive.marker</code> manually.</p>
<p class=""><strong>Reactive Panache</strong></p>
<p class="">MongoDB with Panache allows using reactive implementation too by using <code>ReactivePanacheMongoEntity</code> or <code>ReactivePanacheMongoEntityBase</code> or <code>ReactivePanacheMongoRepository</code> or <code>ReactivePanacheMongoRepositoryBase</code> depending on your style.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class ReactivePerson extends ReactivePanacheMongoEntity {
    public String name;
}

CompletionStage&lt;Void&gt; cs1 = person.persist();
CompletionStage&lt;List&lt;ReactivePerson&gt;&gt; allPersons = ReactivePerson.listAll();
Publisher&lt;ReactivePerson&gt; allPersons = ReactivePerson.streamAll();

Uni&lt;List&lt;PersonName&gt;&gt; persons = ReactivePersonEntity.find("lastname", name).project(PersonName.class).list();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mongodb_rest_data_panache"><a class="anchor" href="#_mongodb_rest_data_panache"></a><a class="link" href="#_mongodb_rest_data_panache">MongoDB REST Data Panache</a></h2>
<div class="sectionbody">
<p class="">MongoDB REST Data with Panache extension can generate the basic CRUD endpoints for your entities and repositories.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="mongodb-rest-data-panache"</code></pre>
</div>
</div>
<p class="">You also need to add the JDBC driver extension and a JSON Marshaller (ie <code>resteasy-jackson</code>).</p>
<p class="">Then you can define interfaces for defining endpoints:</p>
<p class="">In case of Active Record pattern:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface DeveloperResource extends PanacheMongoEntityResource&lt;Developer, Long&gt; {
}</code></pre>
</div>
</div>
<p class="">In case of Repository:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface DeveloperResource extends PanacheMongoRepositoryResource&lt;DeveloperRepository, Developer, Long&gt; {
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cassandra"><a class="anchor" href="#_cassandra"></a><a class="link" href="#_cassandra">Cassandra</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with Cassandra and DataStax Object Mapper.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
  &lt;groupId&gt;com.datastax.oss.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;cassandra-quarkus-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">Enities and DAOs are generated as you have been doing with DataStax Object Mapper.</p>
<p class="">You need to create a DaoProducer:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
public FruitDaoProducer(QuarkusCqlSession session) {
  FruitMapper mapper = new FruitMapperBuilder(session).build();
  fruitDao = mapper.fruitDao();
}

@Produces
@ApplicationScoped
FruitDao produceFruitDao() {
  return fruitDao;
}</code></pre>
</div>
</div>
<p class="">Cassandra configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.cassandra.contact-points=127.0.0.1:9042
quarkus.cassandra.local-datacenter=datacenter1
quarkus.cassandra.keyspace=k1
quarkus.cassandra.auth.username=john
quarkus.cassandra.auth.password=s3cr3t</code></pre>
</div>
</div>
<p class="">You can configure other Cassandra Java driver settings using <code>application.conf</code> or <code>application.json</code> files. They need to be located in the classpath of your application.
<a href="https://docs.datastax.com/en/developer/java-driver/latest/manual/core/configuration/reference/">Driver settings reference</a>.</p>
<p class="">If MicroProfile Metrics extension is registered, the Cassandra extension can provide (if enabled) metrics about the session:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.cassandra.metrics.enabled=true
quarkus.cassandra.metrics.session-enabled=connected-nodes,bytes-sent
quarkus.cassandra.metrics.node-enabled=pool.open-connections</code></pre>
</div>
</div>
<p class=""><strong>Reactive</strong></p>
<p class="">You can also use Mutiny to define a reactive DAO:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Dao
public interface FruitDaoReactive {

  @Update
  Uni&lt;Void&gt; update(Fruit fruit);

  @Select
  MutinyMappedReactiveResultSet&lt;Fruit&gt; findById(String storeId);
}

@Mapper
public interface FruitMapper {

  @DaoFactory
  FruitDaoReactive fruitDaoReactive();
}</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_programming"><a class="anchor" href="#_reactive_programming"></a><a class="link" href="#_reactive_programming">Reactive Programming</a></h2>
<div class="sectionbody">
<p class="">Quarkus implements <a href="https://github.com/eclipse/microprofile-reactive-streams-operators" target="_blank" rel="noopener">MicroProfile Reactive spec</a> and uses RXJava2 to provide reactive programming model.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-smallrye-reactive-streams-operators"</code></pre>
</div>
</div>
<p class="">Asynchronous HTTP endpoint is implemented by returning Java <code>CompletionStage</code>.
You can create this class either manually or using MicroProfile Reactive Streams spec:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@Path("/reactive")
@Produces(MediaType.TEXT_PLAIN)
public CompletionStage&lt;String&gt; getHello() {
    return ReactiveStreams.of("h", "e", "l", "l", "o")
    .map(String::toUpperCase)
    .toList()
    .run()
    .thenApply(list -&gt; list.toString());
}</code></pre>
</div>
</div>
<p class="">Creating streams is also easy, you just need to return <code>Publisher</code> object.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@Path("/stream")
@Produces(MediaType.SERVER_SENT_EVENTS)
public Publisher&lt;String&gt; publishers() {
        return Flowable
        .interval(500, TimeUnit.MILLISECONDS)
        .map(s -&gt; atomicInteger.getAndIncrement())
        .map(i -&gt; Integer.toString(i));
}</code></pre>
</div>
</div>
<p class=""><strong>Mutiny and JAX-RS</strong></p>
<p class="">Apart from the <code>CompletionStage</code> support, there is also support for Mutiny.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-mutiny"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@Produces(MediaType.TEXT_PLAIN)
public Uni&lt;String&gt; hello() {
    return Uni.createFrom().item(() -&gt; "hello");
}

@GET
@Produces(MediaType.TEXT_PLAIN)
public Multi&lt;String&gt; multi() {
    return Multi.createFrom().items("hello", "world");
}</code></pre>
</div>
</div>
<p class=""><strong>Mutiny</strong></p>
<p class="">Quarkus integrates with <a href="https://github.com/smallrye/smallrye-mutiny">Mutiny</a> as reactive programming library:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="mutiny"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public static class ReactiveHello {

    public Uni&lt;String&gt; greeting() {
        return Uni.createFrom().item(() -&gt; "hello")
                .emitOn(Infrastructure.getDefaultExecutor());
    }

    public Multi&lt;String&gt; stream() {
        return Multi.createFrom().items("hello", "world")
                .emitOn(Infrastructure.getDefaultExecutor());
    }
}</code></pre>
</div>
</div>
<p class="">Converting from/to <code>RxJava2</code> or <code>Reactor</code> APIs:</p>
<p class=""><em>RxJava 2</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.smallrye.reactive&lt;/groupId&gt;
    &lt;artifactId&gt;mutiny-rxjava&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">From <code>RxJava2</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Uni&lt;Void&gt; uniFromCompletable = Uni.createFrom()
                                    .converter(UniRxConverters.fromCompletable(), completable);
Uni&lt;String&gt; uniFromSingle = Uni.createFrom()
                                .converter(UniRxConverters.fromSingle(), single);
Uni&lt;String&gt; uniFromObservable = Uni.createFrom()
                                .converter(UniRxConverters.fromObservable(), observable);
Uni&lt;String&gt; uniFromFlowable = Uni.createFrom()
                                .converter(UniRxConverters.fromFlowable(), flowable);
...

Multi&lt;Void&gt; multiFromCompletable = Multi.createFrom()
                                        .converter(MultiRxConverters.fromCompletable(), completable);
Multi&lt;String&gt; multiFromObservable = Multi.createFrom()
                                        .converter(MultiRxConverters.fromObservable(), observable);
Multi&lt;String&gt; multiFromFlowable = Multi.createFrom()
                                        .converter(MultiRxConverters.fromFlowable(), flowable);
...</code></pre>
</div>
</div>
<p class="">To <code>RxJava2</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Completable completable = uni.convert().with(UniRxConverters.toCompletable());
Single&lt;Optional&lt;String&gt;&gt; single = uni.convert().with(UniRxConverters.toSingle());
Observable&lt;String&gt; observable = uni.convert().with(UniRxConverters.toObservable());
Flowable&lt;String&gt; flowable = uni.convert().with(UniRxConverters.toFlowable());
...

Completable completable = multi.convert().with(MultiRxConverters.toCompletable());
Single&lt;Optional&lt;String&gt;&gt; single = multi.convert().with(MultiRxConverters.toSingle());
Observable&lt;String&gt; observable = multi.convert().with(MultiRxConverters.toObservable());
Flowable&lt;String&gt; flowable = multi.convert().with(MultiRxConverters.toFlowable());
...</code></pre>
</div>
</div>
<p class=""><em>Reactor API</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.smallrye.reactive&lt;/groupId&gt;
    &lt;artifactId&gt;mutiny-reactor&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">From <code>Reactor</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Uni&lt;String&gt; uniFromMono = Uni.createFrom().converter(UniReactorConverters.fromMono(), mono);
Uni&lt;String&gt; uniFromFlux = Uni.createFrom().converter(UniReactorConverters.fromFlux(), flux);
Multi&lt;String&gt; multiFromMono = Multi.createFrom().converter(MultiReactorConverters.fromMono(), mono);
Multi&lt;String&gt; multiFromFlux = Multi.createFrom().converter(MultiReactorConverters.fromFlux(), flux);</code></pre>
</div>
</div>
<p class="">To <code>Reactor</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Mono&lt;String&gt; mono = uni.convert().with(UniReactorConverters.toMono());
Flux&lt;String&gt; flux = uni.convert().with(UniReactorConverters.toFlux());

Mono&lt;String&gt; mono2 = multi.convert().with(MultiReactorConverters.toMono());
Flux&lt;String&gt; flux2 = multi.convert().with(MultiReactorConverters.toFlux());</code></pre>
</div>
</div>
<p class=""><em>CompletionStages</em> or <em>Publisher</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">CompletableFuture&lt;String&gt; future = Uni
        .createFrom().completionStage(CompletableFuture.supplyAsync(() -&gt; "hello"));

CompletationStage&lt;String&gt; cs = Uni
        .createFrom().subscribeAsCompletionStage();</code></pre>
</div>
</div>
<p class=""><code>Multi</code> implements <code>Publisher</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_resteasy_reactive"><a class="anchor" href="#_resteasy_reactive"></a><a class="link" href="#_resteasy_reactive">RESTEasy Reactive</a></h2>
<div class="sectionbody">
<p class="">RESTEasy Reactive is a new implementation of JAX-RS but fully reactive.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="quarkus-resteasy-reactive"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package org.acme.rest;
import javax.ws.rs.GET;
import javax.ws.rs.Path;
@Path("rest")
public class Endpoint {

    @Path("hello")
    @GET
    public String hello(){
        // executed in event-loop
        return "Hello, World!";
    }

    @GET
    public Uni&lt;Book&gt; culinaryGuide(){
        // executed in event-loop but not blocking
        return Book.findByIsbn("978-2081229297");
    }

    @io.smallrye.common.annotation.Blocking
    @GET
    public String blockingHello() throws InterruptedException {
        // executed in worker-thread
        return "Yaaaawwwwnnnnnn…";
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_messaging"><a class="anchor" href="#_reactive_messaging"></a><a class="link" href="#_reactive_messaging">Reactive Messaging</a></h2>
<div class="sectionbody">
<p class="">Quarkus relies on MicroProfile <a href="https://github.com/eclipse/microprofile-reactive-messaging" target="_blank" rel="noopener">Reactive Messaging spec</a> to implement reactive messaging streams.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
        io.quarkus:quarkus-smallrye-reactive-messaging"</code></pre>
</div>
</div>
<p class="">You can just start using in-memory streams by using <code>@Incoming</code> to produce data and <code>@Outgoing</code> to consume data.</p>
<p class="">Produce every 5 seconds one piece of data.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ProducerData {

    @Outgoing("my-in-memory")
    public Flowable&lt;Integer&gt; generate() {
        return Flowable.interval(5, TimeUnit.SECONDS)
                .map(tick -&gt; random.nextInt(100));
    }
}</code></pre>
</div>
</div>
<p class="">or in Mutiny:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ProducerData {
    @Outgoing("my-in-memory")
    public Multi&lt;Integer&gt; generate() {
        return Multi.createFrom().ticks().every(Duration.ofSeconds(5))
                .onItem().apply(n -&gt; random.nextInt(100));
    }
}</code></pre>
</div>
</div>
<p class="">If you want to dispatch to all subscribers you can annotate the method with <code>@Broadcast</code>.</p>
<p class="">Consumes generated data from <code>my-in-memory</code> stream.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ConsumerData {
    @Incoming("my-in-memory")
    public void randomNumber(int randomNumber) {
        System.out.println("Received " + randomNumber);
    }
}</code></pre>
</div>
</div>
<p class="">You can also inject an stream as a field:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Stream("my-in-memory") Publisher&lt;Integer&gt; randomRumbers;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream("generated-price")
Emitter&lt;String&gt; emitter;</code></pre>
</div>
</div>
<p class=""><strong>Patterns</strong></p>
<p class=""><em>REST API &#8594; Message</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(“in”)
Emitter&lt;String&gt; emitter;

emitter.send(message);</code></pre>
</div>
</div>
<p class=""><em>Message &#8594; Message</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Incoming(“in”)
@Outgoing(“out”)
public String process(String in) {
}</code></pre>
</div>
</div>
<p class=""><em>Message &#8594; SSE</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(“out”)
Publisher&lt;String&gt; result;

@GET
@Produces(SERVER_SENT_EVENTS)
public Publisher&lt;String&gt; stream() {
    return result;
}</code></pre>
</div>
</div>
<p class=""><em>Message &#8594; Business Logic</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ReceiverMessages {
    @Incoming("prices")
    public void print(String price) {
    }
}</code></pre>
</div>
</div>
<p class="">To indicate that the method should be executed on a worker pool you can use <code>@Blocking</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Outgoing("Y")
@Incoming("X")
@Blocking</code></pre>
</div>
</div>
<p class="">To customize:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Blocking(value="my-custom-pool", ordered = false)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">smallrye.messaging.worker.my-custom-pool.max-concurrency=3</code></pre>
</div>
</div>
<p class="">Possible implementations are:</p>
<p class=""><strong>In-Memory</strong></p>
<p class="">If the stream is not configured then it is assumed to be an in-memory stream, if not then stream type is defined by <code>connector</code> field.</p>
<p class=""><strong>Kafka</strong></p>
<p class="">To integrate with Kafka you need to add next extensions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
    io.quarkus:quarkus-smallrye-reactive-messaging-kafka"</code></pre>
</div>
</div>
<p class="">Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
<p class="">Kafka configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
<p class="">The <code>connector</code> type is <code>smallrye-kafka</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.generated-price.connector=
    smallrye-kafka
mp.messaging.outgoing.generated-price.topic=
    prices
mp.messaging.outgoing.generated-price.bootstrap.servers=
    localhost:9092
mp.messaging.outgoing.generated-price.value.serializer=
    org.apache.kafka.common.serialization.IntegerSerializer

mp.messaging.incoming.prices.connector=
    smallrye-kafka
mp.messaging.incoming.prices.value.deserializer=
    org.apache.kafka.common.serialization.IntegerDeserializer</code></pre>
</div>
</div>
<p class="">A complete list of supported properties are in Kafka site. For the <a href="https://kafka.apache.org/documentation/#producerconfigs" target="_blank" rel="noopener">producer</a> and for <a href="https://kafka.apache.org/documentation/#consumerconfigs" target="_blank" rel="noopener">consumer</a></p>
<p class=""><em>JSON-B Serializer/Deserializer</em></p>
<p class="">You can use JSON-B to serialize/deserialize objects.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kafka-client"</code></pre>
</div>
</div>
<p class="">To serialize you can use <code>io.quarkus.kafka.client.serialization.JsonbSerializer</code>.</p>
<p class="">To deserialize you need to extend <code>io.quarkus.kafka.client.serialization.JsonbDeserializer</code> and provide a type.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class BeerDeserializer
    extends JsonbDeserializer&lt;Beer&gt; {

    public BeerDeserializer() {
        super(Beer.class);
    }

}</code></pre>
</div>
</div>
<p class=""><strong>AMQP</strong></p>
<p class="">To integrate with AMQP you need to add next extensions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="reactive-messaging-amqp"</code></pre>
</div>
</div>
<p class="">Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
<p class="">AMQP configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.
Special properties <code>amqp-username</code> and <code>amqp-password</code> are used to configure AMQP broker credentials.</p>
<p class="">The connector type is <code>smallrye-amqp</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">amqp-username=quarkus
amqp-password=quarkus
# write
mp.messaging.outgoing.generated-price.connector=
    smallrye-amqp
mp.messaging.outgoing.generated-price.address=
    prices
mp.messaging.outgoing.generated-price.durable=
    true
# read
mp.messaging.incoming.prices.connector=
    smallrye-amqp
mp.messaging.incoming.prices.durable=
    true</code></pre>
</div>
</div>
<p class="">A complete list of supported properties for <a href="https://smallrye.io/smallrye-reactive-messaging/#_interacting_using_amqp" target="_blank" rel="noopener">AMQP</a>.</p>
<p class=""><strong>MQTT</strong></p>
<p class="">To integrate with MQTT you need to add next extensions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="vertx, smallrye-reactive-streams-operators
        smallrye-reactive-messaging"</code></pre>
</div>
</div>
<p class="">And add <code>io.smallrye.reactive:smallrye-reactive-messaging-mqtt-1.0:0.0.10</code> dependency in your build tool.</p>
<p class="">Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
<p class="">MQTT configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
<p class="">The connector type is <code>smallrye-mqtt</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.topic-price.type=
    smallrye-mqtt
mp.messaging.outgoing.topic-price.topic=
    prices
mp.messaging.outgoing.topic-price.host=
    localhost
mp.messaging.outgoing.topic-price.port=
    1883
mp.messaging.outgoing.topic-price.auto-generated-client-id=
    true

mp.messaging.incoming.prices.type=
    smallrye-mqtt
mp.messaging.incoming.prices.topic=
    prices
mp.messaging.incoming.prices.host=
    localhost
mp.messaging.incoming.prices.port=
    1883
mp.messaging.incoming.prices.auto-generated-client-id=
    true</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_kafka_streams"><a class="anchor" href="#_kafka_streams"></a><a class="link" href="#_kafka_streams">Kafka Streams</a></h2>
<div class="sectionbody">
<p class="">Create streaming queries with the Kafka Streams API.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="kafka-streams"</code></pre>
</div>
</div>
<p class="">All we need to do for that is to declare a CDI producer method which returns the Kafka Streams <code>org.apache.kafka.streams.Topology</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class TopologyProducer {
    @Produces
    public Topology buildTopology() {
        org.apache.kafka.streams.StreamsBuilder.StreamsBuilder
            builder = new StreamsBuilder();
        // ...
        builder.stream()
            .join()
            // ...
            .toStream()
            .to();
        return builder.build();
    }
}</code></pre>
</div>
</div>
<p class="">Previous example produces content to another stream.
If you want to write interactive queries, you can use Kafka streams.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KafkaStreams streams;

return streams
        .store("stream", QueryableStoreTypes.keyValueStore());</code></pre>
</div>
</div>
<p class="">The Kafka Streams extension is configured via the Quarkus configuration file <code>application.properties</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kafka-streams.bootstrap-servers=localhost:9092
quarkus.kafka-streams.application-id=temperature-aggregator
quarkus.kafka-streams.application-server=${hostname}:8080
quarkus.kafka-streams.topics=weather-stations,temperature-values

kafka-streams.cache.max.bytes.buffering=10240
kafka-streams.commit.interval.ms=1000</code></pre>
</div>
</div>
<p class=""><strong>IMPORTANT:</strong> All the properties within the <code>kafka-streams</code> namespace are passed through as-is to the Kafka Streams engine. Changing their values requires a rebuild of the application.</p>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_datasource_properties"><a class="anchor" href="#_reactive_datasource_properties"></a><a class="link" href="#_reactive_datasource_properties">Reactive DataSource Properties</a></h2>
<div class="sectionbody">
<p class="">Common Reeactive DataSource Client configuration properties prefixed with <code>quarkus.datasource</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>reactive.cache-prepared-statements</code></dt>
<dd>
<p>Prepared statements should be cached on the client side. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>reactive.url</code></dt>
<dd>
<p>The datasource URL.</p>
</dd>
<dt class="hdlist1"><code>reactive.max-size</code></dt>
<dd>
<p>The datasource pool maximum size.</p>
</dd>
<dt class="hdlist1"><code>reactive.trust-all</code></dt>
<dd>
<p>All server certificates should be trusted. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>reactive.trust-certificate-pem</code></dt>
<dd>
<p>Trust configuration in the PEM format.</p>
</dd>
<dt class="hdlist1"><code>reactive.trust-certificate-jks</code></dt>
<dd>
<p>Trust configuration in the JKS format.</p>
</dd>
<dt class="hdlist1"><code>reactive.trust-certificate-pfx</code></dt>
<dd>
<p>Trust configuration in the PFX format.</p>
</dd>
<dt class="hdlist1"><code>reactive.key-certificate-pem</code></dt>
<dd>
<p>Key/cert configuration in the PEM format.</p>
</dd>
<dt class="hdlist1"><code>reactive.key-certificate-jks</code></dt>
<dd>
<p>Key/cert configuration in the JKS format.</p>
</dd>
<dt class="hdlist1"><code>reactive.key-certificate-pfx</code></dt>
<dd>
<p>Key/cert configuration in the PFX format.</p>
</dd>
<dt class="hdlist1"><code>reactive.thread-local</code></dt>
<dd>
<p>Use one connection pool per thread.</p>
</dd>
<dt class="hdlist1"><code>reactive.reconnect-attempts</code></dt>
<dd>
<p>The number of reconnection attempts when a pooled connection cannot be established on first try. (default: <code>0</code>)</p>
</dd>
<dt class="hdlist1"><code>reactive.reconnect-interval</code></dt>
<dd>
<p>The interval between reconnection attempts when a pooled connection cannot be established on first try. (default: <code>PT1S</code>)</p>
</dd>
<dt class="hdlist1"><code>reactive.idle-timeout</code></dt>
<dd>
<p>The maximum time without data written to or read from a connection before it is removed from the pool.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_postgresql_client"><a class="anchor" href="#_reactive_postgresql_client"></a><a class="link" href="#_reactive_postgresql_client">Reactive PostgreSQL Client</a></h2>
<div class="sectionbody">
<p class="">You can use Reactive PostgreSQL to execute queries to PostreSQL database in a reactive way, instead of using JDBC way.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-pg-client"</code></pre>
</div>
</div>
<p class="">Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.db-kind=postgresql
quarkus.datasource.reactive.url=postgresql:///your_database</code></pre>
</div>
</div>
<p class="">Then you can inject <code>io.vertx.mutiny.pgclient.PgPool</code> class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
PgPool client;

Uni&lt;List&lt;Fruit&gt;&gt; fruits =
    client.preparedQuery("SELECT * FROM fruits")
    .onItem().apply(rowSet -&gt; {
        JsonArray jsonArray = new JsonArray();
        for (Row row : rowSet) {
            jsonArray.add(from(row));
        }
        return jsonArray;
    })</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_mysql_client"><a class="anchor" href="#_reactive_mysql_client"></a><a class="link" href="#_reactive_mysql_client">Reactive MySQL Client</a></h2>
<div class="sectionbody">
<p class="">You can use Reactive MySQL to execute queries to MySQL database in a reactive way, instead of using JDBC.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-mysql-client"</code></pre>
</div>
</div>
<p class="">Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.db-kind=mysql
quarkus.datasource.reactive.url=mysql:///your_database</code></pre>
</div>
</div>
<p class="">Then you can inject <code>io.vertx.mutiny.mysqlclient.MySQLPool</code> class.</p>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_db2_client"><a class="anchor" href="#_reactive_db2_client"></a><a class="link" href="#_reactive_db2_client">Reactive DB2 Client</a></h2>
<div class="sectionbody">
<p class="">You can use Reactive DB2 to execute queries to DB2 database in a reactive way, instead of using JDBC.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-db2-client"</code></pre>
</div>
</div>
<p class="">Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.db-kind=db2
quarkus.datasource.reactive.url=vertx-reactive:db2://localhost:50005/hreact</code></pre>
</div>
</div>
<p class="">Then you can inject <code>io.vertx.mutiny.db2client.DB2Pool</code> class.</p>
</div>
</div>
<div class="sect1">
<h2 id="_reactive_transactions"><a class="anchor" href="#_reactive_transactions"></a><a class="link" href="#_reactive_transactions">Reactive Transactions</a></h2>
<div class="sectionbody">
<p class=""><code>io.vertx.mutiny.sqlclient.SqlClientHelper</code> is an util class that allows you to run reactive persisten code within a transaction.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Uni&lt;Void&gt; r = SqlClientHelper.inTransactionUni(client, tx -&gt; {
        Uni&lt;RowSet&lt;Row&gt;&gt; insertOne = tx.preparedQuery("INSERT INTO fruits (name) VALUES ($1) RETURNING (id)")
                .execute(Tuple.of(fruit1.name));
});</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_activemq_artemis"><a class="anchor" href="#_activemq_artemis"></a><a class="link" href="#_activemq_artemis">ActiveMQ Artemis</a></h2>
<div class="sectionbody">
<p class="">Quarkus uses <a href="#_reactive_messaging">Reactive Messaging</a> to integrate with messaging systems, but in case you need deeper control when using <a href="https://activemq.apache.org/components/artemis/" target="_blank" rel="noopener">Apache ActiveMQ Artemis</a> there is also an extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-artemis-core"</code></pre>
</div>
</div>
<p class="">And then you can inject <code>org.apache.activemq.artemis.api.core.client.ServerLocator</code> instance.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ArtemisConsumerManager {

    @Inject
    ServerLocator serverLocator;

    private ClientSessionFactory connection;

    @PostConstruct
    public void init() throws Exception {
        connection = serverLocator.createSessionFactory();
    }
}</code></pre>
</div>
</div>
<p class="">And configure <code>ServerLocator</code> in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.artemis.url=tcp://localhost:61616</code></pre>
</div>
</div>
<p class="">You can configure ActiveMQ Artemis in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>artemis.url</code></dt>
<dd>
<p>Connection URL.</p>
</dd>
<dt class="hdlist1"><code>artemis.username</code></dt>
<dd>
<p>Username for authentication.</p>
</dd>
<dt class="hdlist1"><code>artemis.password</code></dt>
<dd>
<p>Password for authentication.</p>
</dd>
</dl>
</div>
<p class=""><strong>Artemis JMS</strong></p>
<p class="">If you want to use JMS with Artemis, you can do it by using its extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-artemis-jms"</code></pre>
</div>
</div>
<p class="">And then you can inject <code>javax.jms.ConnectionFactory</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ArtemisConsumerManager {

    @Inject
    ConnectionFactory connectionFactory;

    private Connection connection;

    @PostConstruct
    public void init() throws JMSException {
        connection = connectionFactory.createConnection();
        connection.start();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
Configuration options are the same as Artemis core.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vert_x_reactive_clients"><a class="anchor" href="#_vert_x_reactive_clients"></a><a class="link" href="#_vert_x_reactive_clients">Vert.X Reactive Clients</a></h2>
<div class="sectionbody">
<p class="">Vert.X Reactive clients in Quarkus, the next clients are supported and you need to add the dependency to use them:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">Vert.X Mail Client</dt>
<dd>
<p><code>io.smallrye.reactive:smallrye-mutiny-vertx-mail-client</code></p>
</dd>
<dt class="hdlist1">Vert.X MongoDB Client</dt>
<dd>
<p><code>io.smallrye.reactive:smallrye-mutiny-vertx-mongo-client</code></p>
</dd>
<dt class="hdlist1">Vert.X Redis Client</dt>
<dd>
<p><code>io.smallrye.reactive:smallrye-mutiny-vertx-redis-client</code></p>
</dd>
<dt class="hdlist1">Vert.X Cassandra Client</dt>
<dd>
<p><code>io.smallrye.reactive:smallrye-mutiny-vertx-cassandra-client</code></p>
</dd>
<dt class="hdlist1">Vert.X Consul Client</dt>
<dd>
<p><code>io.smallrye.reactive:smallrye-mutiny-vertx-consul-client</code></p>
</dd>
<dt class="hdlist1">Vert.X Kafka Client</dt>
<dd>
<p><code>io.smallrye.reactive:smallrye-mutiny-vertx-kafka-client</code></p>
</dd>
<dt class="hdlist1">Vert.X AMQP Client</dt>
<dd>
<p><code>io.smallrye.reactive:smallrye-mutiny-vertx-amqp-client</code></p>
</dd>
<dt class="hdlist1">Vert.X RabbitMQ Client</dt>
<dd>
<p><code>io.smallrye.reactive:smallrye-mutiny-vertx-rabbitmq-client</code></p>
</dd>
</dl>
</div>
<p class="">Example of Vert.X Web Client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Vertx vertx;

private WebClient client;

@PostConstruct
void initialize() {
    this.client = WebClient.create(vertx, ...);
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_sqs_client"><a class="anchor" href="#_amazon_sqs_client"></a><a class="link" href="#_amazon_sqs_client">Amazon SQS Client</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="amazon-sqs"</code></pre>
</div>
</div>
<p class="">Injecting the client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
software.amazon.awssdk.services.sqs.SqsClient sqs;

SendMessageResponse response = sqs.sendMessage(m -&gt; m.queueUrl(queueUrl).messageBody(message));

List&lt;Message&gt; messages = sqs.receiveMessage(m -&gt; m.maxNumberOfMessages(10).queueUrl(queueUrl)).messages();</code></pre>
</div>
</div>
<p class="">And configure it:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.sqs.endpoint-override=http://localhost:8010
quarkus.sqs.aws.region=us-east-1
quarkus.sqs.aws.credentials.type=static
quarkus.sqs.aws.credentials.static-provider.access-key-id=test-key
quarkus.sqs.aws.credentials.static-provider.secret-access-key=test-secret</code></pre>
</div>
</div>
<p class="">You need to set a HTTP client either <code>URL Connection</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;url-connection-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">or Apache HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;apache-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.sqs.sync-client.type=apache</code></pre>
</div>
</div>
<p class="">You can go async by using Mutiny:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
software.amazon.awssdk.services.sqs.SqsAsyncClient sqs;

Uni.createFrom()
    .completionStage(
        sqs.sendMessage(m -&gt; m.queueUrl(queueUrl).messageBody(message))
    )
    .onItem()...

return Uni.createFrom()
    .completionStage(
        sqs.receiveMessage(m -&gt; m.maxNumberOfMessages(10).queueUrl(queueUrl))
    )
    .onItem()</code></pre>
</div>
</div>
<p class="">And you need to add the asynchronous Netty client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;netty-nio-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">Configuration properties are the same as <a href="#_amazon_dynamodb">Amazon DynamoDB</a> but changing the prefix from <code>dynamodb</code> to <code>sqs</code>.</p>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_tls"><a class="anchor" href="#_tls"></a><a class="link" href="#_tls">TLS</a></h2>
<div class="sectionbody">
<p class="">You can trust all certificates globally by using <code>quarkus.tls.trust-all=true</code></p>
</div>
</div>
<div class="sect1">
<h2 id="_rbac"><a class="anchor" href="#_rbac"></a><a class="link" href="#_rbac">RBAC</a></h2>
<div class="sectionbody">
<p class="">You can set RBAC using annotations or in <code>application.properties</code>.</p>
<p class=""><strong>Annotations</strong></p>
<p class="">You can define roles by using <code>javax.annotation.security.RolesAllowed</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<p class="">You can use <code>io.quarkus.security.Authenticated</code> as a shortcut of <code>@RolesAllowed("*")</code>.</p>
<p class="">To alter RBAC behaviour there are two configuration properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.deny-unannotated=true</code></pre>
</div>
</div>
<p class="">Configuration options:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>quarkus.jaxrs.deny-uncovered</code></dt>
<dd>
<p>If true denies by default to all JAX-RS endpoints. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>quarkus.security.deny-unannotated</code></dt>
<dd>
<p>If true denies by default all CDI methods and JAX-RS endpoints. (default: <code>false</code>)</p>
</dd>
</dl>
</div>
<p class="">By default in Quarkus, if an incoming request has a credential the request will always be authenticated (even if the target page does not require authentication).</p>
<p class="">You can change this behaviour by setting <code>quarkus.http.auth.proactive</code> property to <code>false</code>.</p>
<p class=""><strong>File Configuration</strong></p>
<p class="">Defining RBAC in <code>application.properties</code> instead of using annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.auth.policy.role-policy1.roles-allowed=
    user,admin
quarkus.http.auth.permission.roles1.paths=
    /roles-secured/*,/other/*,/api/*
quarkus.http.auth.permission.roles1.policy=
    role-policy1

quarkus.http.auth.permission.permit1.paths=
    /public/*
quarkus.http.auth.permission.permit1.policy=
    permit
quarkus.http.auth.permission.permit1.methods=
    GET

quarkus.http.auth.permission.deny1.paths=
    /forbidden
quarkus.http.auth.permission.deny1.policy=
    deny</code></pre>
</div>
</div>
<p class="">You need to provide permissions set by using the <code>roles-allowed</code> property or use the built-in ones <code>deny</code>, <code>permit</code> or <code>authenticated</code>.</p>
<p class="">You can use <code>enabled</code> property (ie <code>quarkus.http.auth.permission.permit1.enabled</code>) to enable the entire permission set.</p>
<p class=""><strong>Testing</strong></p>
<p class="">Quarkus provides explicit support for testing with different users, and with the security subsystem disabled.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-test-security&lt;/artifactId&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Test
@TestSecurity(authorizationEnabled = false)
void someTestMethod() {
...
}

@Test
@TestSecurity(user = "testUser", roles = {"admin", "user"})
void someTestMethod() {
...
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bouncycastle"><a class="anchor" href="#_bouncycastle"></a><a class="link" href="#_bouncycastle">BouncyCastle</a></h2>
<div class="sectionbody">
<p class="">Quarkus supports BouncyCastle, you only need to add the BouncyCastle dependency and configure the security provider:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.security-providers=BC
quarkus.security.security-providers=BCJSSE
quarkus.security.security-providers=BCFIPS
quarkus.security.security-providers=BCFIPSJSSE</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jwt"><a class="anchor" href="#_jwt"></a><a class="link" href="#_jwt">JWT</a></h2>
<div class="sectionbody">
<p class="">Quarkus implements <a href="https://github.com/eclipse/microprofile-jwt-auth" target="_blank" rel="noopener">MicroProfile JWT RBAC spec</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="io.quarkus:quarkus-smallrye-jwt"</code></pre>
</div>
</div>
<p class="">Minimum JWT required claims: <code>typ</code>, <code>alg</code>, <code>kid</code>, <code>iss</code>, <code>sub</code>, <code>exp</code>, <code>iat</code>, <code>jti</code>, <code>upn</code>, <code>groups</code>.</p>
<p class="">You can inject token by using <code>JsonWebToken</code> or a claim individually by using <code>@Claim</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
JsonWebToken jwt;

@Inject
@Claim(standard = Claims.preferred_username)
String name;

@Inject
@Claim("groups")
Set&lt;String&gt; groups;

@Inject
JWTParser parser;</code></pre>
</div>
</div>
<p class="">Set of supported types: <code>String</code>, <code>Set&lt;String&gt;</code>, <code>Long</code>, <code>Boolean, `javax.json.JsonValue</code>, <code>Optional</code>, <code>org.eclipse.microprofile.jwt.ClaimValue</code>.</p>
<p class="">And configuration in <code>src/main/resources/application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.jwt.verify.publickey.location=
    META-INF/resources/publicKey.pem
mp.jwt.verify.issuer=
    https://quarkus.io/using-jwt-rbac</code></pre>
</div>
</div>
<p class="">Configuration options:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>mp.jwt.verify.publickey</code></dt>
<dd>
<p>Public Key text itself to be supplied as a string.</p>
</dd>
</dl>
</div>
<p class=""><code>mp.jwt.verify.publickey.location</code>
Relative path or URL of a public key.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>mp.jwt.verify.issuer</code></dt>
<dd>
<p><code>iss</code> accepted as valid.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>smallrye.jwt.token.header</code></dt>
<dd>
<p>Sets header such as <code>Cookie</code> is used to pass the token. (default: <code>Authorization</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.cookie</code></dt>
<dd>
<p>Name of the cookie containing a token.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.schemes</code></dt>
<dd>
<p>Comma-separated list containing an alternative single or multiple schemes. (default: <code>Bearer</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.require.named-principal</code></dt>
<dd>
<p>A token must have a upn or preferred_username or sub claim set if using <code>java.security.Principal</code>. <code>True</code> makes throw an exception if not set. (default: <code>false</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.sub</code></dt>
<dd>
<p>Path to the claim with subject name.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.claims.sub</code></dt>
<dd>
<p>Default sub claim value.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.groups</code></dt>
<dd>
<p>Path to the claim containing the groups.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.groups-separator</code></dt>
<dd>
<p>Separator for splitting a string which may contain multiple group values. (default. ` `).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.claims.groups</code></dt>
<dd>
<p>Default groups claim value.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.jwks.refresh-interval</code></dt>
<dd>
<p>JWK cache refresh interval in minutes. (default: <code>60</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.expiration.grace</code></dt>
<dd>
<p>Expiration grace in seconds. (default: <code>60</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.verify.aud</code></dt>
<dd>
<p>Comma separated list of the audiences that a token aud claim may contain.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>smallrye.jwt.verify.algorithm</code></dt>
<dd>
<p>Signature algorith. (defsult: <code>RS256</code>)</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.kid</code></dt>
<dd>
<p>If set then the verification JWK key as well every JWT token must have a matching <code>kid</code> header.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.time-to-live</code></dt>
<dd>
<p>The maximum number of seconds that a JWT may be issued for use.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>smallrye.jwt.sign.key-location</code></dt>
<dd>
<p>Location of a private key which will be used to sign the claims when either a no-argument <code>sign()</code> or <code>innerSign()</code> method is called.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.encrypt.key-location</code></dt>
<dd>
<p>Location of a public key which will be used to encrypt the claims or inner JWT when a no-argument <code>encrypt()</code> method is called.</p>
</dd>
</dl>
</div>
<p class="">Supported public key formats:</p>
<div class="ulist">
<ul>
<li>
<p>PKCS#8 PEM</p>
</li>
<li>
<p>JWK</p>
</li>
<li>
<p>JWKS</p>
</li>
<li>
<p>JWK Base64 URL</p>
</li>
<li>
<p>JWKS Base64 URL</p>
</li>
</ul>
</div>
<p class="">To send a token to server-side you should use <code>Authorization</code> header: <code>curl -H "Authorization: Bearer eyJraWQiOi&#8230;&#8203;"</code>.</p>
<p class="">To inject claim values, the bean must be <code>@RequestScoped</code> CDI scoped.
If you need to inject claim values in scope with a lifetime greater than <code>@RequestScoped</code> then you need to use <code>javax.enterprise.inject.Instance</code> interface.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Claim(standard = Claims.iat)
private Instance&lt;Long&gt; providerIAT;</code></pre>
</div>
</div>
<p class=""><strong>RBAC</strong></p>
<p class="">JWT <code>groups</code> claim is directly mapped to roles to be used in security annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<p class=""><strong>Generate tokens</strong></p>
<p class="">JWT generation API:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Jwt.claims()
    .issuer("https://server.com")
    .claim("customClaim", 3)
    .sign(createKey());

JwtSignatureBuilder jwtSignatureBuilder = Jwt.claims("/testJsonToken.json").jws();
jwtSignatureBuilder
     .signatureKeyId("some-key-id")
     .signatureAlgorithm(SignatureAlgorithm.ES256)
     .header("custom-header", "custom-value");
     .sign(createKey());

Jwt.claims("/testJsonToken.json")
    .encrypt(createKey());

JwtEncryptionBuilder jwtEncryptionBuilder = Jwt.claims("/testJsonToken.json").jwe();
jwtEncryptionBuilder
     .keyEncryptionKeyId("some-key-id")
      .keyEncryptionAlgorithm(KeyEncryptionAlgorithm.ECDH_ES_A256KW)
     .header("custom-header", "custom-value");
     .encrypt(createKey());

Jwt.claims("/testJsonToken.json")
  .innerSign(createKey());
  .encrypt(createKey());</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openid_connect"><a class="anchor" href="#_openid_connect"></a><a class="link" href="#_openid_connect">OpenId Connect</a></h2>
<div class="sectionbody">
<p class="">Quarkus can use OpenId Connect or OAuth 2.0 authorization servers such as  <a href="https://www.keycloak.org/" target="_blank" rel="noopener">Keycloak</a> to protect resources using bearer token issued by Keycloak server.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="using-openid-connect"</code></pre>
</div>
</div>
<p class="">You can also protect resources with security annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@RolesAllowed("admin")</code></pre>
</div>
</div>
<p class="">Configure application to Keycloak service in <code>application.properties</code> file.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oidc.realm=quarkus
quarkus.oidc.auth-server-url=http://localhost:8180/auth
quarkus.oidc.resource=backend-service
quarkus.oidc.bearer-only=true
quarkus.oidc.credentials.secret=secret</code></pre>
</div>
</div>
<p class="">Configuration options with <code>quarkus.oidc</code> prefix:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enabled</code></dt>
<dd>
<p>The OIDC is enabled. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>tenant-enabled</code></dt>
<dd>
<p>If the tenant configuration is enabled. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>application-type</code></dt>
<dd>
<p>The application type. Possible values: <code>web_app</code>, <code>service</code>. (default: <code>service</code>)</p>
</dd>
<dt class="hdlist1"><code>connection-delay</code></dt>
<dd>
<p>The maximum amount of time the adapter will try connecting.</p>
</dd>
<dt class="hdlist1"><code>auth-server-url</code></dt>
<dd>
<p>The base URL of the OpenID Connect (OIDC) server.</p>
</dd>
<dt class="hdlist1"><code>introspection-path</code></dt>
<dd>
<p>Relative path of the RFC7662 introspection service.</p>
</dd>
<dt class="hdlist1"><code>jwks-path</code></dt>
<dd>
<p>Relative path of the OIDC service returning a JWK set.</p>
</dd>
<dt class="hdlist1"><code>public-key</code></dt>
<dd>
<p>Public key for the local JWT token verification</p>
</dd>
<dt class="hdlist1"><code>client-id</code></dt>
<dd>
<p>The client-id of the application.</p>
</dd>
<dt class="hdlist1"><code>roles.role-claim-path</code></dt>
<dd>
<p>Path to the claim containing an array of groups. (<code>realm/groups</code>)</p>
</dd>
<dt class="hdlist1"><code>roles.role-claim-separator</code></dt>
<dd>
<p>Separator for splitting a string which may contain multiple group values.</p>
</dd>
<dt class="hdlist1"><code>token.issuer</code></dt>
<dd>
<p>Issuer claim value.</p>
</dd>
<dt class="hdlist1"><code>token.audience</code></dt>
<dd>
<p>Audience claim value.</p>
</dd>
<dt class="hdlist1"><code>token.expiration-grace</code></dt>
<dd>
<p>Expiration grace period in seconds.</p>
</dd>
<dt class="hdlist1"><code>token.principal-claim</code></dt>
<dd>
<p>Name of the claim which contains a principal name.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>token.refresh-expired</code></dt>
<dd>
<p>If property is enabled then a refresh token request is performed.</p>
</dd>
<dt class="hdlist1"><code>credentials.secret</code></dt>
<dd>
<p>The client secret</p>
</dd>
<dt class="hdlist1"><code>authentication.redirect-path</code></dt>
<dd>
<p>Relative path for calculating a <code>redirect_uri</code> query parameter.</p>
</dd>
<dt class="hdlist1"><code>authentication.restore-path-after-redirect</code></dt>
<dd>
<p>The original request URI used before the authentication will be restored after the user has been redirected back to the application. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>authentication.scopes</code></dt>
<dd>
<p>List of scopes.</p>
</dd>
<dt class="hdlist1"><code>authentication.extra-params</code></dt>
<dd>
<p>Additional properties which will be added as the query parameters .</p>
</dd>
<dt class="hdlist1"><code>authentication.cookie-path</code></dt>
<dd>
<p>Cookie path parameter.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>proxy.host</code></dt>
<dd>
<p>The host (name or IP address) of the Proxy.</p>
</dd>
<dt class="hdlist1"><code>proxy.port</code></dt>
<dd>
<p>The port number of the Proxy. (default: <code>80</code>)</p>
</dd>
<dt class="hdlist1"><code>proxy.username</code></dt>
<dd>
<p>The username to authenticate.</p>
</dd>
<dt class="hdlist1"><code>proxy.password</code></dt>
<dd>
<p>The password to authenticate.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>end-session-path</code></dt>
<dd>
<p>Relative path of the OIDC <code>end_session_endpoint</code>.</p>
</dd>
<dt class="hdlist1"><code>logout.path</code></dt>
<dd>
<p>The relative path of the logout endpoint at the application.</p>
</dd>
<dt class="hdlist1"><code>logout.post-logout-path</code></dt>
<dd>
<p>Relative path of the application endpoint where the user should be redirected to after logging out.</p>
</dd>
<dt class="hdlist1"><code>tls.verification</code></dt>
<dd>
<p>Sets the TLs verification. Possible values: <code>REQUIRED</code>, <code>NONE</code>. (default: <code>REQUIRED</code>).</p>
</dd>
</dl>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon icon-note">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info-circle" class="svg-inline--fa fa-info-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg>
</td>
<td class="content">
With Keycloak OIDC server <code><a href="https://host:port/auth/realms/{realm}" class="bare">https://host:port/auth/realms/{realm}</a></code> where <code>{realm}</code> has to be replaced by the name of the Keycloak realm.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
You can use <code>quarkus.http.cors</code> property to enable consuming form different domain.
</td>
</tr>
</table>
</div>
<p class=""><strong>Multi-tenancy</strong></p>
<p class="">Multi-tenancy is supported by adding a sub-category to OIDC configuration properties (ie <code>quarkus.oidc.{tenent_id}.property</code>).</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oidc.auth-server-url=http://localhost:8180/auth/realms/quarkus
quarkus.oidc.client-id=multi-tenant-client
quarkus.oidc.application-type=web-app

quarkus.oidc.tenant-b.auth-server-url=https://accounts.google.com
quarkus.oidc.tenant-b.application-type=web-app
quarkus.oidc.tenant-b.client-id=xxxx
quarkus.oidc.tenant-b.credentials.secret=yyyy
quarkus.oidc.tenant-b.token.issuer=https://accounts.google.com
quarkus.oidc.tenant-b.authentication.scopes=email,profile,openid</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_oauth2"><a class="anchor" href="#_oauth2"></a><a class="link" href="#_oauth2">OAuth2</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with OAuth2 to be used in case of opaque tokens (none JWT) and its validation against an introspection endpoint.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="security-oauth2"</code></pre>
</div>
</div>
<p class="">And configuration in <code>src/main/resources/application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oauth2.client-id=client_id
quarkus.oauth2.client-secret=secret
quarkus.oauth2.introspection-url=http://oauth-server/introspect</code></pre>
</div>
</div>
<p class="">And you can map roles to be used in security annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<p class="">Configuration options:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>quarkus.oauth2.enabled</code></dt>
<dd>
<p>Determine if the OAuth2 extension is enabled. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>quarkus.oauth2.client-id</code></dt>
<dd>
<p>The OAuth2 client id used to validate the token.</p>
</dd>
<dt class="hdlist1"><code>quarkus.oauth2.client-secret</code></dt>
<dd>
<p>The OAuth2 client secret used to validate the token.</p>
</dd>
<dt class="hdlist1"><code>quarkus.oauth2.introspection-url</code></dt>
<dd>
<p>URL used to validate the token and gather the authentication claims.</p>
</dd>
<dt class="hdlist1"><code>quarkus.oauth2.role-claim</code></dt>
<dd>
<p>The claim that is used in the endpoint response to load the roles ((default: <code>scope</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authenticating_via_http"><a class="anchor" href="#_authenticating_via_http"></a><a class="link" href="#_authenticating_via_http">Authenticating via HTTP</a></h2>
<div class="sectionbody">
<p class="">HTTP basic auth is enabled by the <code>quarkus.http.auth.basic=true</code> property.</p>
<p class="">HTTP form auth is enabled by the <code>quarkus.http.auth.form.enabled=true</code> property.</p>
<p class="">Then you need to add <code>elytron-security-properties-file</code> or <code>elytron-security-jdbc</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_security_with_properties_file"><a class="anchor" href="#_security_with_properties_file"></a><a class="link" href="#_security_with_properties_file">Security with Properties File</a></h2>
<div class="sectionbody">
<p class="">You can also protect endpoints and store identities (user, roles) in the file system.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-properties-file"</code></pre>
</div>
</div>
<p class="">You need to configure the extension with users and roles files:</p>
<p class="">And configuration in <code>src/main/resources/application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.users.file.enabled=true
quarkus.security.users.file.users=test-users.properties
quarkus.security.users.file.roles=test-roles.properties
quarkus.security.users.file.auth-mechanism=BASIC
quarkus.security.users.file.realm-name=MyRealm
quarkus.security.users.file.plain-text=true</code></pre>
</div>
</div>
<p class="">Then <code>users.properties</code> and <code>roles.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">scott=jb0ss
jdoe=p4ssw0rd</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">scott=Admin,admin,Tester,user
jdoe=NoRolesUser</code></pre>
</div>
</div>
<p class=""><strong>IMPORTANT:</strong>  If <code>plain-text</code> is set to <code>false</code> (or omitted) then passwords must be stored in the form MD5 (<code>username</code>:`realm`:`password`).</p>
<p class="">Elytron File Properties configuration properties.
Prefix <code>quarkus.security.users</code> is skipped.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>file.enabled</code></dt>
<dd>
<p>The file realm is enabled. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.auth-mechanism</code></dt>
<dd>
<p>The authentication mechanism. ( default: <code>BASIC</code>)</p>
</dd>
<dt class="hdlist1"><code>file.realm-name</code></dt>
<dd>
<p>The authentication realm name. (default: <code>Quarkus</code>)</p>
</dd>
<dt class="hdlist1"><code>file.plain-text</code></dt>
<dd>
<p>If passwords are in plain or in MD5. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.users</code></dt>
<dd>
<p>Classpath resource of user/password. (default: <code>users.properties</code>)</p>
</dd>
<dt class="hdlist1"><code>file.roles</code></dt>
<dd>
<p>Classpath resource of user/role. (default: <code>roles.properties</code>)</p>
</dd>
</dl>
</div>
<p class=""><strong>Embedded Realm</strong></p>
<p class="">You can embed user/password/role in the same <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.users.embedded.enabled=true
quarkus.security.users.embedded.plain-text=true
quarkus.security.users.embedded.users.scott=jb0ss
quarkus.security.users.embedded.roles.scott=admin,tester,user
quarkus.security.users.embedded.auth-mechanism=BASIC</code></pre>
</div>
</div>
<p class=""><strong>IMPORTANT:</strong>  If plain-text is set to <code>false</code> (or omitted) then passwords must be stored in the form MD5 (<code>username</code>:`realm`:`password`).</p>
<p class="">Prefix <code>quarkus.security.users.embedded</code> is skipped.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>algorithm</code></dt>
<dd>
<p>Determine which algorithm to use. Possible values: <code>DIGEST_MD5</code>, <code>DIGEST_SHA</code>, <code>DIGEST_SHA_256</code>, <code>DIGEST_SHA_384</code>, <code>DIGEST_SHA_512</code>, <code>DIGEST_SHA_512_256</code>. (default: <code>DIGEST_MD5</code>)</p>
</dd>
<dt class="hdlist1"><code>file.enabled</code></dt>
<dd>
<p>The file realm is enabled. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.auth-mechanism</code></dt>
<dd>
<p>The authentication mechanism. (default: <code>BASIC</code>)</p>
</dd>
<dt class="hdlist1"><code>file.realm-name</code></dt>
<dd>
<p>The authentication realm name. (default: <code>Quarkus</code>)</p>
</dd>
<dt class="hdlist1"><code>file.plain-text</code></dt>
<dd>
<p>If passwords are in plain or in MD5. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.users.*</code></dt>
<dd>
<p><code>*</code> is user and value is password.</p>
</dd>
<dt class="hdlist1"><code>file.roles.*</code></dt>
<dd>
<p><code>*</code> is user and value is role.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_with_a_jdbc_realm"><a class="anchor" href="#_security_with_a_jdbc_realm"></a><a class="link" href="#_security_with_a_jdbc_realm">Security with a JDBC Realm</a></h2>
<div class="sectionbody">
<p class="">You can also protect endpoints and store identities in a database.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-jdbc"</code></pre>
</div>
</div>
<p class="">You still need to add the database driver (ie <code>jdbc-h2</code>).</p>
<p class="">You need to configure JDBC and Elytron JDBC Realm:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.username=sa
quarkus.datasource.password=sa

quarkus.security.jdbc.enabled=true
quarkus.security.jdbc.principal-query.sql=
    SELECT u.password, u.role FROM test_user u WHERE u.user=?
quarkus.security.jdbc.principal-query
    .clear-password-mapper.enabled=true
quarkus.security.jdbc.principal-query
    .clear-password-mapper.password-index=1
quarkus.security.jdbc.principal-query
    .attribute-mappings.0.index=2
quarkus.security.jdbc.principal-query
    .attribute-mappings.0.to=groups</code></pre>
</div>
</div>
<p class="">You need to set the index (1-based) of password and role.</p>
<p class="">Elytron JDBC Realm configuration properties.
Prefix <code>quarkus.security.jdbc</code> is skipped.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>auth-mechanism</code></dt>
<dd>
<p>The authentication mechanism. (default: <code>BASIC</code>)</p>
</dd>
<dt class="hdlist1"><code>realm-name</code></dt>
<dd>
<p>The authentication realm name. (default: <code>Quarkus</code>)</p>
</dd>
<dt class="hdlist1"><code>enabled</code></dt>
<dd>
<p>If the properties store is enabled. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>principal-query.sql</code></dt>
<dd>
<p>The sql query to find the password.</p>
</dd>
<dt class="hdlist1"><code>principal-query.datasource</code></dt>
<dd>
<p>The data source to use.</p>
</dd>
<dt class="hdlist1"><code>principal-query.clear-password-mapper.enabled</code></dt>
<dd>
<p>If the clear-password-mapper is enabled. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>principal-query.clear-password-mapper.password-index</code></dt>
<dd>
<p>The index of column containing clear password. (default: <code>1</code>)</p>
</dd>
<dt class="hdlist1"><code>principal-query.bcrypt-password-mapper.enabled</code></dt>
<dd>
<p>If the bcrypt-password-mapper is enabled. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>principal-query.bcrypt-password-mapper.password-index</code></dt>
<dd>
<p>The index of column containing password hash. (default: <code>0</code>)</p>
</dd>
<dt class="hdlist1"><code>principal-query.bcrypt-password-mapper.hash-encoding</code></dt>
<dd>
<p>A string referencing the password hash encoding (<code>BASE64</code> or <code>HEX</code>). (default: <code>BASE64</code>)</p>
</dd>
</dl>
</div>
<div class="page-break"></div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>principal-query.bcrypt-password-mapper.salt-index</code></dt>
<dd>
<p>The index column containing the Bcrypt salt. (default: <code>0</code>)</p>
</dd>
<dt class="hdlist1"><code>principal-query.bcrypt-password-mapper.salt-encoding</code></dt>
<dd>
<p>A string referencing the salt encoding (<code>BASE64</code> or <code>HEX</code>). (default: <code>BASE64</code>)</p>
</dd>
<dt class="hdlist1"><code>principal-query.bcrypt-password-mapper.iteration-count-index</code></dt>
<dd>
<p>The index column containing the Bcrypt iteration count. (default: <code>0</code>)</p>
</dd>
</dl>
</div>
<p class="">For multiple datasources you can use the datasource name in the properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
quarkus.security.jdbc.principal-query.sql=

quarkus.datasource.permissions.url=
quarkus.security.jdbc.principal-query.permissions.sql=</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_with_jpa"><a class="anchor" href="#_security_with_jpa"></a><a class="link" href="#_security_with_jpa">Security with JPA</a></h2>
<div class="sectionbody">
<p class="">You can also protect endpoints and store identities in a database using JPA.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="security-jpa"</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon icon-note">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info-circle" class="svg-inline--fa fa-info-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg>
</td>
<td class="content">
Also you might require <code>jdbc-postgresql</code>, <code>resteasy</code>, <code>hibernate-orm-panache</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@io.quarkus.security.jpa.UserDefinition
@Table(name = "test_user")
@Entity
public class User extends PanacheEntity {
    @io.quarkus.security.Username
    public String name;

    @io.quarkus.security.Password
    public String pass;

    @ManyToMany
    @Roles
    public List&lt;Role&gt; roles = new ArrayList&lt;&gt;();

    public static void add(String username, String password) {
        User user = new User();
        user.username = username;
        user.password = BcryptUtil.bcryptHash(password);
        user.persist();
    }
}

@Entity
public class Role extends PanacheEntity {

    @ManyToMany(mappedBy = "roles")
    public List&lt;ExternalRolesUserEntity&gt; users;

    @io.quarkus.security.RolesValue
    public String role;
}</code></pre>
</div>
</div>
<p class="">You need to configure JDBC:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=jdbc:postgresql:security_jpa
quarkus.datasource.driver=org.postgresql.Driver
quarkus.datasource.username=quarkus
quarkus.datasource.password=quarkus

quarkus.hibernate-orm.database.generation=drop-and-create</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_security_with_ldap"><a class="anchor" href="#_security_with_ldap"></a><a class="link" href="#_security_with_ldap">Security with LDAP</a></h2>
<div class="sectionbody">
<p class="">You can also protect endpoints and store identities in a database using LDAP.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-ldap"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.ldap.enabled=true
quarkus.security.ldap.dir-context.principal=uid=tool,ou=accounts,o=YourCompany,c=DE
quarkus.security.ldap.dir-context.url=ldaps://ldap.server.local
quarkus.security.ldap.dir-context.password=PASSWORD
quarkus.security.ldap.identity-mapping.rdn-identifier=uid
quarkus.security.ldap.identity-mapping.search-base-dn=ou=users,ou=tool,o=YourCompany,c=DE
quarkus.security.ldap.identity-mapping.attribute-mappings."0".from=cn
quarkus.security.ldap.identity-mapping.attribute-mappings."0".to=groups
quarkus.security.ldap.identity-mapping.attribute-mappings."0".filter=(member=uid={0})
quarkus.security.ldap.identity-mapping.attribute-mappings."0".filter-base-dn=ou=roles,ou=tool,o=YourCompany,c=DE</code></pre>
</div>
</div>
<p class=""><strong>Testing</strong></p>
<p class="">There is a Quarkus Test Resource that starts and stops InMemory LDAP server before and after test suite.
It is running in <code>localhost</code> with <code>dc=quarkus,dc=io</code> and binding credentials (<code>"uid=admin,ou=system", "secret"</code>).
Imports <em>LDIF</em> from a file located at root of the classpath named <code>quarkus-io.ldif</code>.</p>
<p class="">Register dependency io.quarkus:quarkus-test-ldap:test.</p>
<p class="">And annotate the test:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(io.quarkus.test.ldap.LdapServerTestResource.class)
public class ElytronLdapExtensionTestResources {
}</code></pre>
</div>
</div>
<p class="">Elytron LDAP Realm configuration properties.
Prefix <code>quarkus.security.ldap</code> is skipped.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enabled</code></dt>
<dd>
<p>Enable the LDAP elytron module (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>realm-name</code></dt>
<dd>
<p>The elytron realm name (default: <code>Quarkus</code>)</p>
</dd>
<dt class="hdlist1"><code>direct-verification</code></dt>
<dd>
<p>Provided credentials are verified against LDAP (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>dir-context.url</code></dt>
<dd>
<p>The url of the LDAP server.</p>
</dd>
<dt class="hdlist1"><code>dir-context.principal</code></dt>
<dd>
<p>User (<code>bindDn</code>) which is used to connect to LDAP server.</p>
</dd>
<dt class="hdlist1"><code>dir-context.password</code></dt>
<dd>
<p>The password (<code>bindCredential</code>) which belongs to the principal.</p>
</dd>
<dt class="hdlist1"><code>identity-mapping.rdn-identifier</code></dt>
<dd>
<p>The identifier (<code>baseFilter</code>) which correlates to the provided user (default: <code>uid</code>)</p>
</dd>
<dt class="hdlist1"><code>identity-mapping.search-base-dn</code></dt>
<dd>
<p>The dn where we look for users.</p>
</dd>
<dt class="hdlist1"><code>identity-mapping.attribute-mappings.&lt;id&gt;.from</code></dt>
<dd>
<p>The <code>roleAttributeId</code> from which is mapped</p>
</dd>
<dt class="hdlist1"><code>identity-mapping.attribute-mappings.&lt;id&gt;.to</code></dt>
<dd>
<p>The identifier whom the attribute is mapped to (default: <code>gropus</code>)</p>
</dd>
<dt class="hdlist1"><code>identity-mapping.attribute-mappings.&lt;id&gt;.filter</code></dt>
<dd>
<p>The filter (<code>roleFilter</code>)</p>
</dd>
<dt class="hdlist1"><code>identity-mapping.attribute-mappings.&lt;id&gt;.filter-base-dn</code></dt>
<dd>
<p>The filter base dn (<code>rolesContextDn</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vault"><a class="anchor" href="#_vault"></a><a class="link" href="#_vault">Vault</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.vaultproject.io/">Vault</a> to manage secrets or protecting sensitive data.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="vault"</code></pre>
</div>
</div>
<p class="">And configuring Vault in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># vault url
quarkus.vault.url=http://localhost:8200

quarkus.vault.authentication.userpass.username=
    bob
quarkus.vault.authentication.userpass.password=
    sinclair

# path within the kv secret engine
quarkus.vault.secret-config-kv-path=
    myapps/vault-quickstart/config
quarkus.vault.secret-config-kv-prefix.singer.paths=
    multi/singer1, multi/singer2</code></pre>
</div>
</div>
<p class=""><code>vault kv put secret/myapps/vault-quickstart/config a-private-key=123456</code></p>
<p class=""><code>vault kv put secret/multi/singer1 firstname=paul</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "a-private-key")
String privateKey;

@ConfigProperty(name = "singer.firstname")
String firstName;</code></pre>
</div>
</div>
<p class="">You can access the KV engine programmatically:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultKVSecretEngine kvSecretEngine;

kvSecretEngine.readSecret("myapps/vault-quickstart/" + vaultPath).toString();

Map&lt;String, String&gt; secrets;
kvSecretEngine.writeSecret("myapps/vault-quickstart/crud", secrets);

kvSecretEngine.deleteSecret("myapps/vault-quickstart/crud");</code></pre>
</div>
</div>
<p class=""><strong>Fetching credentials DB</strong></p>
<p class="">With the next <em>kv</em> <code>vault kv put secret/myapps/vault-quickstart/db password=connor</code></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.vault.credentials-provider.mydatabase.kv-path=
    myapps/vault-quickstart/db

quarkus.datasource.db-kind=
    postgresql
quarkus.datasource.username=
    sarah
quarkus.datasource.credentials-provider=
    mydatabase
quarkus.datasource.jdbc.url=
    jdbc:postgresql://localhost:5432/mydatabase</code></pre>
</div>
</div>
<p class="">No password is set as it is fetched from Vault.</p>
<p class="">Dynamic credentials are also supported:</p>
<p class="">Running the following dynamic database config in Vault:</p>
<p class=""><code>vault write database/config/mydb plugin_name=postgresql-database-plugin &#8230;&#8203;..</code></p>
<p class="">You can configure as:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.vault.credentials-provider
    .mydatabase.database-credentials-role=mydbrole

quarkus.datasource.db-kind=
    postgresql
quarkus.datasource.credentials-provider=
    mydatabase
quarkus.datasource.jdbc.url=
    jdbc:postgresql://localhost:5432/mydatabase</code></pre>
</div>
</div>
<p class="">Username and password are fetched from Vault</p>
<p class=""><strong>Transit</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultTransitSecretEngine transit;

transit.encrypt("my_encryption", text);
transit.decrypt("my_encryption", text).asString();
transit.sign("my-sign-key", text);</code></pre>
</div>
</div>
<p class=""><strong>Transit Key</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultTransitSecretEngine transit;

transit.createKey(KEY_NAME, new KeyCreationRequestDetail().setExportable(true));
transit.readKey(KEY_NAME);
transit.listKeys();
transit.exportKey(KEY_NAME, VaultTransitExportKeyType.encryption, null);
transit.updateKeyConfiguration(KEY_NAME, new KeyConfigRequestDetail().setDeletionAllowed(true));
transit.deleteKey(KEY_NAME);</code></pre>
</div>
</div>
<p class=""><strong>Vault TOTP</strong></p>
<p class="">TOTP secret engine is supported by using <code>io.quarkus.vault.VaultTOTPSecretEngine</code> class:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultTOTPSecretEngine vaultTOTPSecretEngine;

CreateKeyParameters createKeyParameters = new CreateKeyParameters("Google", "test@gmail.com");
createKeyParameters.setPeriod("30m");

/** Generate Key (QR code) */
final Optional&lt;KeyDefinition&gt; myKey = vaultTOTPSecretEngine
                                            .createKey("my_key_2", createKeyParameters);

/** Generate key number to login */
final String keyCode = vaultTOTPSecretEngine.generateCode("my_key_2");

/** Login logic */
boolean valid = vaultTOTPSecretEngine.validateCode("my_key_2", keyCode);</code></pre>
</div>
</div>
<p class=""><strong>Vault Provisioning</strong></p>
<p class="">Vault extension offers façade classes to Vault provisioning functions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultSystemBackendEngine vaultSystemBackendEngine;

@Inject
VaultKubernetesAuthService vaultKubernetesAuthService;

String rules = "path \"transit/*\" {\n" +
          "  capabilities = [ \"create\", \"read\", \"update\" ]\n" +
          "}";
String policyName = "sys-test-policy";

vaultSystemBackendEngine.createUpdatePolicy(policyName, rules);

vaultKubernetesAuthService
    .createRole(roleName, new VaultKubernetesAuthRole()
          .setBoundServiceAccountNames(boundServiceAccountNames)
          .setBoundServiceAccountNamespaces(boundServiceAccountNamespaces)
          .setTokenPolicies(tokenPolicies));</code></pre>
</div>
</div>
<p class="">Vault configuration properties.
Prefix <code>quarkus.vault</code> is skipped.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>url</code></dt>
<dd>
<p>Vault server URL</p>
</dd>
<dt class="hdlist1"><code>authentication.client-token</code></dt>
<dd>
<p>Vault token to access</p>
</dd>
<dt class="hdlist1"><code>authentication.app-role.role-id</code></dt>
<dd>
<p>Role Id for AppRole auth</p>
</dd>
<dt class="hdlist1"><code>authentication.app-role.secret-id</code></dt>
<dd>
<p>Secret Id for AppRole auth</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>authentication.app-role.secret-id-wrapping-token</code></dt>
<dd>
<p>Wrapping token containing a Secret Id. <code>secret-id</code> and <code>secret-id-wrapping-token</code> are exclusive.</p>
</dd>
<dt class="hdlist1"><code>authentication.userpass.username</code></dt>
<dd>
<p>Username for userpass auth</p>
</dd>
<dt class="hdlist1"><code>authentication.userpass.password</code></dt>
<dd>
<p>Password for userpass auth</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>authentication.userpass.password-wrapping-token</code></dt>
<dd>
<p>Wrapping token containing a password. <code>password</code> and <code>password-wrapping-token</code> are exclusive.</p>
</dd>
<dt class="hdlist1"><code>authentication.kubernetes.role</code></dt>
<dd>
<p>Kubernetes authentication role</p>
</dd>
<dt class="hdlist1"><code>authentication.kubernetes.jwt-token-path</code></dt>
<dd>
<p>Location of the file containing the Kubernetes JWT token</p>
</dd>
<dt class="hdlist1"><code>renew-grace-period</code></dt>
<dd>
<p>Renew grace period duration (default: <code>1H</code>)</p>
</dd>
<dt class="hdlist1"><code>secret-config-cache-period</code></dt>
<dd>
<p>Vault config source cache period (default: <code>10M</code>)</p>
</dd>
<dt class="hdlist1"><code>secret-config-kv-path</code></dt>
<dd>
<p>Vault path in kv store. List of paths is supported in CSV</p>
</dd>
<dt class="hdlist1"><code>log-confidentiality-level</code></dt>
<dd>
<p>Used to hide confidential infos. <code>low</code>, <code>medium</code>, <code>high</code> (default: <code>medium</code>)</p>
</dd>
<dt class="hdlist1"><code>kv-secret-engine-version</code></dt>
<dd>
<p>Kv secret engine version (default: 1)</p>
</dd>
</dl>
</div>
<p class=""><code>kv-secret-engine-mount-path</code>
Kv secret engine path (default: <code>secret</code>)</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>tls.skip-verify</code></dt>
<dd>
<p>Allows to bypass certificate validation on TLS communications (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>tls.ca-cert</code></dt>
<dd>
<p>Certificate bundle used to validate TLS communications</p>
</dd>
<dt class="hdlist1"><code>tls.use-kubernetes-ca-cert</code></dt>
<dd>
<p>TLS will be active (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>connect-timeout</code></dt>
<dd>
<p>Tiemout to establish a connection (default: <code>5S</code>)</p>
</dd>
<dt class="hdlist1"><code>read-timeout</code></dt>
<dd>
<p>Request timeout (default: <code>1S</code>)</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".database-credentials-role</code></dt>
<dd>
<p>Database credentials role</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".kv-path</code></dt>
<dd>
<p>A path in vault kv store, where we will find the kv-key</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".kv-key</code></dt>
<dd>
<p>Key name to search in vault path kv-path (default: <code>password</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_kms"><a class="anchor" href="#_amazon_kms"></a><a class="link" href="#_amazon_kms">Amazon KMS</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="amazon-kms"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KmsClient kms;

kms.encrypt(req -&gt; req.keyId(keyArn).plaintext(
        SdkBytes.fromUtf8String(data))).ciphertextBlob();</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kms.endpoint-override=http://localhost:8011
quarkus.kms.aws.region=us-east-1
quarkus.kms.aws.credentials.type=static
quarkus.kms.aws.credentials.static-provider.access-key-id=test-key
quarkus.kms.aws.credentials.static-provider.secret-access-key=test-secret</code></pre>
</div>
</div>
<p class="">You need to set a HTTP client either <code>URL Connection</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;url-connection-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">or Apache HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;apache-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.sqs.sync-client.type=apache</code></pre>
</div>
</div>
<p class="">You can go async by using Mutiny:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
software.amazon.awssdk.services.kms.KmsAsyncClient kms;

Uni.createFrom().completionStage(
    kms.encrypt(req -&gt; req.keyId(keyArn).plaintext(SdkBytes.fromUtf8String(data))
    ))</code></pre>
</div>
</div>
<p class="">And you need to add the asynchronous Netty client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;netty-nio-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">Configuration properties are the same as <a href="#_amazon_dynamodb">Amazon DynamoDB</a> but changing the prefix from <code>dynamodb</code> to <code>kms</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_iam"><a class="anchor" href="#_amazon_iam"></a><a class="link" href="#_amazon_iam">Amazon IAM</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="quarkus-amazon-iam"</code></pre>
</div>
</div>
<p class="">You need to set a HTTP client either <code>URL Connection</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;url-connection-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">or Apache HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;apache-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">And you need to add the asynchronous Netty client:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;netty-nio-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
IamClient client;

@Inject
IamAsyncClient async;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.iam.endpoint-override=${iam.url}
quarkus.iam.aws.region=us-east-1
quarkus.iam.aws.credentials.type=static
quarkus.iam.aws.credentials.static-provider.access-key-id=test-key
quarkus.iam.aws.credentials.static-provider.secret-access-key=test-secret</code></pre>
</div>
</div>
<p class="">Configuration properties are the same as <a href="#_amazon_dynamodb">Amazon DynamoDB</a> but changing the prefix from <code>dynamodb</code> to <code>iam</code>.</p>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_http_configuration"><a class="anchor" href="#_http_configuration"></a><a class="link" href="#_http_configuration">HTTP Configuration</a></h2>
<div class="sectionbody">
<p class="">You can configure HTTP parameters.
Using <code>quarkus.http</code> prefix:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>cors</code></dt>
<dd>
<p>Enable CORS. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>cors.origins</code></dt>
<dd>
<p>CSV of origins allowed. (dedault: Any request valid.)</p>
</dd>
<dt class="hdlist1"><code>cors.methods</code></dt>
<dd>
<p>CSV of methods valid. (default: Any method valid.)</p>
</dd>
<dt class="hdlist1"><code>cors.headers</code></dt>
<dd>
<p>CSV of valid allowed headers. (default: Any requested header valid.)</p>
</dd>
<dt class="hdlist1"><code>cors.exposed-headers</code></dt>
<dd>
<p>CSV of valid exposed headers.</p>
</dd>
<dt class="hdlist1"><code>port</code></dt>
<dd>
<p>The HTTP port. (default: <code>8080</code>)</p>
</dd>
<dt class="hdlist1"><code>test-port</code></dt>
<dd>
<p>The HTTP test port. (default: <code>8081</code>)</p>
</dd>
<dt class="hdlist1"><code>host</code></dt>
<dd>
<p>The HTTP host. (default: <code>0.0.0.0</code>)</p>
</dd>
<dt class="hdlist1"><code>host-enabled</code></dt>
<dd>
<p>Enable listening to host:port. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>ssl-port</code></dt>
<dd>
<p>The HTTPS port. (default <code>8443</code>)</p>
</dd>
<dt class="hdlist1"><code>test-ssl-port</code></dt>
<dd>
<p>The HTTPS port used to run tests. (default <code>8444</code>)</p>
</dd>
<dt class="hdlist1"><code>proxy-address-forwarding</code></dt>
<dd>
<p>The address, scheme etc will be set from headers forwarded by the proxy server.</p>
</dd>
<dt class="hdlist1"><code>allow-forwarded</code></dt>
<dd>
<p>Proxy address forwarding is enabled then the standard <code>Forwarded</code> header will be used, rather than the more common but not standard <code>X-Forwarded-For</code>.</p>
</dd>
<dt class="hdlist1"><code>insecure-requests</code></dt>
<dd>
<p>If insecure requests are allowed. Possible values: <code>enabled</code>, <code>redirect</code>, <code>disable</code>. (default: <code>enabled</code>)</p>
</dd>
<dt class="hdlist1"><code>http2</code></dt>
<dd>
<p>Enables HTTP/2. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>ssl.port</code></dt>
<dd>
<p>The <em>HTTPS</em> port. (default: <code>8443</code>)</p>
</dd>
<dt class="hdlist1"><code>ssl.certificate.file</code></dt>
<dd>
<p>The file path to a service certificate or certificate chain in <em>PEM</em> format. Relative to <code>src/main/resources</code>.</p>
</dd>
<dt class="hdlist1"><code>ssl.certificate.key-file</code></dt>
<dd>
<p>The file path to the corresponding certificate private key in <em>PEM</em> format. Relative to <code>src/main/resources</code>.</p>
</dd>
<dt class="hdlist1"><code>ssl.certificate.key-store-file</code></dt>
<dd>
<p>The key store contains the certificate information. Relative to <code>src/main/resources</code>.</p>
</dd>
<dt class="hdlist1"><code>ssl.certificate.key-store-file-type</code></dt>
<dd>
<p>The key store type. It is automatically detected based on the file name or can be set manually. Supported values are: <code>JKS</code>, <code>JCEKS</code>, <code>P12</code>, <code>PKCS12</code> or <code>PFX</code>.</p>
</dd>
<dt class="hdlist1"><code>ssl.certificate.key-store-password</code></dt>
<dd>
<p>The password to open the key store file.</p>
</dd>
</dl>
</div>
<p class=""><code>ssl.certificate.trust-store-file</code>
The trust store location which contains the certificate information of the certificates to trust. Relative to <code>src/main/resources</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>ssl.certificate.trust-store-file-type</code></dt>
<dd>
<p>The trust store type. It is automatically detected based on the file name or can be set manually.</p>
</dd>
<dt class="hdlist1"><code>ssl.certificate.trust-store-password</code></dt>
<dd>
<p>The password to open the trust store file.</p>
</dd>
<dt class="hdlist1"><code>ssl.cipher-suites</code></dt>
<dd>
<p>A list of strings of cipher suites to use. If not provided, a reasonable default is selected.</p>
</dd>
<dt class="hdlist1"><code>ssl.protocols</code></dt>
<dd>
<p>The list of protocols to explicitly enable. (default: <code>TLSv1.3</code> and <code>TLSv1.2</code>).</p>
</dd>
<dt class="hdlist1"><code>ssl.client-auth</code></dt>
<dd>
<p>Configures the engine to require/request client authentication. Possible values are: <code>none</code>, <code>request</code> and  <code>required</code>. (default:  <code>none</code>).</p>
</dd>
<dt class="hdlist1"><code>io-threads</code></dt>
<dd>
<p>The number if IO threads used to perform IO.</p>
</dd>
<dt class="hdlist1"><code>limits.max-header-size</code></dt>
<dd>
<p>The maximum length of all headers. (default: <code>20k</code>)</p>
</dd>
<dt class="hdlist1"><code>limits.max-body-size</code></dt>
<dd>
<p>The maximum size of a request body. (default: <code>10M</code>)</p>
</dd>
<dt class="hdlist1"><code>limits.max-chunk-size</code></dt>
<dd>
<p>The max HTTP chunk size.</p>
</dd>
<dt class="hdlist1"><code>limits.max-initial-line-length</code></dt>
<dd>
<p>The maximum length of the initial line. (default: <code>4096</code>)</p>
</dd>
<dt class="hdlist1"><code>idle-timeout</code></dt>
<dd>
<p>Http connection idle timeout. (default: <code>30M</code>)</p>
</dd>
<dt class="hdlist1"><code>enable-compression</code></dt>
<dd>
<p>If responses should be compressed.</p>
</dd>
<dt class="hdlist1"><code>read-timeout</code></dt>
<dd>
<p>Http connection read timeout for blocking IO. (default: <code>60s</code>)</p>
</dd>
<dt class="hdlist1"><code>body.handle-file-uploads</code></dt>
<dd>
<p>If the files sent using <code>multipart/form-data</code> will be stored locally. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>body.uploads-directory</code></dt>
<dd>
<p>The directory where the files sent using <code>multipart/form-data</code> should be stored. (default: <code>file-uploads</code>)</p>
</dd>
<dt class="hdlist1"><code>body.merge-from-attributes</code></dt>
<dd>
<p>If the form attributes should be added to the request parameters. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>body.delete-uploaded-files-on-end</code></dt>
<dd>
<p>If the uploaded files should be removed after serving the request.</p>
</dd>
<dt class="hdlist1"><code>body.preallocate-body-buffer</code></dt>
<dd>
<p>If the body buffer should pre-allocated based on the <code>Content-Length</code> header value. (default: <code>1K</code>)</p>
</dd>
<dt class="hdlist1"><code>auth.session.encryption-key</code></dt>
<dd>
<p>The encryption key that is used to store persistent logins.</p>
</dd>
<dt class="hdlist1"><code>so-reuse-port</code></dt>
<dd>
<p>Enable socket reuse port.</p>
</dd>
<dt class="hdlist1"><code>tcp-quick-ack</code></dt>
<dd>
<p>Enable tcp quick ack.</p>
</dd>
<dt class="hdlist1"><code>tcp-cork</code></dt>
<dd>
<p>Enable tcp cork.</p>
</dd>
<dt class="hdlist1"><code>tcp-fast-open</code></dt>
<dd>
<p>Enable tcp fast open.</p>
</dd>
<dt class="hdlist1"><code>domain-socket</code></dt>
<dd>
<p>Path to a unix domain socket. (default: <code>/var/run/io.quarkus.app.socket</code>)</p>
</dd>
<dt class="hdlist1"><code>domain-socket-enabled</code></dt>
<dd>
<p>Enables domain socket.</p>
</dd>
<dt class="hdlist1"><code>record-request-start-time</code></dt>
<dd>
<p>If enabled then start time will be recorded to enable logging of total request time. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>access-log.enabled</code></dt>
<dd>
<p>If access logging is enabled. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>access-log.pattern</code></dt>
<dd>
<p>The access log pattern. (default: <code>common</code>)</p>
</dd>
<dt class="hdlist1"><code>access-log.log-to-file</code></dt>
<dd>
<p>If logging should be done to a separate file. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>access-log.base-file-name</code></dt>
<dd>
<p>The access log file base name. (default: <code>quarkus</code>)</p>
</dd>
<dt class="hdlist1"><code>access-log.log-directory</code></dt>
<dd>
<p>The log directory to use when logging access to a file.</p>
</dd>
<dt class="hdlist1"><code>access-log.log-directory</code></dt>
<dd>
<p>The log directory to use when logging access to a file.</p>
</dd>
<dt class="hdlist1"><code>access-log.log-suffix</code></dt>
<dd>
<p>The log file suffix. (default: <code>.log</code>)</p>
</dd>
<dt class="hdlist1"><code>access-log.category</code></dt>
<dd>
<p>The log category to use if logging is being done via the standard log mechanism. (default: <code>io.quarkus.http.access-log</code>)</p>
</dd>
<dt class="hdlist1"><code>access-log.rotate</code></dt>
<dd>
<p>If the log should be rotated daily. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>same-site-cookie.&lt;name&gt;.case-sensitive</code></dt>
<dd>
<p>If the cookie pattern is case sensitive.</p>
</dd>
<dt class="hdlist1"><code>same-site-cookie.&lt;name&gt;.value</code></dt>
<dd>
<p>The value to set in the samesite attribute.</p>
</dd>
<dt class="hdlist1"><code>same-site-cookie.&lt;name&gt;.enable-client-checker</code></dt>
<dd>
<p>Some User Agents break when sent SameSite=None, this will detect them and avoid sending the value. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>same-site-cookie.&lt;name&gt;.add-secure-for-none</code></dt>
<dd>
<p>If this is true then the 'secure' attribute will automatically be sent on cookies with a SameSite attribute of None. (default: <code>true</code>)</p>
</dd>
</dl>
</div>
<p class="">If metrics extension is registered, you can enable to get HTTP metrics by setting <code>quarkus.resteasy.metrics.enabled</code> to true.</p>
</div>
</div>
<div class="sect1">
<h2 id="_jax_rs"><a class="anchor" href="#_jax_rs"></a><a class="link" href="#_jax_rs">JAX-RS</a></h2>
<div class="sectionbody">
<p class="">Quarkus uses JAX-RS to define <a href="https://github.com/jax-rs" target="_blank" rel="noopener">REST-ful web APIs</a>.
Under the covers, Rest-EASY is working with Vert.X directly without using any Servlet.</p>
<p class="">It is <strong>important</strong> to know that if you want to use any feature that implies a <code>Servlet</code> (ie Servlet Filters) then you need to add the <code>quarkus-undertow</code> extension to switch back to the <code>Servlet</code> ecosystem but generally speaking, you don&#8217;t need to add it as everything else is well-supported.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/book")
public class BookResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Book&gt; getAllBooks() {}

    @POST
    @Produces(MediaType.APPLICATION_JSON)
    public Response createBook(Book book) {}

    @DELETE
    @Path("{isbn}")
    @Produces(MediaType.APPLICATION_JSON)
    public Response deleteBook(
        @PathParam("isbn") String isbn) {}


    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("search")
    public Response searchBook(
        @QueryParam("description") String description) {}
}</code></pre>
</div>
</div>
<p class="">To get information from request:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>@PathParam</code></dt>
<dd>
<p>Gets content from request URI. (example: <code>/book/{id} @PathParam("id")</code>)</p>
</dd>
<dt class="hdlist1"><code>@QueryParam</code></dt>
<dd>
<p>Gets query parameter. (example: <code>/book?desc="" @QueryParam("desc)</code>)</p>
</dd>
<dt class="hdlist1"><code>@FormParam</code></dt>
<dd>
<p>Gets form parameter.</p>
</dd>
<dt class="hdlist1"><code>@MatrixParam</code></dt>
<dd>
<p>Get URI matrix parameter. (example: <code>/book;author=mkyong;country=malaysia</code>)</p>
</dd>
<dt class="hdlist1"><code>@CookieParam</code></dt>
<dd>
<p>Gets cookie param by name.</p>
</dd>
<dt class="hdlist1"><code>@HeaderParam</code></dt>
<dd>
<p>Gets header parameter by name.</p>
</dd>
</dl>
</div>
<p class="">Valid HTTP method annotations provided by the spec are: <code>@GET</code>, <code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code>, <code>@PATCH</code>, <code>@HEAD</code> and <code>@OPTIONS</code>.</p>
<p class="">You can create new annotations that bind to HTTP methods not defined by the spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@HttpMethod("LOCK")
public @interface LOCK {
}

@LOCK
public void lockIt() {}
}</code></pre>
</div>
</div>
<p class=""><strong>Injecting</strong></p>
<p class="">Using <code>@Context</code> annotation to inject JAX-RS and Servlet information.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
public String getBase(@Context UriInfo uriInfo) {
    return uriInfo.getBaseUri();
}</code></pre>
</div>
</div>
<p class="">Possible injectable objects: <code>SecurityContext</code>, <code>Request</code>, <code>Application</code>, <code>Configuration</code>, <code>Providers</code>, <code>ResourceContext</code>, <code>ServletConfig</code>, <code>ServletContext</code>, <code>HttpServletRequest</code>, <code>HttpServletResponse</code>, <code>HttpHeaders</code>, <code>Urinfo</code>, <code>SseEventSink</code> and <code>Sse</code>.</p>
<p class=""><strong>HTTP Filters</strong></p>
<p class="">HTTP request and response can be intercepted to manipulate the metadata (ie headers, parameters, media type, &#8230;&#8203;) or abort a request.
You only need to implement the next <code>ContainerRequestFilter</code> and <code>ContainerResponseFilter</code> JAX-RS interfaces respectively.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Provider
public class LoggingFilter
        implements ContainerRequestFilter {

    @Context
    UriInfo info;

    @Context
    HttpServletRequest request;

    @Override
    public void filter(ContainerRequestContext context) {
        final String method = context.getMethod();
        final String path = info.getPath();
        final String address = request.getRemoteAddr();
        System.out.println("Request %s %s from IP %s",
                method, path, address);
    }

}</code></pre>
</div>
</div>
<p class=""><strong>Exception Mapper</strong></p>
<p class="">You can map exceptions to produce a custom output by implementing <code>ExceptionMapper</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Provider
public class ErrorMapper
    implements ExceptionMapper&lt;Exception&gt; {

    @Override
    public Response toResponse(Exception exception) {
        int code = 500;
        if (exception instanceof WebApplicationException) {
            code = ((WebApplicationException) exception)
                .getResponse().getStatus();
        }
        return Response.status(code)
            .entity(
                Json.createObjectBuilder()
                .add("error", exception.getMessage())
                .add("code", code)
                .build()
            )
            .build();
        }
    }</code></pre>
</div>
</div>
<p class=""><strong>Caching</strong></p>
<p class="">Annotations to set Cache-Control headers:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces(MediaType.APPLICATION_JSON)
@org.jboss.resteasy.annotations.cache.NoCache
public User me() {}

@Produces(MediaType.APPLICATION_JSON)
@org.jboss.resteasy.annotations.cache.Cache(
    maxAge = 2000,
    noStore = false
)
public User you() {}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vert_x_filters_and_routes"><a class="anchor" href="#_vert_x_filters_and_routes"></a><a class="link" href="#_vert_x_filters_and_routes">Vert.X Filters and Routes</a></h2>
<div class="sectionbody">
<p class=""><strong>Programmatically</strong></p>
<p class="">You can also register Vert.X Filters and Router programmatically inside a CDI bean:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import io.quarkus.vertx.http.runtime.filters.Filters;
import io.vertx.ext.web.Router;
import javax.enterprise.context.ApplicationScoped;
import javax.enterprise.event.Observes;

@ApplicationScoped
public class MyBean {

    public void filters(
            @Observes Filters filters) {
        filters
            .register(
                rc -&gt; {
                    rc.response()
                        .putHeader("X-Filter", "filter 1");
                    rc.next();
                },
                10);
    }

    public void routes(
            @Observes Router router) {
        router
            .get("/")
            .handler(rc -&gt; rc.response().end("OK"));
    }
}</code></pre>
</div>
</div>
<p class=""><strong>Declarative</strong></p>
<p class="">You can use <code>@Route</code> annotation to use reactive routes and <code>@RouteFilter</code> to sue reactive filters in a declarative way:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-vertx-web"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class MyDeclarativeRoutes {

    @Route(path = "/hello", methods = HttpMethod.GET)
    public void greetings(RoutingContext rc) {
        String name = rc.request().getParam("name");
        if (name == null) {
            name = "world";
        }
        rc.response().end("hello " + name);
    }

     @RouteFilter(20)
    void filter(RoutingContext rc) {
         rc.response().putHeader("X-Filter", "filter 2");
         rc.next();
    }

    @Route
    String hello(@Param Optional&lt;String&gt; name) {}

    @Route
    String helloFromHeader(@Header("My-Header") String header) {}

    @Route
    String createPerson(@Body Person person) {}

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_graphql"><a class="anchor" href="#_graphql"></a><a class="link" href="#_graphql">GraphQL</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://graphql.org/">GraphQL</a> using <a href="https://download.eclipse.org/microprofile/microprofile-graphql-1.0.1/microprofile-graphql.html">MicroProfile GraphQL</a> integration.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="graphql"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GraphQLApi
public class FilmResource {

    @Query("allFilms")
    public List&lt;String&gt; films() {
    }

    @Query
    public String getFilm(@Name("filmId") int id)) {}

    @Query
    public List&lt;Hero&gt; getHeroesWithSurname(
        @DefaultValue("Skywalker") String surname) {
    }

    @Mutation
    public Greetings load(Greetings greetings) {
    }

}</code></pre>
</div>
</div>
<p class="">If name not provided, then query name is resolved from method name.</p>
<p class="">You can see the full schema at <code>/graphql/schema.graphql</code>.
Also GraphiQL UI is enabled at dev and test mode at <code>/graphql-ui/</code>.</p>
<p class="">Extension can be configured with the follwoing paramters prefixed with <code>quarkus.smallrye-graphql</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>root-path</code></dt>
<dd>
<p>The rootPath under which queries will be served. (default: <code>/graphql</code>)</p>
</dd>
<dt class="hdlist1"><code>root-path-ui</code></dt>
<dd>
<p>The path where GraphQL UI is available. (default: <code>/graphql-ui</code>)</p>
</dd>
<dt class="hdlist1"><code>always-include-ui</code></dt>
<dd>
<p>The path where GraphQL UI is available. (default: <code>/graphql-ui</code>)</p>
</dd>
<dt class="hdlist1"><code>root-path-ui</code></dt>
<dd>
<p>Always include the UI. By default this will only be included in dev and test. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>enable-ui</code></dt>
<dd>
<p>If GraphQL UI should be enabled. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>metrics.enabled</code></dt>
<dd>
<p>Enable metrics. (default: <code>false</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vert_x_verticle"><a class="anchor" href="#_vert_x_verticle"></a><a class="link" href="#_vert_x_verticle">Vert.X Verticle</a></h2>
<div class="sectionbody">
<p class="">Vert.X Verticles are also supported:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class VerticleDeployer {

    @Inject
    Vertx vertx;

    public void init(@Observes StartupEvent ev) {
        CountDownLatch latch = new CountDownLatch(1);
        vertx.deployVerticle(BareVerticle::new,
            new DeploymentOptions()
                .setConfig(
                    new JsonObject()
                    .put("id", "bare")
                )
            )
            .thenAccept(x -&gt; latch.countDown());

        latch.countDown();
    }
}</code></pre>
</div>
</div>
<p class="">Verticles can be:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">bare</dt>
<dd>
<p>extending <code>io.vertx.core.AbstractVerticle</code>.</p>
</dd>
<dt class="hdlist1">mutiny</dt>
<dd>
<p>extendig <code>io.smallrye.mutiny.vertx.core.AbstractVerticle</code>.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gzip_support"><a class="anchor" href="#_gzip_support"></a><a class="link" href="#_gzip_support">GZip Support</a></h2>
<div class="sectionbody">
<p class="">You can configure Quarkus to use GZip in the <code>application.properties</code> file using the next properties with <code>quarkus.resteasy</code> suffix:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>gzip.enabled</code></dt>
<dd>
<p>EnableGZip. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>gzip.max-input</code></dt>
<dd>
<p>Configure the upper limit on deflated request body. (default: <code>10M</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_grpc"><a class="anchor" href="#_grpc"></a><a class="link" href="#_grpc">GRPC</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with gRPC:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-grpc"</code></pre>
</div>
</div>
<p class="">Then you need to configure <code>build tool</code> with gRPC plugins. In the case of Maven, the <code>kr.motd.maven:os-maven-plugin</code> extension and <code>org.xolstice.maven.plugins:protobuf-maven-plugin</code></p>
<p class="">Protos files are stored at <code>src/main/proto</code>.</p>
<p class="">When <code>java</code> files are created two service implementations are provided: one with default gRPC API and other with Mutiny support.</p>
<p class="">With <code>quarkus.grpc.server</code> prefix, the next configuration properties can be set:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>port</code></dt>
<dd>
<p>The gRPC Server port. (default: <code>9000</code>)</p>
</dd>
<dt class="hdlist1"><code>host</code></dt>
<dd>
<p>The gRPC server host. (default: <code>0.0.0.0</code>)</p>
</dd>
<dt class="hdlist1"><code>handshake-timeout</code></dt>
<dd>
<p>The gRPC handshake timeout.</p>
</dd>
<dt class="hdlist1"><code>max-inbound-message-size</code></dt>
<dd>
<p>The max inbound message size in bytes.</p>
</dd>
<dt class="hdlist1"><code>plain-text</code></dt>
<dd>
<p>Use plain text. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>alpn</code></dt>
<dd>
<p>TWhether ALPN should be used. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>enable-reflection-service</code></dt>
<dd>
<p>Enables the gRPC Reflection Service. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>ssl.certificate</code></dt>
<dd>
<p>The file path to a server certificate or certificate chain in PEM format.</p>
</dd>
<dt class="hdlist1"><code>ssl.key</code></dt>
<dd>
<p>The file path to the corresponding certificate private key file in PEM format.</p>
</dd>
<dt class="hdlist1"><code>ssl.key-store</code></dt>
<dd>
<p>An optional key store which holds the certificate information instead of specifying separate files.</p>
</dd>
<dt class="hdlist1"><code>ssl.key-store-type</code></dt>
<dd>
<p>An optional parameter to specify the type of the key store file.</p>
</dd>
<dt class="hdlist1"><code>ssl.key-store-password</code></dt>
<dd>
<p>A parameter to specify the password of the key store file. (default: <code>password</code>)</p>
</dd>
<dt class="hdlist1"><code>ssl.trust-store</code></dt>
<dd>
<p>Trust store which holds the certificate information of the certificates to trust</p>
</dd>
<dt class="hdlist1"><code>ssl.trust-store-type</code></dt>
<dd>
<p>Parameter to specify type of the trust store file.</p>
</dd>
<dt class="hdlist1"><code>ssl.trust-store-password</code></dt>
<dd>
<p>A parameter to specify the password of the trust store file.</p>
</dd>
<dt class="hdlist1"><code>ssl.cipher-suites</code></dt>
<dd>
<p>A list of the cipher suites to use.</p>
</dd>
<dt class="hdlist1"><code>ssl.protocols</code></dt>
<dd>
<p>The list of protocols to explicitly enable. (default: <code>TLSv1.3,TLSv1.2</code>)</p>
</dd>
<dt class="hdlist1"><code>transport-security.certificate</code></dt>
<dd>
<p>The path to the certificate file.</p>
</dd>
<dt class="hdlist1"><code>transport-security.key</code></dt>
<dd>
<p>The path to the private key file.</p>
</dd>
</dl>
</div>
<p class="">To consume the service:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GrpcService("hello")
GreeterGrpc.GreeterBlockingStub client;

@GrpcService("hello")
io.grpc.Channel channel;</code></pre>
</div>
</div>
<p class="">Some configuration example to set the host and the SSL parameters:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.grpc.clients.hello.host=localhost
quarkus.grpc.clients.hello.plain-text=false
quarkus.grpc.clients.hello.ssl.certificate=src/main/resources/tls/client.pem
quarkus.grpc.clients.hello.ssl.key=src/main/resources/tls/client.key
quarkus.grpc.clients.hello.ssl.trust-store=src/main/resources/tls/ca.pem</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fault_tolerance"><a class="anchor" href="#_fault_tolerance"></a><a class="link" href="#_fault_tolerance">Fault Tolerance</a></h2>
<div class="sectionbody">
<p class="">Quarkus uses <a href="https://github.com/eclipse/microprofile-fault-tolerance" target="_blank" rel="noopener">MicroProfile Fault Tolerance</a> spec:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-fault-tolerance"</code></pre>
</div>
</div>
<p class="">MicroProfile Fault Tolerance spec uses CDI interceptor and it can be used in several elements such as CDI bean, JAX-RS resource or MicroProfile Rest Client.</p>
<p class="">To do automatic <strong>retries</strong> on a method:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/api")
@RegisterRestClient
public interface WorldClockService {
    @GET @Path("/json/cet/now")
    @Produces(MediaType.APPLICATION_JSON)
    @Retry(maxRetries = 2)
    WorldClock getNow();
}</code></pre>
</div>
</div>
<p class="">You can set fallback code in case of an error by using <code>@Fallback</code> annotation:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Retry(maxRetries = 1)
@Fallback(fallbackMethod = "fallbackMethod")
WorldClock getNow(){}

public WorldClock fallbackMethod() {
    return new WorldClock();
}</code></pre>
</div>
</div>
<p class=""><code>fallbackMethod</code> must have the same parameters and return type as the annotated method.</p>
<p class="">You can also set logic into a class that implements <code>FallbackHandler</code> interface:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class RecoverFallback
            implements FallbackHandler&lt;WorldClock&gt; {
    @Override
    public WorldClock handle(ExecutionContext context) {
    }
}</code></pre>
</div>
</div>
<p class="">And set it in the annotation as value <code>@Fallback(RecoverFallback.class)</code>.</p>
<p class="">In case you want to use <strong>circuit breaker</strong> pattern:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CircuitBreaker(requestVolumeThreshold = 4,
                failureRatio=0.75,
                delay = 1000)
WorldClock getNow(){}</code></pre>
</div>
</div>
<p class="">If 3 <code>(4 x 0.75)</code> failures occur among the rolling window of 4 consecutive invocations then the circuit is opened for 1000 ms and then be back to half open.
If the invocation succeeds then the circuit is back to closed again.</p>
<p class="">You can use <strong>bulkhead</strong> pattern to limit the number of concurrent access to the same resource.
If the operation is synchronous it uses a semaphore approach, if it is asynchronous a thread-pool one.
When a request cannot be processed <code>BulkheadException</code> is thrown.
It can be used together with any other fault tolerance annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Bulkhead(5)
@Retry(maxRetries = 4,
       delay = 1000,
       retryOn = BulkheadException.class)
WorldClock getNow(){}</code></pre>
</div>
</div>
<p class="">Fault tolerance annotations:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Properties</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Timeout</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>unit</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Retry</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>maxRetries</code>, <code>delay</code>, <code>delayUnit</code>, <code>maxDuration</code>, <code>durationUnit</code>, <code>jitter</code>, <code>jitterDelayUnit</code>, <code>retryOn</code>, <code>abortOn</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Fallback</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>fallbackMethod</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Bulkhead</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>waitingTaskQueue</code> (only valid in asynchronous)</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@CircuitBreaker</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>failOn</code>, <code>delay</code>, <code>delayUnit</code>, <code>requestVolumeThreshold</code>, <code>failureRatio</code>, <code>successThreshold</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>@Asynchronous</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
<p class="">You can override annotation parameters via configuration file using property <code>[classname/methodname/]annotation/parameter</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClock/getNow/Retry/maxDuration=30
# Class scope
org.acme.quickstart.WorldClock/Retry/maxDuration=3000
# Global
Retry/maxDuration=3000</code></pre>
</div>
</div>
<p class="">You can also enable/disable policies using special parameter <code>enabled</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClock/getNow/Retry/enabled=false
# Disable everything except fallback
MP_Fault_Tolerance_NonFallback_Enabled=false</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
MicroProfile Fault Tolerance integrates with MicroProfile Metrics spec. You can disable it by setting <code>MP_Fault_Tolerance_Metrics_Enabled</code> to false.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_observability"><a class="anchor" href="#_observability"></a><a class="link" href="#_observability">Observability</a></h2>
<div class="sectionbody">
<p class=""><strong>Health Checks</strong></p>
<p class="">Quarkus relies on <a href="https://github.com/eclipse/microprofile-health" target="_blank" rel="noopener">MicroProfile Health</a> spec to provide health checks.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-health"</code></pre>
</div>
</div>
<p class="">By just adding this extension, an endpoint is registered to <code>/q/health</code> providing a default health check.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
    "status": "UP",
    "checks": [
    ]
}</code></pre>
</div>
</div>
<p class="">To create a custom health check you need to implement the <code>HealthCheck</code> interface and annotate either with <code>@Readiness</code> (ready to process requests) or <code>@Liveness</code> (is running) annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Readiness
public class DatabaseHealthCheck implements HealthCheck {
    @Override
    public HealthCheckResponse call() {
        HealthCheckResponseBuilder responseBuilder =
            HealthCheckResponse.named("Database conn");

        try {
            checkDatabaseConnection();
            responseBuilder.withData("connection", true);
            responseBuilder.up();
        } catch (IOException e) {
            // cannot access the database
            responseBuilder.down()
                    .withData("error", e.getMessage());
        }
        return responseBuilder.build();
    }
}</code></pre>
</div>
</div>
<p class="">Builds the next output:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
    "status": "UP",
    "checks": [
        {
            "name": "Database conn",
            "status": "UP",
            "data": {
                "connection": true
            }
        }
    ]
}</code></pre>
</div>
</div>
<p class="">Since health checks are CDI beans, you can do:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class DatabaseHealthCheck {

    @Liveness
    HealthCheck check1() {
      return io.smallrye.health.HealthStatus
                                .up("successful-live");
    }

    @Readiness
    HealthCheck check2() {
      return HealthStatus
                .state("successful-read", this::isReady)
    }

    private boolean isReady() {}
}</code></pre>
</div>
</div>
<p class="">You can ping liveness or readiness health checks individually by querying <code>/q/health/live</code> or <code>/q/health/ready</code>.</p>
<p class="">Quarkus comes with some <code>HealthCheck</code> implementations for checking service status.</p>
<div class="ulist">
<ul>
<li>
<p><strong>SocketHealthCheck</strong>: checks if host is reachable using a socket.</p>
</li>
<li>
<p><strong>UrlHealthCheck</strong>: checks if host is reachable using a Http URL connection.</p>
</li>
<li>
<p><strong>InetAddressHealthCheck</strong>: checks if host is reachable using <code>InetAddress.isReachable</code> method.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Liveness
HealthCheck check1() {
    return new UrlHealthCheck("https://www.google.com")
            .name("Google-Check");
}</code></pre>
</div>
</div>
<p class="">If you want to override or set manually readiness/liveness probes, you can do it by setting health properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.smallrye-health.root-path=/hello
quarkus.smallrye-health.liveness-path=/customlive
quarkus.smallrye-health.readiness-path=/customready</code></pre>
</div>
</div>
<p class=""><strong>Automatic readiness probes</strong></p>
<p class="">Some default <em>readiness probes</em> are provided by default if any of the next features are added:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">datasource</dt>
<dd>
<p>A probe to check database connection status.</p>
</dd>
<dt class="hdlist1">kafka</dt>
<dd>
<p>A probe to check kafka connection status. In this case you need to enable manually by setting <code>quarkus.kafka.health.enabled</code> to <code>true</code>.</p>
</dd>
<dt class="hdlist1">mongoDB</dt>
<dd>
<p>A probe to check MongoDB connection status.</p>
</dd>
<dt class="hdlist1">neo4j</dt>
<dd>
<p>A probe to check Neo4J connection status.</p>
</dd>
<dt class="hdlist1">artemis</dt>
<dd>
<p>A probe to check Artemis JMS connection status.</p>
</dd>
<dt class="hdlist1">kafka-streams</dt>
<dd>
<p>Liveness (for stream state) and Readiness (topics created) probes.</p>
</dd>
<dt class="hdlist1">vault</dt>
<dd>
<p>A probe to check Vault conection status.</p>
</dd>
<dt class="hdlist1">gRPC</dt>
<dd>
<p>A readiness probe for the gRPC services.</p>
</dd>
<dt class="hdlist1">Cassandra</dt>
<dd>
<p>A readiness probe to check Cassandra connection status.</p>
</dd>
<dt class="hdlist1">Redis</dt>
<dd>
<p>A readiness probe to check Redis connection status.</p>
</dd>
</dl>
</div>
<p class="">You can disable the automatic generation by setting <code>&lt;component&gt;.health.enabled</code> to false.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kafka-streams.health.enabled=false
quarkus.mongodb.health.enabled=false
quarkus.neo4j.health.enabled=false</code></pre>
</div>
</div>
<p class="">In the case of Vault you can pass parameters to modify the call of the <code>status</code> endpoint in Vault.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.vault.health.enabled=true
quarkus.vault.health.stand-by-ok=true
quarkus.vault.health.performance-stand-by-ok=true</code></pre>
</div>
</div>
<p class="">Health groups are supported to provide custom health checks groups:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@io.smallrye.health.HealthGroup("mygroup1")
public class SimpleHealthGroupCheck implements HealthCheck {
}</code></pre>
</div>
</div>
<p class="">You can ping grouped health checks by querying <code>/group/mygroup1</code>.</p>
<p class="">Group root path can be configured:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.smallrye-health.group-path=/customgroup</code></pre>
</div>
</div>
<p class=""><strong>Metrics</strong></p>
<p class="">Quarkus can utilize the <a href="https://github.com/eclipse/microprofile-metrics" target="_blank" rel="noopener">MicroProfile Metrics spec</a> to provide metrics support.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-metrics"</code></pre>
</div>
</div>
<p class="">The metrics can be read with JSON or the OpenMetrics format.
An endpoint is registered automatically at <code>/q/metrics</code> providing default metrics.</p>
<p class="">MicroProfile Metrics annotations:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>@Timed</code></dt>
<dd>
<p>Tracks the duration.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>@SimplyTimed</code></dt>
<dd>
<p>Tracks the duration without mean and distribution calculations.</p>
</dd>
<dt class="hdlist1"><code>@Metered</code></dt>
<dd>
<p>Tracks the frequency of invocations.</p>
</dd>
<dt class="hdlist1"><code>@Counted</code></dt>
<dd>
<p>Counts number of invocations.</p>
</dd>
<dt class="hdlist1"><code>@Gauge</code></dt>
<dd>
<p>Samples the value of the annotated object.</p>
</dd>
<dt class="hdlist1"><code>@ConcurrentGauge</code></dt>
<dd>
<p>Gauge to count parallel invocations.</p>
</dd>
<dt class="hdlist1"><code>@Metric</code></dt>
<dd>
<p>Used to inject a metric. Valid types <code>Meter</code>, <code>Timer</code>, <code>Counter</code>, <code>Histogram</code>. <code>Gauge</code> only on producer methods/fields.</p>
</dd>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
//...
@Timed(name = "checksTimer",
description = "A measure of how long it takes
                                to perform a hello.",
unit = MetricUnits.MILLISECONDS)
public String hello() {}

@Counted(name = "countWelcome",
description = "How many welcome have been performed.")
public String hello() {}</code></pre>
</div>
</div>
<p class=""><code>@Gauge</code> annotation returning a measure as a gauge.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Gauge(name = "hottestSauce", unit = MetricUnits.NONE,
description = "Hottest Sauce so far.")
public Long hottestSauce() {}</code></pre>
</div>
</div>
<p class="">Injecting a histogram using <code>@Metric</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Metric(name = "histogram")
Histogram historgram;</code></pre>
</div>
</div>
<p class="">You can configure Metrics:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.smallrye-metrics.path=/mymetrics</code></pre>
</div>
</div>
<p class="">Prefix is <code>quarkus.smallrye-metrics</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>path</code></dt>
<dd>
<p>The path to the metrics handler. (default: <code>/q/metrics</code>)</p>
</dd>
<dt class="hdlist1"><code>extensions.enabled</code></dt>
<dd>
<p>Metrics are enabled or not. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>micrometer.compatibility</code></dt>
<dd>
<p>Apply Micrometer compatibility mode. (default: <code>false</code>)</p>
</dd>
</dl>
</div>
<p class=""><code>quarkus.hibernate-orm.metrics.enabled</code> set to <code>true</code> exposes Hibernate metrics under <code>vendor</code> scope.</p>
<p class=""><code>quarkus.mongodb.metrics.enabled</code> set to <code>true</code> exposes MongoDB metrics under <code>vendor</code> scope.</p>
<p class="">You can apply metrics annotations via CDI stereotypes:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Stereotype
@Retention(RetentionPolicy.RUNTIME)
@Target({ ElementType.TYPE, ElementType.METHOD, ElementType.FIELD })
@Timed(name = "checksTimer",
description = "A measure of how long it takes
                                to perform a hello.",
unit = MetricUnits.MILLISECONDS)
public @interface TimedMilliseconds {
}</code></pre>
</div>
</div>
<p class="">There is a tight integration with Micrometer in the form of an extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="micrometer"</code></pre>
</div>
</div>
<p class="">Add a micrometer dependency for the registry of your choosing:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.micrometer&lt;/groupId&gt;
    &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">You can configure Micrometer.
Prefix is <code>quarkus.micrometer</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enabled</code></dt>
<dd>
<p>Micrometer metrics support. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>registry-enabled-default</code></dt>
<dd>
<p>Micrometer MeterRegistry discovery. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>binder-enabled-default</code></dt>
<dd>
<p>Micrometer MeterBinder discovery. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>binder.vertx.enabled</code></dt>
<dd>
<p>Vert.x metrics support.</p>
</dd>
<dt class="hdlist1"><code>binder.mp-metrics.enabled</code></dt>
<dd>
<p>Microprofile Metrics support.</p>
</dd>
<dt class="hdlist1"><code>binder.jvm</code></dt>
<dd>
<p>Micrometer JVM metrics support. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>binder.system</code></dt>
<dd>
<p>Micrometer System metrics support. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>export.datadog.enabled</code></dt>
<dd>
<p>Support for export to Datadog Support for Datadog.</p>
</dd>
<dt class="hdlist1"><code>export.jmx.enabled</code></dt>
<dd>
<p>Support for export to JMX Support for JMX.</p>
</dd>
<dt class="hdlist1"><code>export.prometheus.enabled</code></dt>
<dd>
<p>Support for export to Prometheus.</p>
</dd>
<dt class="hdlist1"><code>export.prometheus.path</code></dt>
<dd>
<p>The path for the prometheus metrics endpoint (produces text/plain). (default: <code>/q/metrics</code>)</p>
</dd>
<dt class="hdlist1"><code>export.azuremonitor.enabled</code></dt>
<dd>
<p>Support for export to Azure Monitor.</p>
</dd>
<dt class="hdlist1"><code>export.azuremonitor.instrumentation-key</code></dt>
<dd>
<p>The path for the azure monitor instrumentationKey.</p>
</dd>
<dt class="hdlist1"><code>export.statsd.enabled</code></dt>
<dd>
<p>Support for export to StatsD.</p>
</dd>
<dt class="hdlist1"><code>export.stackdriver.enabled</code></dt>
<dd>
<p>Micrometer metrics support. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>export.signalfx.enabled</code></dt>
<dd>
<p>Micrometer metrics support. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>export.signalfx.uri</code></dt>
<dd>
<p>Signalfx URI.</p>
</dd>
<dt class="hdlist1"><code>export.signalfx.access-token</code></dt>
<dd>
<p>Access Token.</p>
</dd>
<dt class="hdlist1"><code>binder.vertx.match-patterns</code></dt>
<dd>
<p>Comma-separated case-sensitive list of regular expressions defining Paths that should be matched and used as tags</p>
</dd>
<dt class="hdlist1"><code>binder.vertx.ignore-patterns</code></dt>
<dd>
<p>Comma-separated case-sensitive list of regular expressions defining Paths that should be ignored / not measured.</p>
</dd>
<dt class="hdlist1"><code>export.datadog</code></dt>
<dd>
<p>Datadog MeterRegistry configuration in <code>Map&lt;String, String&gt;</code> format.</p>
</dd>
<dt class="hdlist1"><code>export.jmx</code></dt>
<dd>
<p>JMX registry configuration properties in <code>Map&lt;String, String&gt;</code> format.</p>
</dd>
<dt class="hdlist1"><code>export.prometheus</code></dt>
<dd>
<p>Prometheus registry configuration properties in <code>Map&lt;String, String&gt;</code> format.</p>
</dd>
<dt class="hdlist1"><code>export.stackdriver</code></dt>
<dd>
<p>Stackdriver registry configuration properties in <code>Map&lt;String, String&gt;</code> format.</p>
</dd>
</dl>
</div>
<p class=""><strong>Tracing</strong></p>
<p class="">Quarkus can utilize the <a href="https://github.com/eclipse/microprofile-opentracing" target="_blank" rel="noopener">MicroProfile OpenTracing</a> spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-opentracing"</code></pre>
</div>
</div>
<p class="">Requests sent to any endpoint are traced automatically.</p>
<p class="">This extension includes OpenTracing support and <code>Jaeger</code> tracer.</p>
<p class="">Jaeger tracer configuration:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.jaeger.service-name=myservice
quarkus.jaeger.sampler-type=const
quarkus.jaeger.sampler-param=1
quarkus.jaeger.endpoint=http://localhost:14268/api/traces
quarkus.jaeger.metrics.enabled=true</code></pre>
</div>
</div>
<p class=""><code>@Traced</code> annotation can be set to disable tracing at class or method level.</p>
<p class=""><code>Tracer</code> class can be injected into the class.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Tracer tracer;

tracer.activeSpan().setBaggageItem("key", "value");</code></pre>
</div>
</div>
<p class="">You can disable <code>Jaeger</code> extension by using <code>quarkus.jaeger.enabled</code> property.</p>
<p class="">You can log the <code>traceId</code>, <code>spanId</code> and <code>sampled</code> in normal log:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.log.console.format=%d{HH:mm:ss} %-5p traceId=%X{traceId},
                                spanId=%X{spanId}, sampled=%X{sampled} [%c{2.}] (%t) %s%e%n</code></pre>
</div>
</div>
<p class=""><strong>Additional tracers</strong></p>
<p class=""><strong>JDBC Tracer</strong></p>
<p class="">Adds a span for each JDBC queries.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;
    &lt;artifactId&gt;opentracing-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">Configure JDBC driver apart from tracing properties seen before:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># add ':tracing' to your database URL
quarkus.datasource.url=
    jdbc:tracing:postgresql://localhost:5432/mydatabase
quarkus.datasource.driver=
    io.opentracing.contrib.jdbc.TracingDriver
quarkus.hibernate-orm.dialect=
    org.hibernate.dialect.PostgreSQLDialect</code></pre>
</div>
</div>
<p class=""><strong>OpenTelemetry</strong></p>
<p class="">Quarkus integrates with the OpenTelemetry project.
For exporting traces to a Jaeger collector, use the <code>quarkus-opentelemetry-exporter-jaeger</code> extension.</p>
<p class=""><strong>Kafka Tracer</strong></p>
<p class="">Adds a span for each message sent to or received from a Kafka topic.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;
    &lt;artifactId&gt;opentracing-kafka-client&lt;&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">And configure it:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">...
mp.messaging.outgoing.generated-price.topic=prices

# For Produces
mp.messaging.outgoing.generated-price.interceptor.classes=io.opentracing.contrib.kafka.TracingProducerInterceptor
...
# For consumers
mp.messaging.incoming.prices.interceptor.classes=io.opentracing.contrib.kafka.TracingConsumerInterceptor</code></pre>
</div>
</div>
<p class=""><strong>AWS XRay</strong></p>
<p class="">If you are building native images, and want to use AWS X-Ray Tracing with your lambda you will need to include <code>quarkus-amazon-lambda-xray</code> as a dependency in your pom.</p>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_native_executable"><a class="anchor" href="#_native_executable"></a><a class="link" href="#_native_executable">Native Executable</a></h2>
<div class="sectionbody">
<p class="">You can build a native image by using GraalVM.
The common use case is creating a Docker image so you can execute the next commands:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw package -Pnative -Dquarkus.native.container-build=true

docker build -f src/main/docker/Dockerfile.native
                    -t quarkus/getting-started .
docker run -i --rm -p 8080:8080 quarkus/getting-started</code></pre>
</div>
</div>
<p class="">You can use <code>quarkus.native.container-runtime</code> to select the container runtime to use.
Now <code>docker</code> (default) and <code>podman</code> are the valid options.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw package -Pnative -Dquarkus.native.container-runtime=podman</code></pre>
</div>
</div>
<p class="">To configure native application, you can create a <code>config</code> directory at the same place as the native file and place an <code>application.properties</code> file inside. <code>config/application.properties</code>.</p>
<p class=""><strong>SSL</strong></p>
<p class="">To create a native image with SSL you need to copy SunEC library and certificates:</p>
<p class="">Java 8:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="Dockerfile" class="language-Dockerfile hljs">FROM quay.io/quarkus/ubi-quarkus-native-image:{graalvm-version}-java8 as nativebuilder
RUN mkdir -p /tmp/ssl-libs/lib \
  &amp;&amp; cp /opt/graalvm/jre/lib/security/cacerts /tmp/ssl-libs \
  &amp;&amp; cp /opt/graalvm/jre/lib/amd64/libsunec.so /tmp/ssl-libs/lib/

FROM registry.access.redhat.com/ubi8/ubi-minimal
WORKDIR /work/
COPY --from=nativebuilder /tmp/ssl-libs/ /work/
COPY target/*-runner /work/application
RUN chmod 775 /work /work/application
EXPOSE 8080
CMD ["./application", "-Dquarkus.http.host=0.0.0.0", "-Djava.library.path=/work/lib", "-Djavax.net.ssl.trustStore=/work/cacerts"]</code></pre>
</div>
</div>
<p class="">Java 11:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="Dockerfile" class="language-Dockerfile hljs">FROM quay.io/quarkus/ubi-quarkus-native-image:{graalvm-version}-java11 as nativebuilder
RUN mkdir -p /tmp/ssl-libs/lib \
  &amp;&amp; cp /opt/graalvm/lib/security/cacerts /tmp/ssl-libs \
  &amp;&amp; cp /opt/graalvm/lib/libsunec.so /tmp/ssl-libs/lib/

FROM registry.access.redhat.com/ubi8/ubi-minimal
WORKDIR /work/
COPY --from=nativebuilder /tmp/ssl-libs/ /work/
COPY target/*-runner /work/application
RUN chmod 775 /work /work/application
EXPOSE 8080
CMD ["./application", "-Dquarkus.http.host=0.0.0.0", "-Djava.library.path=/work/lib", "-Djavax.net.ssl.trustStore=/work/cacerts"]</code></pre>
</div>
</div>
<p class=""><strong>Inclusion of resources</strong></p>
<p class="">By default, no resources are included in native executable.
<code>quarkus.native.resources.includes</code> allows to set glob expressions to include resources based on  <code>src/main/resources</code> path.</p>
<p class="">Given <code>src/main/resources/foo/selected.png</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.native.resources.includes=foo/**</code></pre>
</div>
</div>
<p class=""><strong>Exclusion of resources</strong></p>
<p class="">By default, no resources are excluded.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.native.resources.excludes = foo/**</code></pre>
</div>
</div>
<p class="">Native configuration properties prefixed with <code>quarkus.native</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>additional-build-args</code></dt>
<dd>
<p>Additional arguments to pass to the build process.</p>
</dd>
<dt class="hdlist1"><code>enable-http-url-handler</code></dt>
<dd>
<p>If the HTTP url handler should be enabled. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>enable-https-url-handler</code></dt>
<dd>
<p>If the HTTPS url handler should be enabled.</p>
</dd>
<dt class="hdlist1"><code>enable-all-security-services</code></dt>
<dd>
<p>If all security services should be added to the native image.</p>
</dd>
<dt class="hdlist1"><code>user-language</code></dt>
<dd>
<p>Defines the user language used for building the native executable.</p>
</dd>
<dt class="hdlist1"><code>user-country</code></dt>
<dd>
<p>Defines the user country used for building the native executable.</p>
</dd>
<dt class="hdlist1"><code>file-encoding</code></dt>
<dd>
<p>Defines the file encoding.</p>
</dd>
<dt class="hdlist1"><code>add-all-charsets</code></dt>
<dd>
<p>If all character sets should be added to the native image.</p>
</dd>
<dt class="hdlist1"><code>graalvm-home</code></dt>
<dd>
<p>The location of the Graal distribution.</p>
</dd>
<dt class="hdlist1"><code>java-home</code></dt>
<dd>
<p>The location of the JDK.</p>
</dd>
<dt class="hdlist1"><code>native-image-xmx</code></dt>
<dd>
<p>The maximum Java heap to be used during the native image generation.</p>
</dd>
<dt class="hdlist1"><code>debug-build-process</code></dt>
<dd>
<p>If the native image build should wait for a debugger to be attached before running.</p>
</dd>
<dt class="hdlist1"><code>publish-debug-build-process-port</code></dt>
<dd>
<p>If the debug port should be published when building with docker and debug-build-process. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>cleanup-server</code></dt>
<dd>
<p>If the native image server should be restarted.</p>
</dd>
<dt class="hdlist1"><code>enable-isolates</code></dt>
<dd>
<p>If isolates should be enabled. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>enable-fallback-images</code></dt>
<dd>
<p>If a JVM based 'fallback image' should be created if native image fails.</p>
</dd>
<dt class="hdlist1"><code>enable-server</code></dt>
<dd>
<p>If the native image server should be used.</p>
</dd>
<dt class="hdlist1"><code>auto-service-loader-registration</code></dt>
<dd>
<p>If all META-INF/services entries should be automatically registered.</p>
</dd>
<dt class="hdlist1"><code>dump-proxies</code></dt>
<dd>
<p>If the bytecode of all proxies should be dumped for inspection.</p>
</dd>
<dt class="hdlist1"><code>container-build</code></dt>
<dd>
<p>If this build should be done using a container runtime.</p>
</dd>
<dt class="hdlist1"><code>remote-container-build</code></dt>
<dd>
<p>If this build is done using a remote docker daemon.</p>
</dd>
<dt class="hdlist1"><code>builder-image</code></dt>
<dd>
<p>The docker image to use to do the image build.</p>
</dd>
<dt class="hdlist1"><code>container-runtime</code></dt>
<dd>
<p>The container runtime that is used to do an image based build. (<code>docker</code>, <code>podman</code>)</p>
</dd>
<dt class="hdlist1"><code>container-runtime-options</code></dt>
<dd>
<p>Options to pass to the container runtime.</p>
</dd>
<dt class="hdlist1"><code>enable-vm-inspection</code></dt>
<dd>
<p>If the resulting image should allow VM introspection.</p>
</dd>
<dt class="hdlist1"><code>full-stack-traces</code></dt>
<dd>
<p>If full stack traces are enabled in the resulting image.</p>
</dd>
<dt class="hdlist1"><code>enable-reports</code></dt>
<dd>
<p>If the reports on call paths and included packages/classes/methods should be generated.</p>
</dd>
<dt class="hdlist1"><code>report-exception-stack-traces</code></dt>
<dd>
<p>If exceptions should be reported with a full stack trace.</p>
</dd>
<dt class="hdlist1"><code>report-errors-at-runtime</code></dt>
<dd>
<p>If errors should be reported at runtime.</p>
</dd>
<dt class="hdlist1"><code>enable-dashboard-dump</code></dt>
<dd>
<p>Generate the report files for GraalVM Dashboard.</p>
</dd>
<dt class="hdlist1"><code>resources.includes</code></dt>
<dd>
<p>A comma separated list of globs to match resource paths that should be added to the native image.</p>
</dd>
<dt class="hdlist1"><code>resources.excludes</code></dt>
<dd>
<p>A comma separated list of globs to match resource paths that should exclude to the native image.</p>
</dd>
<dt class="hdlist1"><code>debug.enabled</code></dt>
<dd>
<p>If debug is enabled and debug symbols are generated.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_container_images_creation"><a class="anchor" href="#_container_images_creation"></a><a class="link" href="#_container_images_creation">Container Images Creation</a></h2>
<div class="sectionbody">
<p class="">You can levarage to Quarkus to generation and release of Docker containers.
It provides several extensions to make it so.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">mvn clean package
            -Dquarkus.container-image.build=true
            -Dquarkus.container-image.push=true
            -Dquarkus.container-image.registry=quay.io</code></pre>
</div>
</div>
<p class="">Prefix is <code>quarkus.container-image</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>group</code></dt>
<dd>
<p>The group/repository of the image. (default: the <code>${user.name}</code>)</p>
</dd>
<dt class="hdlist1"><code>name</code></dt>
<dd>
<p>The name of the image. (default: the application name)</p>
</dd>
<dt class="hdlist1"><code>tag</code></dt>
<dd>
<p>The tag of the image. (default: the application version)</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>additional-tags</code></dt>
<dd>
<p>Additional tags of the container image.</p>
</dd>
<dt class="hdlist1"><code>registry</code></dt>
<dd>
<p>The registry to use for pushing. (default: <code>docker.io</code>)</p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>The registry username.</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>The registry password.</p>
</dd>
<dt class="hdlist1"><code>insecure</code></dt>
<dd>
<p>Flag to allow insecure registries. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>build</code></dt>
<dd>
<p>Boolean to set if image should be built. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>push</code></dt>
<dd>
<p>Boolean to set if image should be pushed. (default: <code>false</code>)</p>
</dd>
</dl>
</div>
<p class=""><strong>Jib</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extensions
    -Dextensions="quarkus-container-image-jib"</code></pre>
</div>
</div>
<p class="">Quarkus copies any file under <code>src/main/jib</code> into the built container image.</p>
<p class="">Prefix is <code>quarkus.container-image-jib</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>base-jvm-image</code></dt>
<dd>
<p>The base image to use for the jib build. (default: <code>fabric8/java-alpine-openjdk8-jre</code>)</p>
</dd>
<dt class="hdlist1"><code>base-native-image</code></dt>
<dd>
<p>The base image to use for the native build. (default: <code>registry.access.redhat.com/ubi8/ubi-minimal</code>)</p>
</dd>
<dt class="hdlist1"><code>jvm-arguments</code></dt>
<dd>
<p>The arguments to pass to java. (default: <code>-Dquarkus.http.host=0.0.0.0,-Djava.util.logging.manager=org.jboss.logmanager.LogManager</code>)</p>
</dd>
<dt class="hdlist1"><code>native-arguments</code></dt>
<dd>
<p>The arguments to pass to the native application. (default: <code>-Dquarkus.http.host=0.0.0.0</code>)</p>
</dd>
<dt class="hdlist1"><code>environment-variables</code></dt>
<dd>
<p>Map of environment variables.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>jvm-entrypoint</code></dt>
<dd>
<p>A custom entry point of the container image in JVM mode.</p>
</dd>
<dt class="hdlist1"><code>native-entrypoint</code></dt>
<dd>
<p>A custom entry point of the container image in native mode.</p>
</dd>
<dt class="hdlist1"><code>labels</code></dt>
<dd>
<p>Custom labels to add to the generated image.</p>
</dd>
<dt class="hdlist1"><code>base-registry-username</code></dt>
<dd>
<p>The username to use to authenticate with the registry used to pull the base JVM image.</p>
</dd>
<dt class="hdlist1"><code>base-registry-password</code></dt>
<dd>
<p>The password to use to authenticate with the registry used to pull the base JVM image.</p>
</dd>
<dt class="hdlist1"><code>ports</code></dt>
<dd>
<p>The ports to expose.</p>
</dd>
<dt class="hdlist1"><code>user</code></dt>
<dd>
<p>The user to use in generated image.</p>
</dd>
<dt class="hdlist1"><code>always-cache-base-image</code></dt>
<dd>
<p>Controls the optimization which skips downloading base image layers that exist in a target registry (default: <code>false</code>).</p>
</dd>
<dt class="hdlist1"><code>appcds-builder-image</code></dt>
<dd>
<p>When AppCDS generation is enabled, if this property is set, then the JVM used to generate the AppCDS file will be the JVM present in the container image.</p>
</dd>
<dt class="hdlist1"><code>platforms</code></dt>
<dd>
<p>List of target platforms. (ie <code>linux/amd64</code>).</p>
</dd>
</dl>
</div>
<p class=""><strong>Docker</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extensions
    -Dextensions="quarkus-container-image-docker"</code></pre>
</div>
</div>
<p class="">Prefix is <code>quarkus.container-image-s2i</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>dockerfile-jvm-path</code></dt>
<dd>
<p>Path to the JVM Dockerfile. (default: <code>${project.root}/src/main/docker/Dockerfile.jvm</code>)</p>
</dd>
<dt class="hdlist1"><code>dockerfile-native-path</code></dt>
<dd>
<p>Path to the native Dockerfile. (default: <code>${project.root}/src/main/docker/Dockerfile.native</code>)</p>
</dd>
</dl>
</div>
<p class=""><strong>S2I</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extensions
    -Dextensions="quarkus-container-image-s2i"</code></pre>
</div>
</div>
<p class="">Prefix is <code>quarkus.container-image-docker</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>base-jvm-image</code></dt>
<dd>
<p>The base image to use for the s2i build. (default: <code>fabric8/java-alpine-openjdk8-jre</code>)</p>
</dd>
<dt class="hdlist1"><code>base-native-image</code></dt>
<dd>
<p>The base image to use for the native build. (default: <code>registry.access.redhat.com/ubi8/ubi-minimal</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kubernetes"><a class="anchor" href="#_kubernetes"></a><a class="link" href="#_kubernetes">Kubernetes</a></h2>
<div class="sectionbody">
<p class="">Quarkus can use <a href="https://github.com/dekorateio/dekorate">Dekorate</a> to generate Kubernetes resources.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extensions
    -Dextensions="quarkus-kubernetes"</code></pre>
</div>
</div>
<p class="">Running <code>./mvnw package</code> the Kubernetes resources are created at <code>target/kubernetes/</code> directory.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
<a href="#_container_images_creation">Container Images Creation</a> integrates with Kubernetes extension, so no need of extra Kubernetes properties.
</td>
</tr>
</table>
</div>
<p class="">Generated resource is integrated with <a href="#_observability">MicroProfile Health annotations</a>.</p>
<p class="">Also, you can customize the generated resource by setting the new values in <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kubernetes.namespace=mynamespace

quarkus.kubernetes.replicas=3

quarkus.kubernetes.labels.foo=bar

quarkus.kubernetes.readiness-probe.period-seconds=45

quarkus.kubernetes.mounts.github-token.path=/deployment/github
quarkus.kubernetes.mounts.github-token.read-only=true

quarkus.kubernetes.secret-volumes.github-token.volume-name=github-token
quarkus.kubernetes.secret-volumes.github-token.secret-name=greeting-security
quarkus.kubernetes.secret-volumes.github-token.default-mode=420

quarkus.kubernetes.config-map-volumes.github-token.config-map-name=my-secret

quarkus.kubernetes.expose=true
quarkus.kubernetes.ingress.expose=true
quarkus.kubernetes.ingress.host=example.com

quarkus.kubernetes.env.vars.my-env-var=foobar
quarkus.kubernetes.env.configmaps=my-config-map,another-config-map
quarkus.kubernetes.env.secrets=my-secret,my-other-secret

quarkus.kubernetes.resources.requests.memory=64Mi
quarkus.kubernetes.resources.requests.cpu=250m
quarkus.kubernetes.resources.limits.memory=512Mi
quarkus.kubernetes.resources.limits.cpu=1000m</code></pre>
</div>
</div>
<p class="">All possible values are explained at <a href="https://quarkus.io/guides/kubernetes#configuration-options" class="bare">https://quarkus.io/guides/kubernetes#configuration-options</a>.</p>
<p class=""><strong>Labels and Annotations</strong></p>
<p class="">The generated manifest use the Kubernetes recommended labels and annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">"labels" : {
    "app.kubernetes.io/part-of" : "todo-app",
    "app.kubernetes.io/name" : "todo-rest",
    "app.kubernetes.io/version" : "1.0-rc.1"
}

"annotations": {
    "app.quarkus.io/vcs-url" : "&lt;some url&gt;",
    "app.quarkus.io/commit-id" : "&lt;some git SHA&gt;",
}</code></pre>
</div>
</div>
<p class="">You can override the labels by using the next properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kubernetes.part-of=todo-app
quarkus.kubernetes.name=todo-rest
quarkus.kubernetes.version=1.0-rc.1</code></pre>
</div>
</div>
<p class="">Or add new labels and/or annotations:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kubernetes.labels.foo=bar
quarkus.kubernetes.annotations.foo=bar</code></pre>
</div>
</div>
<p class=""><strong>metrics</strong></p>
<p class="">When using metrics extension, Prometheus annotations are generated:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">prometheus.io/scrape: "true"
prometheus.io/path: /metrics
prometheus.io/port: "8080"</code></pre>
</div>
</div>
<p class=""><strong>Kubernetes Deployment Targets</strong></p>
<p class="">You can generate different resources setting the property <code>quarkus.kubernetes.deployment-target</code>.</p>
<p class="">Possible values are <code>kubernetes</code>, <code>openshift</code> and <code>knative</code>.
The default value is <code>kubernetes</code>.</p>
<p class=""><strong>Knative Properties</strong></p>
<p class="">Most of the Kubernetes properties are valid in Knative output by just changing the <code>kubernetes</code> prefix to <code>knative</code> prefix (ie <code>quarkus.kubernetes.readiness-probe.period-seconds</code> to <code>quarkus.knative.readiness-probe.period-seconds</code>).</p>
<p class="">There are also specific properties for Knative:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kubernetes.deployment-target=knative
quarkus.knative.revision-name=my-revision
quarkus.knative.traffic.my-revision.percentage=80</code></pre>
</div>
</div>
<p class="">List of configuration options:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">kubernetes</dt>
<dd>
<p><a href="https://quarkus.io/guides/kubernetes#configuration-options" class="bare">https://quarkus.io/guides/kubernetes#configuration-options</a></p>
</dd>
<dt class="hdlist1">openshift</dt>
<dd>
<p><a href="https://quarkus.io/guides/kubernetes#openshift" class="bare">https://quarkus.io/guides/kubernetes#openshift</a></p>
</dd>
<dt class="hdlist1">Knative</dt>
<dd>
<p><a href="https://quarkus.io/guides/kubernetes#knative" class="bare">https://quarkus.io/guides/kubernetes#knative</a></p>
</dd>
</dl>
</div>
<p class=""><strong>Using Existing Resources</strong></p>
<p class="">You an provide your Kubernetes resources in form of yaml/json and they will provide additional resources or be used as base for the generation process:</p>
<p class="">Resources are added in <code>src/main/kubernetes</code> directory with the target name (<code>kubernetes.json</code>, <code>openshift.json</code>, <code>knative.json</code>, or the yml equivalents) with one orm ore Kubernetes resources.
Any resource found will be added in the generated manifests.
If one of the provided resources has the same name as one of the generated ones, then the generated resource will be created on top of the provided resource, respecting existing content.</p>
<p class="">To override the name of the generated resource you can use: <code>quarkus.kubernetes.name</code>, <code>quarkus.openshift.name</code> and <code>quarkus.knative.name</code>.</p>
<p class=""><strong>Deployment</strong></p>
<p class="">To deploy automatically the generated resources, you need to set <code>quarkus.container.deploy</code> flag to <code>true</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">mvn clean package -Dquarkus.kubernetes.deploy=true</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
If you set this flag to <code>true</code>, the <code>build</code> and <code>push</code> flags from container-image are set to <code>true</code> too.
</td>
</tr>
</table>
</div>
<p class="">To deploy the application, the extension uses the <a href="https://github.com/fabric8io/kubernetes-client" class="bare">https://github.com/fabric8io/kubernetes-client</a>.
All options described at <a href="#_kubernetes_client">Kubernetes Client</a> are valid here.</p>
<p class=""><strong>Kubernetes Service Binding</strong></p>
<p class="">Quarkus supports binding services to applications via the Service Binding Specification for Kubernetes.</p>
<p class="">The following Quarkus extensions support this feature:</p>
<div class="ulist">
<ul>
<li>
<p>quarkus-jdbc-mariadb</p>
</li>
<li>
<p>quarkus-jdbc-mssql</p>
</li>
<li>
<p>quarkus-jdbc-mysql</p>
</li>
<li>
<p>quarkus-jdbc-postgresql</p>
</li>
<li>
<p>quarkus-kafka-client</p>
</li>
<li>
<p>quarkus-smallrye-reactive-messaging-kafka</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extensions
    -Dextensions="quarkus-kubernetes-service-binding"</code></pre>
</div>
</div>
<p class="">Datasource configuration part is absent as it is aut-discovered by Quarkus.</p>
</div>
</div>
<div class="sect1">
<h2 id="_minikube"><a class="anchor" href="#_minikube"></a><a class="link" href="#_minikube">Minikube</a></h2>
<div class="sectionbody">
<p class="">Quarkus has a Minikube extension which creates Kubernetes manifests that are tailored for Minikube.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
    -Dextensions="minikube"</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
Remember to execute <code>eval $(minikube -p minikube docker-env)</code> to build images directly inside Minkube cluster.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openshift"><a class="anchor" href="#_openshift"></a><a class="link" href="#_openshift">OpenShift</a></h2>
<div class="sectionbody">
<p class="">Instead of adding Kubernetes extension, set container image s2i and the <code>target</code> to <code>openshift</code> for working with OpenShift, an extension grouping all of the is created:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
    -Dextensions="openshift"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kubernetes_configuration_extension"><a class="anchor" href="#_kubernetes_configuration_extension"></a><a class="link" href="#_kubernetes_configuration_extension">Kubernetes Configuration Extension</a></h2>
<div class="sectionbody">
<p class="">Integration between MicroProfile Config spec and ConfigMaps &amp; Secrets:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extensions
    -Dextensions="quarkus-kubernetes-config"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kubernetes-config.enabled=true
quarkus.kubernetes-config.config-maps=cmap1,cmap2</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "some.prop1")
String someProp1;

@ConfigProperty(name = "some.prop2")
String someProp2;</code></pre>
</div>
</div>
<p class="">If the config key is a Quarkus configuration file <code>application.properties</code>/<code>application.yaml</code>, the content is parsed and each key of the configuration file is used as config property.</p>
<p class="">List of Kubernetes Config parameters.</p>
<p class=""><code>quarkus.kubernetes-config</code> as prefix is skipped in the next table.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enabled</code></dt>
<dd>
<p>The application will attempt to look up the configuration from the API server. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>fail-on-missing-config</code></dt>
<dd>
<p>The application will not start if any of the configured config sources cannot be located. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>config-maps</code></dt>
<dd>
<p>ConfigMaps to look for in the namespace that the Kubernetes Client has been configured for. Supports CSV.</p>
</dd>
<dt class="hdlist1"><code>namespace</code></dt>
<dd>
<p>Access to ConfigMaps from a specific namespace.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>secrets.enabled</code></dt>
<dd>
<p>Whether or not configuration can be read from secrets. (default: <code>false</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kubernetes_client"><a class="anchor" href="#_kubernetes_client"></a><a class="link" href="#_kubernetes_client">Kubernetes Client</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://github.com/fabric8io/kubernetes-client" target="_blank" rel="noopener">Fabric8 Kubernetes Client</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="terminal" class="language-terminal hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kubernetes-client"</code></pre>
</div>
</div>
<p class="">List of Kubernetes client parameters.</p>
<p class=""><code>quarkus.kubernetes-client</code> as prefix is skipped in the next table.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>trust-certs</code></dt>
<dd>
<p>Trust self-signed certificates. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>master-url</code></dt>
<dd>
<p>URL of Kubernetes API server.</p>
</dd>
<dt class="hdlist1"><code>namesapce</code></dt>
<dd>
<p>Default namespace.</p>
</dd>
<dt class="hdlist1"><code>ca-cert-file</code></dt>
<dd>
<p>CA certificate data.</p>
</dd>
<dt class="hdlist1"><code>client-cert-file</code></dt>
<dd>
<p>Client certificate file.</p>
</dd>
<dt class="hdlist1"><code>client-cert-data</code></dt>
<dd>
<p>Client certificate data.</p>
</dd>
<dt class="hdlist1"><code>client-key-data</code></dt>
<dd>
<p>Client key data.</p>
</dd>
<dt class="hdlist1"><code>client-key-algorithm</code></dt>
<dd>
<p>Client key algorithm.</p>
</dd>
<dt class="hdlist1"><code>client-key-passphrase</code></dt>
<dd>
<p>Client key passphrase.</p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>Username.</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>Password.</p>
</dd>
<dt class="hdlist1"><code>watch-reconnect-interval</code></dt>
<dd>
<p>Watch reconnect interval. (default: <code>PT1S</code>)</p>
</dd>
<dt class="hdlist1"><code>watch-reconnect-limit</code></dt>
<dd>
<p>Maximum reconnect attempts. (default: <code>-1</code>)</p>
</dd>
<dt class="hdlist1"><code>connection-timeout</code></dt>
<dd>
<p>Maximum amount of time to wait for a connection. (default: <code>PT10S</code>)</p>
</dd>
<dt class="hdlist1"><code>request-timeout</code></dt>
<dd>
<p>Maximum amount of time to wait for a request. (default: <code>PT10S</code>)</p>
</dd>
<dt class="hdlist1"><code>rolling-timeout</code></dt>
<dd>
<p>Maximum amount of time to wait for a rollout. (default: <code>PT15M</code>)</p>
</dd>
<dt class="hdlist1"><code>http-proxy</code></dt>
<dd>
<p>HTTP proxy used to access the Kubernetes.</p>
</dd>
<dt class="hdlist1"><code>https-proxy</code></dt>
<dd>
<p>HTTPS proxy used to access the Kubernetes.</p>
</dd>
<dt class="hdlist1"><code>proxy-username</code></dt>
<dd>
<p>Proxy username.</p>
</dd>
<dt class="hdlist1"><code>proxy-password</code></dt>
<dd>
<p>Proxy password.</p>
</dd>
<dt class="hdlist1"><code>no-proxy</code></dt>
<dd>
<p>IP addresses or hosts to exclude from proxying</p>
</dd>
</dl>
</div>
<p class="">Or programmatically:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Dependent
public class KubernetesClientProducer {

    @Produces
    public KubernetesClient kubernetesClient() {
        Config config = new ConfigBuilder()
            .withMasterUrl("https://mymaster.com")
            .build();
        return new DefaultKubernetesClient(config);
    }
}</code></pre>
</div>
</div>
<p class="">And inject it on code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KubernetesClient client;

ServiceList myServices = client.services().list();

Service myservice = client.services()
        .inNamespace("default")
        .withName("myservice")
        .get();

CustomResourceDefinitionList crds = client
        .customResourceDefinitions()
        .list();

dummyCRD = new CustomResourceDefinitionBuilder()
        ...
        .build()
client.customResourceDefinitions()
        .create(dummyCRD);</code></pre>
</div>
</div>
<p class=""><strong>Testing</strong></p>
<p class="">Quarkus provides a Kubernetes Mock test resource that starts a mock of Kubernetes API server and sets the proper environment variables needed by Kubernetes Client.</p>
<p class="">Register next dependency: <code>io.quarkus:quarkus-test-kubernetes-client:test</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(KubernetesMockServerTestResource.class)
@QuarkusTest
public class KubernetesClientTest {

    @MockServer
    private KubernetesMockServer mockServer;

    @Test
    public void test() {
        final Pod pod1 = ...
        mockServer
            .expect()
            .get()
            .withPath("/api/v1/namespaces/test/pods")
            .andReturn(200,
                new PodListBuilder()
                .withNewMetadata()
                .withResourceVersion("1")
                .endMetadata()
                .withItems(pod1, pod2)
                .build())
            .always();
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_aws_lambda"><a class="anchor" href="#_aws_lambda"></a><a class="link" href="#_aws_lambda">AWS Lambda</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with Amazon Lambda.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-amazon-lambda"</code></pre>
</div>
</div>
<p class="">And then implement <code>com.amazonaws.services.lambda.runtime.RequestHandler</code> interface.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class TestLambda
        implements RequestHandler&lt;MyInput, MyOutput&gt; {
    @Override
    public MyInput handleRequest(MyOutput input,
                                    Context context) {
    }
}</code></pre>
</div>
</div>
<p class="">The interface <code>com.amazonaws.services.lambda.runtime.RequestStreamHandler</code> is also supported.</p>
<p class="">The interface <code>com.amazon.ask.SkillStreamHandler</code> is also supported.</p>
<p class="">You can set the handler name by using <code>quarkus.lambda.handler</code> property or by annotating the Lambda with the CDI <code>@Named</code> annotation.</p>
<p class=""><strong>Test</strong></p>
<p class="">You can write tests for Amazon lambdas:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-test-amazon-lambda&lt;/artifactId&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Test
public void testLambda() {
    MyInput in = new MyInput();
    in.setGreeting("Hello");
    in.setName("Stu");
    MyOutput out = LambdaClient.invoke(MyOutput.class, in);
}</code></pre>
</div>
</div>
<p class="">To scaffold a AWS Lambda run:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn archetype:generate \
    -DarchetypeGroupId=io.quarkus \
    -DarchetypeArtifactId=quarkus-amazon-lambda-archetype \
    -DarchetypeVersion={version}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_azure_functions"><a class="anchor" href="#_azure_functions"></a><a class="link" href="#_azure_functions">Azure Functions</a></h2>
<div class="sectionbody">
<p class="">Quarkus can make a microservice be deployable to the Azure Functions.</p>
<p class="">To scaffold a deployable microservice to the Azure Functions run:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn archetype:generate \
  -DarchetypeGroupId=io.quarkus \
  -DarchetypeArtifactId=quarkus-azure-functions-http-archetype \
  -DarchetypeVersion={version}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_funqy"><a class="anchor" href="#_funqy"></a><a class="link" href="#_funqy">Funqy</a></h2>
<div class="sectionbody">
<p class="">Quarkus Funqy is part of Quarkus’s serverless strategy and aims to provide a portable Java API to write functions deployable to various FaaS environments like AWS Lambda, Azure Functions, Knative, and Knative events.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class GreetingFunction {

    @Inject
    GreetingService service;

    @io.quarkus.funqy.Funq
    public String greet(String name) {}

    @io.quarkus.funqy.Funq("HelloCustomer")
    public String greet(Customer name) {}

    @Funq
    public Greeting greet(Friend friend,
        @io.quarkus.funqy.Context AwsContext ctx) {}
}</code></pre>
</div>
</div>
<p class="">In case of Amazon Lambda, only one Funqy function can be exported per Amazon Lambda deployment.
If there is only one method annotated with <code>@Funq</code> then no prob, if not, you need to set the function name with <code>quarkus.funqy.export</code> property.</p>
</div>
</div>
<div class="sect1">
<h2 id="_funqy_http"><a class="anchor" href="#_funqy_http"></a><a class="link" href="#_funqy_http">Funqy HTTP</a></h2>
<div class="sectionbody">
<p class="">You can invoke on Funqy functions in a pure HTTP environment with simple adding the Funqy HTTP extension.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-funqy-http&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_funqy_cloud_events"><a class="anchor" href="#_funqy_cloud_events"></a><a class="link" href="#_funqy_cloud_events">Funqy Cloud Events</a></h2>
<div class="sectionbody">
<p class="">Add the extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-funqy-knative-events&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Funq
public String defaultChain(String input) {}</code></pre>
</div>
</div>
<p class="">The Cloud Event type that triggers the function is <code>defaultChain</code>.
It generates a response that triggers a new Cloud Event whose type is <code>defaultChain.output</code> and the event source is <code>defaultChain</code>.</p>
<p class="">It can be changed by using the next properties:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.funqy.knative-events.mapping.defaultChain.trigger=configChain.output
quarkus.funqy.knative-events.mapping.defaultChain.response-type=annotated
quarkus.funqy.knative-events.mapping.defaultChain.response-source=configChain</code></pre>
</div>
</div>
<p class="">The properties are of form: <code>quarkus.funqy.knative-events.mapping.{function name}.</code>.</p>
<p class="">Also can be overriden with <code>@io.quarkus.funqy.knative.events.CloudEventMapping</code> annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Funq
@CloudEventMapping(trigger = "annotated", responseSource = "annotated", responseType = "lastChainLink")
public String annotatedChain(String input) {}</code></pre>
</div>
</div>
<p class=""><code>responseType</code> chains <code>annotatedChain</code> response to <code>lastChainLink</code> function.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Funq
public void lastChainLink(String input,
            @Context io.quarkus.funqy.knative.events.CloudEvent event) {}</code></pre>
</div>
</div>
<p class="">A K-Native Trigger looks like:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">apiVersion: eventing.knative.dev/v1alpha1
kind: Trigger
metadata:
  name: defaultchain
spec:
  filter:
    attributes:
      type: defaultChain
  subscriber:
    ref:
      apiVersion: serving.knative.dev/v1
      kind: Service
      name: funqy-knative-events-quickstart</code></pre>
</div>
</div>
<p class="">And to <code>curl</code> from inside the Kubernetes cluster:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash-shell" class="language-bash-shell hljs">curl -v "http://default-broker.knativetutorial.svc.cluster.local" \
-X POST \
-H "Ce-Id: 1234" \
-H "Ce-Specversion: 1.0" \
-H "Ce-Type: defaultChain" \
-H "Ce-Source: curl" \
-H "Content-Type: application/json" \
-d '"Start"'</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_apache_camel"><a class="anchor" href="#_apache_camel"></a><a class="link" href="#_apache_camel">Apache Camel</a></h2>
<div class="sectionbody">
<p class="">Apache Camel Quarkus has its own site: <a href="https://github.com/apache/camel-quarkus" class="bare">https://github.com/apache/camel-quarkus</a></p>
</div>
</div>
<div class="sect1">
<h2 id="_websockets"><a class="anchor" href="#_websockets"></a><a class="link" href="#_websockets">WebSockets</a></h2>
<div class="sectionbody">
<p class="">Quarkus can be used to handling web sockets.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-websockets"</code></pre>
</div>
</div>
<p class="">And web sockets classes can be used:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ServerEndpoint("/chat/{username}")
@ApplicationScoped
public class ChatSocket {

    @OnOpen
    public void onOpen(Session session,
                @PathParam("username") String username) {}

    @OnClose
    public void onClose(..) {}

    @OnError
    public void onError(..., Throwable throwable) {}

    @OnMessage
    public void onMessage(...) {}

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_openapi"><a class="anchor" href="#_openapi"></a><a class="link" href="#_openapi">OpenAPI</a></h2>
<div class="sectionbody">
<p class="">Quarkus can expose its API description as <a href="https://swagger.io/specification/" target="_blank" rel="noopener">OpenAPI</a> spec and test it using <a href="https://swagger.io/tools/swagger-ui/" target="_blank" rel="noopener">Swagger UI</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-openapi"</code></pre>
</div>
</div>
<p class="">Then you only need to access to <code>/openapi</code> to get OpenAPI v3 spec of services.</p>
<p class="">You can update the OpenApi path by setting <code>quarkus.smallrye-openapi.path</code> property.</p>
<p class="">Also, in case of starting Quarkus application in <code>dev</code> or <code>test</code> mode, Swagger UI is accessible at <code>/swagger-ui</code>.
If you want to use it in production mode you need to set <code>quarkus.swagger-ui.always-include</code> property to <code>true</code>.</p>
<p class="">You can update the Swagger UI path by setting <code>quarkus.swagger-ui.path</code> property.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.swagger-ui.path=/my-custom-path</code></pre>
</div>
</div>
<p class="">Possible Swagger UI options with <code>quarkus.swagger-ui</code> prefix:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>urls</code></dt>
<dd>
<p>The urls that will be included as options. (ie <code>quarkus.swagger-ui.urls.petstore=https://petstore.swagger.io/v2/swagger.json</code>)</p>
</dd>
<dt class="hdlist1"><code>urls-primary-name</code></dt>
<dd>
<p>If urls option is used, this will be the name of the default selection.</p>
</dd>
<dt class="hdlist1"><code>title</code></dt>
<dd>
<p>The html title for the page.</p>
</dd>
<dt class="hdlist1"><code>theme</code></dt>
<dd>
<p>Swagger UI theme to be used.</p>
</dd>
<dt class="hdlist1"><code>footer</code></dt>
<dd>
<p>A footer for the html page. Nothing by default.</p>
</dd>
<dt class="hdlist1"><code>deep-linking</code></dt>
<dd>
<p>Enables deep linking for tags and operations.</p>
</dd>
<dt class="hdlist1"><code>display-operation-id</code></dt>
<dd>
<p>Controls the display of operationId in operations list.</p>
</dd>
<dt class="hdlist1"><code>default-models-expand-depth</code></dt>
<dd>
<p>The default expansion depth for models.</p>
</dd>
<dt class="hdlist1"><code>default-model-expand-depth</code></dt>
<dd>
<p>The default expansion depth for the model on the model-example section.</p>
</dd>
<dt class="hdlist1"><code>default-model-rendering</code></dt>
<dd>
<p>Controls how the model is shown when the API is first rendered.</p>
</dd>
<dt class="hdlist1"><code>display-request-duration</code></dt>
<dd>
<p>Controls the display of the request duration (in milliseconds) for "Try it out" requests.</p>
</dd>
<dt class="hdlist1"><code>doc-expansion</code></dt>
<dd>
<p>Controls the default expansion setting for the operations and tags.</p>
</dd>
<dt class="hdlist1"><code>filter</code></dt>
<dd>
<p>Enables filtering.</p>
</dd>
<dt class="hdlist1"><code>max-displayed-tags</code></dt>
<dd>
<p>Limits the number of tagged operations displayed to at most this many.</p>
</dd>
<dt class="hdlist1"><code>operations-sorter</code></dt>
<dd>
<p>Apply a sort to the operation list of each API. (<code>alpha</code>, <code>method</code>, <code>function</code>)</p>
</dd>
<dt class="hdlist1"><code>show-extensions</code></dt>
<dd>
<p>Controls the display of vendor extension.</p>
</dd>
<dt class="hdlist1"><code>show-common-extensions</code></dt>
<dd>
<p>Controls the display of extensions.</p>
</dd>
<dt class="hdlist1"><code>tag-sorter</code></dt>
<dd>
<p>Apply a sort to the tag list of each API.</p>
</dd>
<dt class="hdlist1"><code>on-complete</code></dt>
<dd>
<p>Provides a mechanism to be notified when Swagger UI has finished rendering a newly provided definition.</p>
</dd>
<dt class="hdlist1"><code>syntax-highlight</code></dt>
<dd>
<p>Set to false to deactivate syntax highlighting of payloads and cURL command.</p>
</dd>
<dt class="hdlist1"><code>oauth2-redirect-url</code></dt>
<dd>
<p>OAuth redirect URL.</p>
</dd>
<dt class="hdlist1"><code>request-interceptor</code></dt>
<dd>
<p>Function to intercept remote definition, "Try it out", and OAuth 2.0 requests.</p>
</dd>
<dt class="hdlist1"><code>request-curl-options</code></dt>
<dd>
<p>Array of command line options available to the curl command.</p>
</dd>
<dt class="hdlist1"><code>response-interceptor</code></dt>
<dd>
<p>Function to intercept remote definition, "Try it out", and OAuth 2.0 responses.</p>
</dd>
<dt class="hdlist1"><code>show-mutated-request</code></dt>
<dd>
<p>Uses the mutated request returned from a requestInterceptor to produce the curl command in the UI.</p>
</dd>
<dt class="hdlist1"><code>supported-submit-methods</code></dt>
<dd>
<p>List of HTTP methods that have the "Try it out" feature enabled.</p>
</dd>
<dt class="hdlist1"><code>validator-url</code></dt>
<dd>
<p>Swagger UI attempts to validate specs against swagger.io&#8217;s online validator.</p>
</dd>
<dt class="hdlist1"><code>with-credentials</code></dt>
<dd>
<p>Enables passing credentials, as defined in the Fetch standard, in CORS requests that are sent by the browser.</p>
</dd>
<dt class="hdlist1"><code>model-property-macro</code></dt>
<dd>
<p>Function to set default values to each property in model.</p>
</dd>
<dt class="hdlist1"><code>parameter-macro</code></dt>
<dd>
<p>Function to set default value to parameters.</p>
</dd>
<dt class="hdlist1"><code>persist-authorization</code></dt>
<dd>
<p>It persists authorization data and it would not be lost on browser close/refresh.</p>
</dd>
<dt class="hdlist1"><code>layout</code></dt>
<dd>
<p>The name of a component available via the plugin system to use as the top-level layout for Swagger UI.</p>
</dd>
<dt class="hdlist1"><code>plugins</code></dt>
<dd>
<p>A list of plugin functions to use in Swagger UI.</p>
</dd>
<dt class="hdlist1"><code>presets</code></dt>
<dd>
<p>A list of presets to use in Swagger UI.</p>
</dd>
</dl>
</div>
<p class="">You can customize the output by using Open API v3 annotations.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Schema(name="Developers",
        description="POJO that represents a developer.")
public class Developer {
    @Schema(required = true, example = "Alex")
    private String name;
}

@POST
@Path("/developer")
@Operation(summary = "Create deeloper",
           description = "Only be done by admin.")
public Response createDeveloper(
        @RequestBody(description = "Developer object",
            required = true,
            content = @Content(schema =
            @Schema(implementation = Developer.class)))
                Developer developer)</code></pre>
</div>
</div>
<p class="">All possible annotations can be seen at <a href="https://github.com/eclipse/microprofile-open-api/tree/master/api/src/main/java/org/eclipse/microprofile/openapi/annotations" target="_blank" rel="noopener">org.eclipse.microprofile.openapi.annotations</a> package.</p>
<p class="">You can also serve OpenAPI Schema from static files instead of dynamically generated from annotation scanning.</p>
<p class="">You need to put OpenAPIdocumentation under <code>META-INF</code> directory (ie: <code>META-INF/openapi.yaml</code>).</p>
<p class="">A request to <code>/openapi</code> will serve the combined OpenAPI document from the static file and the generated from annotations.
You can disable the scanning documents by adding the next configuration property: <code>mp.openapi.scan.disable=true</code>.</p>
<p class="">Other valid document paths are: <code>META-INF/openapi.yml</code>, <code>META-INF/openapi.json</code>, <code>WEB-INF/classes/META-INF/openapi.yml</code>, <code>WEB-INF/classes/META-INF/openapi.yaml</code>, <code>WEB-INF/classes/META-INF/openapi.json</code>.</p>
<p class="">You can store generated OpenAPI schema if <code>quarkus.swagger-ui.store-schema-directory</code> is set.</p>
<p class="">Possible OpenAPI options with <code>quarkus.smallrye-openapi</code> prefix:</p>
<div class="dlist">
<dl>
<dt class="hdlist1">path</dt>
<dd>
<p>The path at which to register the OpenAPI Servlet. (default: <code>openapi</code>)</p>
</dd>
<dt class="hdlist1">store-schema-directory</dt>
<dd>
<p>The generated OpenAPI schema documents will be stored here on build.</p>
</dd>
<dt class="hdlist1">security-scheme</dt>
<dd>
<p>Add a certain SecurityScheme with config. (<code>basic</code>, <code>jwt</code>, <code>oidc</code>, <code>oauth2Implicit</code>)</p>
</dd>
<dt class="hdlist1">security-scheme-name</dt>
<dd>
<p>Add a Security Scheme name to the generated OpenAPI document. (default: <code>SecurityScheme</code>)</p>
</dd>
<dt class="hdlist1">security-scheme-description</dt>
<dd>
<p>Add a description to the Security Scheme. (default: <code>Authentication</code>)</p>
</dd>
<dt class="hdlist1">basic-security-scheme-value</dt>
<dd>
<p>Add a scheme value to the Basic HTTP Security Scheme. (default: <code>basic</code>)</p>
</dd>
<dt class="hdlist1">jwt-security-scheme-value</dt>
<dd>
<p>Add a scheme value to the JWT Security Scheme. (default: <code>bearer</code>)</p>
</dd>
<dt class="hdlist1">jwt-bearer-format</dt>
<dd>
<p>Add a bearer format to the JWT Security Scheme. (default: <code>JWT</code>)</p>
</dd>
<dt class="hdlist1">oidc-open-id-connect-url</dt>
<dd>
<p>Add a openIdConnectUrl value to the OIDC Security Scheme</p>
</dd>
<dt class="hdlist1">oauth2-implicit-refresh-url</dt>
<dd>
<p>Add a implicit flow refreshUrl value to the OAuth2 Security Scheme</p>
</dd>
<dt class="hdlist1">oauth2-implicit-authorization-url</dt>
<dd>
<p>Add an implicit flow authorizationUrl value to the OAuth2 Security Scheme</p>
</dd>
<dt class="hdlist1">oauth2-implicit-token-url</dt>
<dd>
<p>Add an implicit flow tokenUrl value to the OAuth2 Security Scheme</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mail_sender"><a class="anchor" href="#_mail_sender"></a><a class="link" href="#_mail_sender">Mail Sender</a></h2>
<div class="sectionbody">
<p class="">You can send emails by using Quarkus Mailer extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-mailer"</code></pre>
</div>
</div>
<p class="">You can inject two possible classes <code>io.quarkus.mailer.Mailer</code> for synchronous API or <code>io.quarkus.mailer.reactive.ReactiveMailer</code> for asynchronous/reactive API.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Mailer mailer;</code></pre>
</div>
</div>
<p class="">And then you can use them to send an email:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">mailer.send(
    Mail.withText("to@acme.org", "Subject", "Body")
);</code></pre>
</div>
</div>
<p class=""><strong>Reactive Mail client</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
ReactiveMailer reactiveMailer;

CompletionStage&lt;Response&gt; stage =
    reactiveMailer.send(
        Mail.withText("to@acme.org", "Subject", "Body")
    )
    .subscribeAsCompletionStage()
    .thenApply(x -&gt; Response.accepted().build());</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
If you are using <code>quarkus-resteasy-mutiny</code>, you can return <code>io.smallrye.mutiny.Uni</code> type.
</td>
</tr>
</table>
</div>
<p class=""><code>Mail</code> class contains methods to add <code>cc</code>, <code>bcc</code>, <code>headers</code>, <code>bounce address</code>, <code>reply to</code>, <code>attachments</code>, <code>inline attachments</code> and <code>html body</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">mailer.send(Mail.withHtml("to@acme.org", "Subject", body)
      .addInlineAttachment("quarkus.png",
            new File("quarkus.png"),
            "image/png", "&lt;my-image@quarkus.io&gt;"));</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
If you need deep control you can inject Vert.x mail client <code>@Inject  MailClient client;</code>
</td>
</tr>
</table>
</div>
<p class="">You need to configure SMTP properties to be able to send an email:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mailer.from=test@quarkus.io
quarkus.mailer.host=smtp.sendgrid.net
quarkus.mailer.port=465
quarkus.mailer.ssl=true
quarkus.mailer.username=....
quarkus.mailer.password=....</code></pre>
</div>
</div>
<p class="">List of Mailer parameters.
<code>quarkus.</code> as a prefix is skipped in the next table.</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.from</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Default address.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.mock</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">false in <code>prod</code>, true in <code>dev</code> and <code>test</code>.</p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emails not sent, just printed and stored in a <code>MockMailbox</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.bounce-address</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.host</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><em>mandatory</em></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.port</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.username</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.password</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.ssl</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables SSL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.trust-all</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust all certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.max-pool-size</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max open connections .</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.own-host-name</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Hostname for <code>HELO/EHLO</code> and <code>Message-ID</code></p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.keep-alive</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection pool enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.disable-esmtp</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>false</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable ESMTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.start-tls</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>OPTIONAL</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">TLS security mode. <code>DISABLED</code>, <code>OPTIONAL</code>, <code>REQUIRED</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.login</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>NONE</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Login mode. <code>NONE</code>, <code>OPTIONAL</code>, <code>REQUIRED</code>.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.auth-methods</code></p></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All methods.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Space-separated list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.key-store</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path of the key store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>mailer.key-store-password</code></p></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key store password.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
if you enable SSL for the mailer and you want to build a native executable, you will need to enable the SSL support <code>quarkus.ssl.native=true</code>.
</td>
</tr>
</table>
</div>
<p class=""><strong>Testing</strong></p>
<p class="">If <code>quarkus.mailer.mock</code> is set to <code>true</code>, which is the default value in <code>dev</code> and <code>test</code> mode, you can inject <code>MockMailbox</code> to get the sent messages.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MockMailbox mailbox;

@BeforeEach
void init() {
    mailbox.clear();
}

List&lt;Mail&gt; sent = mailbox
                    .getMessagesSentTo("to@acme.org");</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scheduled_tasks"><a class="anchor" href="#_scheduled_tasks"></a><a class="link" href="#_scheduled_tasks">Scheduled Tasks</a></h2>
<div class="sectionbody">
<p class="">You can schedule periodic tasks with Quarkus.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CounterBean {

    @Scheduled(every="10s", delayed="1s")
    void increment() {}

    @Scheduled(cron="0 15 10 * * ?")
    void morningTask() {}
}</code></pre>
</div>
</div>
<p class=""><code>every</code> and <code>cron</code> parameters can be surrounded with <code>{}</code> and the value is used as config property to get the value.</p>
<div class="listingblock">
<div class="content">
<pre>@Scheduled(cron = "{morning.check.cron.expr}")
void morningTask() {}</pre>
</div>
</div>
<p class="">And configure the property into <code>application.properties</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">morning.check.cron.expr=0 15 10 * * ?</code></pre>
</div>
</div>
<p class="">By default Quarkus expresion is used, but you can change that by setting <code>quarkus.scheduler.cron-type</code> property.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.scheduler.cron-type=unix</code></pre>
</div>
</div>
<p class=""><code>org.quartz.Scheduler</code> can be injected as any other bean and scehdule jobs programmatically.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.quartz.Scheduler quartz;

quartz.scheduleJob(job, trigger);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kogito"><a class="anchor" href="#_kogito"></a><a class="link" href="#_kogito">Kogito</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="http://www.kiegroup.org/" target="_blank" rel="noopener">Kogito</a>, a next-generation business automation toolkit from Drools and jBPM projects for adding business automation capabilities.</p>
<p class="">To start using it you only need to add the next extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="kogito"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_apache_tika"><a class="anchor" href="#_apache_tika"></a><a class="link" href="#_apache_tika">Apache Tika</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://tika.apache.org/" target="_blank" rel="noopener">Apache Tika</a> to detect and extract metadata/text from different file types:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-tika"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
io.quarkus.tika.TikaParser parser;

@POST
@Path("/text")
@Consumes({ "text/plain", "application/pdf",
            "application/vnd.oasis.opendocument.text" })
@Produces(MediaType.TEXT_PLAIN)
public String extractText(InputStream stream) {
    return parser.parse(stream).getText();
}</code></pre>
</div>
</div>
<p class="">You can configure Apache Tika in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tika.tika-config-path</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tika-config.xml</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">Path to the Tika configuration resource.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>quarkus.tika.parsers</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">CSV of the abbreviated or full parser class to be loaded by the extension.</p></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>tika.append-embedded-content</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class=""><code>true</code></p></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><p class="">The document may have other embedded documents. Set if autmatically append.</p></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_jgit"><a class="anchor" href="#_jgit"></a><a class="link" href="#_jgit">JGit</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.eclipse.org/jgit/" target="_blank" rel="noopener">JGit</a> to integrate with Git repositories:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-jgit"</code></pre>
</div>
</div>
<p class="">And then you can start using JGit:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">try (Git git = Git.cloneRepository()
                  .setDirectory(tmpDir)
                  .setURI(url)
                  .call()) {
    return tmpDir.toString();
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
When running in native mode, make sure to configure SSL access correctly <code>quarkus.ssl.native=true</code> (<a href="https://quarkus.io/guides/native-and-ssl-guide" target="_blank" rel="noopener">Native and SSL</a>).
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_web_resources"><a class="anchor" href="#_web_resources"></a><a class="link" href="#_web_resources">Web Resources</a></h2>
<div class="sectionbody">
<p class="">You can serve web resources with Quarkus.
You need to place web resources at <code>src/main/resources/META-INF/resources</code> and then they are accessible (ie <a href="http://localhost:8080/index.html" class="bare">http://localhost:8080/index.html</a>)</p>
<p class="">By default static resources as served under the root context.
You can change this by using <code>quarkus.http.root-path</code> property.</p>
</div>
</div>
<div class="sect1">
<h2 id="_transactional_memory"><a class="anchor" href="#_transactional_memory"></a><a class="link" href="#_transactional_memory">Transactional Memory</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with the Software Transactional Memory (STM) implementation provided by the <a href="https://narayana.io/docs/project/index.html">Narayana</a> project.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="narayana-stm"</code></pre>
</div>
</div>
<p class="">Transactional objects must be interfaces and annotated with <code>org.jboss.stm.annotations.Transactional</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
@NestedTopLevel
public interface FlightService {
    int getNumberOfBookings();
    void makeBooking(String details);
}</code></pre>
</div>
</div>
<p class="">The pessimistic strategy is the default one, you can change to optimistic by using <code>@Optimistic</code>.</p>
<p class="">Then you need to create the object inside <code>org.jboss.stm.Container</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Container&lt;FlightService&gt; container = new Container&lt;&gt;();
FlightServiceImpl instance = new FlightServiceImpl();
FlightService flightServiceProxy = container.create(instance);</code></pre>
</div>
</div>
<p class="">The implementation of the service sets the locking and what needs to be saved/restored:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.jboss.stm.annotations.ReadLock;
import org.jboss.stm.annotations.State;
import org.jboss.stm.annotations.WriteLock;

public class FlightServiceImpl
    implements FlightService {
    @State
    private int numberOfBookings;

    @ReadLock
    public int getNumberOfBookings() {
        return numberOfBookings;
    }

    @WriteLock
    public void makeBooking(String details) {
        numberOfBookings += 1;
    }
}</code></pre>
</div>
</div>
<p class="">Any member is saved/restored automatically (<code>@State</code> is not mandatory).
You can use <code>@NotState</code> to avoid behaviour.</p>
<p class=""><strong>Transaction boundaries</strong></p>
<p class=""><em>Declarative</em></p>
<div class="ulist">
<ul>
<li>
<p><code>@NestedTopLevel</code>: Defines that the container will create a new top-level transaction for each method invocation.</p>
</li>
<li>
<p><code>@Nested</code>: Defines that the container will create a new top-level or nested transaction for each method invocation.</p>
</li>
</ul>
</div>
<p class=""><em>Programmatically</em></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">AtomicAction aa = new AtomicAction();

aa.begin();
{
    try {
        flightService.makeBooking("BA123 ...");
        taxiService.makeBooking("East Coast Taxis ...");

        aa.commit();
    } catch (Exception e) {
        aa.abort();
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_quartz"><a class="anchor" href="#_quartz"></a><a class="link" href="#_quartz">Quartz</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="http://www.quartz-scheduler.org/">Quartz</a>  to schedule periodic clustered tasks.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quartz"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class TaskBean {

    @Transactional
    @Scheduled(every = "10s")
    void schedule() {
        Task task = new Task();
        task.persist();
    }
}</code></pre>
</div>
</div>
<p class="">To configure in clustered mode vida DataSource:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="application.properties" class="language-application.properties hljs">quarkus.datasource.url=jdbc:postgresql://localhost/quarkus_test
quarkus.datasource.driver=org.postgresql.Driver
# ...

quarkus.quartz.clustered=true
quarkus.quartz.store-type=db</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon icon-important">
<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="exclamation-circle" class="svg-inline--fa fa-exclamation-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256c0 136.997-111.043 248-248 248S8 392.997 8 256C8 119.083 119.043 8 256 8s248 111.083 248 248zm-248 50c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"></path></svg>
</td>
<td class="content">
You need to define the datasource used by clustered mode and also import the database tables following the Quartz schema.
</td>
</tr>
</table>
</div>
<p class="">Quartz can be configured usinf the following properties with <code>quarkus.quartz</code> prefix:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>clustered</code></dt>
<dd>
<p>Enable cluster mode or not.</p>
</dd>
<dt class="hdlist1"><code>store-type</code></dt>
<dd>
<p>The type of store to use. Possible values: <code>ram</code>, <code>db</code> (default: <code>ram</code>)</p>
</dd>
<dt class="hdlist1"><code>datasource</code></dt>
<dd>
<p>The name of the datasource to use.</p>
</dd>
<dt class="hdlist1"><code>table-prefix</code></dt>
<dd>
<p>The prefix for quartz job store tables. (default: <code>QRTZ_</code>)</p>
</dd>
<dt class="hdlist1"><code>trigger-listeners.&lt;name&gt;.class</code></dt>
<dd>
<p>Class name for the trigger.</p>
</dd>
<dt class="hdlist1"><code>trigger-listeners.&lt;name&gt;.property-name</code></dt>
<dd>
<p>The properties passed to the class.</p>
</dd>
<dt class="hdlist1"><code>job-listeners.&lt;name&gt;.class</code></dt>
<dd>
<p>Class name for the job.</p>
</dd>
<dt class="hdlist1"><code>job-listeners.&lt;name&gt;.property-name</code></dt>
<dd>
<p>The properties passed to the class.</p>
</dd>
<dt class="hdlist1"><code>plugins.&lt;name&gt;.class</code></dt>
<dd>
<p>Class name for the plugin.</p>
</dd>
<dt class="hdlist1"><code>plugins.&lt;name&gt;.property-name</code></dt>
<dd>
<p>The properties passed to the class.</p>
</dd>
<dt class="hdlist1"><code>instance-name</code></dt>
<dd>
<p>The name of the Quartz instance. (default: <code>QuarkusQuartzScheduler</code>)</p>
</dd>
<dt class="hdlist1"><code>thread-count</code></dt>
<dd>
<p>The size of scheduler thread pool. (default: <code>25</code>)</p>
</dd>
<dt class="hdlist1"><code>thread-priority</code></dt>
<dd>
<p>Thread priority of worker threads in the pool. (default: <code>5</code>)</p>
</dd>
<dt class="hdlist1"><code>force-start</code></dt>
<dd>
<p>The scheduler will be started even if no scheduled business methods are found.</p>
</dd>
<dt class="hdlist1"><code>start-mode</code></dt>
<dd>
<p>Scheduler can be started in different modes: <code>normal</code>, <code>forced</code> or <code>halted</code>. (default: <code>normal</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_qute"><a class="anchor" href="#_qute"></a><a class="link" href="#_qute">Qute</a></h2>
<div class="sectionbody">
<p class="">Qute is a templating engine designed specifically to meet the Quarkus needs.
Templates should be placed by default at <code>src/main/resources/templates</code> aand subdirectories.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-qute"</code></pre>
</div>
</div>
<p class="">Templates can be defined in any format, in case of HTML:</p>
<div class="listingblock">
<div class="title">item.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{@org.acme.Item item}
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;{item.name}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{item.name ?: 'Unknown'}&lt;/h1&gt;
    &lt;h2&gt;{str:reverse('Hello')}&lt;/h2&gt;
    &lt;div&gt;Price: {item.price}&lt;/div&gt;
    {#if item.price &gt; 100}
    &lt;div&gt;Discounted Price: {item.discountedPrice}&lt;/div&gt;
    {/if}
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<p class="">First line is not mandatory but helps on doing property checks at compilation time.</p>
<p class="">Including templates passing parameters:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;Simple Include&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  {#include foo limit=10 /}
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<p class="">To render the template:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Item {
    public String name;
    public BigDecimal price;
}

@Inject
io.quarkus.qute.Template item;

@GET
@Path("{id}")
@Produces(MediaType.TEXT_HTML)
public TemplateInstance get(@PathParam("id") Integer id) {
    return item.data("item", service.findItem(id));
}

@TemplateExtension
static BigDecimal discountedPrice(Item item) {
    return item.price.multiply(new BigDecimal("0.9"));
}

@TemplateExtension(namespace = "str")
public static class StringExtensions {
  static String reverse(String val) {
      return new StringBuilder(val).reverse().toString();
  }
}</code></pre>
</div>
</div>
<p class="">If <code>@ResourcePath</code> is not used in <code>Template</code> then the name of the field is used as file name.
In this case the file should be <code>src/main/resources/templates/item.{}</code>.
Extension of the file is not required to be set.</p>
<p class=""><code>discountedPrice</code> is not a field of the POJO but a method call.
Method definition must be annotated with <code>@TemplateExtension</code> and be static method.
First parameter is used to match the base object (<code>Item</code>).
<code>@TemplateExtension</code> can be used at class level:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@TemplateExtension
public class MyExtensions {
    static BigDecimal discountedPrice(Item item) {
        return item.price.multiply(new BigDecimal("0.9"));
    }
}</code></pre>
</div>
</div>
<p class="">Methods with multiple parameters are supported too:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{item.discountedPrice(2)}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">static BigDecimal discountedPrice(Item item, int scale) {
    return item.price.multiply(scale);
}</code></pre>
</div>
</div>
<p class="">Qute <code>for</code> syntax supports any instance of <code>Iterable</code>, <code>Map.EntrySet</code>, <code>Stream</code> or <code>Integer</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{#for i in total}
  {i}:
{/for}</code></pre>
</div>
</div>
<p class="">The next map methods are supported:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{#for key in map.keySet}
{#for value in map.values}
{map.size}
{#if map.isEmpty}
{map['foo']</code></pre>
</div>
</div>
<p class="">The next list methods are supported:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{list[0]}</code></pre>
</div>
</div>
<p class="">The next number methods are supported:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{#if counter.mod(5) == 0}</code></pre>
</div>
</div>
<p class=""><strong>Switch/When</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{#switch person.name}
  {#case 'John'}
    Hey John!
  {#case 'Mary'}
    Hey Mary!
{/switch}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{#when items.size}
  {#is 1} <i class="conum" data-value="1"></i><b>(1)</b>
    There is exactly one item!
  {#is &gt; 10} <i class="conum" data-value="2"></i><b>(2)</b>
    There are more than 10 items!
  {#else} <i class="conum" data-value="3"></i><b>(3)</b>
    There are 2 -10 items!
{/when}</code></pre>
</div>
</div>
<p class="">Following operators can be used either in <code>when</code> and <code>switch</code>: <code>not, ne, !=</code>, <code>gt, &gt;</code>, <code>ge, &gt;=</code>, <code>lt, &lt;</code>, <code>le, &lt;=</code>, <code>in</code>, <code>ni, !in</code>.</p>
<p class=""><strong>Message Bundling</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@io.quarkus.qute.i18n.MessageBundle
public interface AppMessages {
    @io.quarkus.qute.i18n.Message("Hello {name}!")
    String hello_name(String name);
}</code></pre>
</div>
</div>
<p class="">There are 3 methods to inject the message:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">MessageBundles.get(AppMessages.class).hello_name("Lucie");</code></pre>
</div>
</div>
<p class="">or</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject AppMessages app;

app.hello_name("Lucie");</code></pre>
</div>
</div>
<p class="">or</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">&lt;p&gt;{msg:hello_name('Lucie')}&lt;/p&gt;</code></pre>
</div>
</div>
<p class=""><strong>Localization</strong></p>
<p class="">There are two ways to set localized message:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@io.quarkus.qute.i18n.Localized("de")
public interface GermanAppMessages {

    @Override
    @io.quarkus.qute.i18n.Message("Hallo {name}!")
    String hello_name(String name);
}</code></pre>
</div>
</div>
<p class="">or</p>
<div class="listingblock">
<div class="title">msg_de.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">hello_name=Hallo {name}!</code></pre>
</div>
</div>
<p class="">You can render programmaticaly the templates too:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">// file located at src/main/resources/templates/reports/v1/report_01.{}
@ResourcePath("reports/v1/report_01")
Template report;

String output = report
    .data("samples", service.get())
    .render();</code></pre>
</div>
</div>
<p class=""><strong>Value Resolvers</strong></p>
<p class="">Value resolvers are invoked when evaluating expressions.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">void configureEngine(@Observes EngineBuilder builder) {
  builder.addValueResolver(ValueResolver.builder()
      .appliesTo(ctx -&gt; ctx.getBase() instanceof Long &amp;&amp; ctx.getName().equals("tenTimes"))
      .resolveSync(ctx -&gt; (Long) ctx.getBase() * 10)
      .build());
}</code></pre>
</div>
</div>
<p class=""><strong>Content Filters</strong></p>
<p class="">Content filters can be used to modify the template contents before parsing.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">void configureEngine(@Observes EngineBuilder builder) {
  builder.addParserHook(new ParserHook() {
      @Override
      public void beforeParsing(ParserHelper parserHelper) {
          parserHelper.addContentFilter(contents -&gt; contents.replace("${", "$\\{"));
      }
  });
}</code></pre>
</div>
</div>
<p class=""><strong>Reactive and Async</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">CompletionStage&lt;String&gt; async = report.renderAsync();
Multi&lt;String&gt; publisher = report.createMulti();

Uni&lt;String&gt; content = io.smallrye.mutiny.Uni.createFrom()
                            .completionStage(() -&gt; report.renderAsync());</code></pre>
</div>
</div>
<p class=""><strong>Qute Mail Integration</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MailTemplate hello;

CompletionStage&lt;Void&gt; c = hello.to("to@acme.org")
     .subject("Hello from Qute template")
     .data("name", "John")
     .send();</code></pre>
</div>
</div>
<p class="">INFO: Template located at <code>src/main/resources/templates/hello.[html|txt]</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_sentry"><a class="anchor" href="#_sentry"></a><a class="link" href="#_sentry">Sentry</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://sentry.io">Sentry</a> for logging errors into an error monitoring system.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-sentry"</code></pre>
</div>
</div>
<p class="">And the configuration to send all errors occuring in the package <code>org.example</code> to Sentrty with DSN <code><a href="https://abcd@sentry.io/1234" class="bare">https://abcd@sentry.io/1234</a></code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.log.sentry=true
quarkus.log.sentry.dsn=https://abcd@sentry.io/1234
quarkus.log.sentry.level=ERROR
quarkus.log.sentry.in-app-packages=org.example</code></pre>
</div>
</div>
<p class="">Full list of configuration properties having  <code>quarkus.log</code> as prefix:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>sentry.enable</code></dt>
<dd>
<p>Enable the Sentry logging extension (default: false)</p>
</dd>
<dt class="hdlist1"><code>sentry.dsn</code></dt>
<dd>
<p>Where to send events.</p>
</dd>
<dt class="hdlist1"><code>sentry.level</code></dt>
<dd>
<p>Log level (default: <code>WARN</code>)</p>
</dd>
<dt class="hdlist1"><code>sentry.server-name</code></dt>
<dd>
<p>Sets the server name that will be sent with each event.</p>
</dd>
<dt class="hdlist1"><code>sentry.in-app-packages</code></dt>
<dd>
<p>Configure which package prefixes your application uses.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jsch"><a class="anchor" href="#_jsch"></a><a class="link" href="#_jsch">JSch</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="http://www.jcraft.com/jsch/">Jsch</a> for SSH communication.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-jsch"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">JSch jsch = new JSch();
Session session = jsch.getSession(null, host, port);
session.setConfig("StrictHostKeyChecking", "no");
session.connect();</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cache"><a class="anchor" href="#_cache"></a><a class="link" href="#_cache">Cache</a></h2>
<div class="sectionbody">
<p class="">Quarkus can cache method calls by using as key the tuple (method + arguments).</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="cache"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@io.quarkus.cache.CacheResult(cacheName = "weather-cache")
public String getDailyForecast(LocalDate date, String city) {}</code></pre>
</div>
</div>
<p class=""><code>@CacheInvalidate</code> removes the element represented by the calculated cache key from cache.
<code>@CacheInvalidateAll</code> removes all entries from the cache.
<code>@CacheKey</code> to specifically set the arguments to be used as key instead of all.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CachedBean {

    @CacheResult(cacheName = "foo")
    public Object load(Object key) {}

    @CacheInvalidate(cacheName = "foo")
    public void invalidate(Object key) {}

    @CacheInvalidateAll(cacheName = "foo")
    public void invalidateAll() {}
}</code></pre>
</div>
</div>
<p class="">You can disable the caching system by setting <code>quarkus.cache.enabled</code> property to <code>false</code>.</p>
<p class="">This extension uses <a href="https://github.com/ben-manes/caffeine">Caffeine</a> as its underlying caching provider.</p>
<p class="">Each cache can be configured individually:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.cache.caffeine."foo".initial-capacity=10
quarkus.cache.caffeine."foo".maximum-size=20
quarkus.cache.caffeine."foo".expire-after-write
quarkus.cache.caffeine."bar".maximum-size=1000</code></pre>
</div>
</div>
<p class="">Full list of configuration properties having  <code>quarkus.cache.caffeine.[cache-name]</code> as prefix:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>initial-capacity</code></dt>
<dd>
<p>Minimum total size for the internal data structures.</p>
</dd>
<dt class="hdlist1"><code>maximum-size</code></dt>
<dd>
<p>Maximum number of entries the cache may contain.</p>
</dd>
<dt class="hdlist1"><code>expire-after-write</code></dt>
<dd>
<p>Specifies that each entry should be automatically removed from the cache once a fixed duration has elapsed after the entry&#8217;s creation, or last write.</p>
</dd>
<dt class="hdlist1"><code>expire-after-access</code></dt>
<dd>
<p>Specifies that each entry should be automatically removed from the cache once a fixed duration has elapsed after the entry&#8217;s creation, or last write.</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
You can multiple cache annotations on a single method.
</td>
</tr>
</table>
</div>
<p class="">If you see a <code>javax.enterprise.context.ContextNotActiveException</code>, you need to add the <code>quarkus-smallrye-context-propagation</code> extension.</p>
</div>
</div>
<div class="sect1">
<h2 id="_banner"><a class="anchor" href="#_banner"></a><a class="link" href="#_banner">Banner</a></h2>
<div class="sectionbody">
<p class="">Banner is printed by default.
It is not an extension but placed in the core.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>quarkus.banner.path</code></dt>
<dd>
<p>Path is relative to root of the classpath. (default: <code>default_banner.txt</code>)</p>
</dd>
<dt class="hdlist1"><code>quarkus.banner.enabled</code></dt>
<dd>
<p>Enables banner. (default : <code>true</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_optaplanner"><a class="anchor" href="#_optaplanner"></a><a class="link" href="#_optaplanner">OptaPlanner</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates with <a href="https://www.optaplanner.org/">OptaPlanner</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-optaplanner, quarkus-optaplanner-jackson"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PlanningSolution
public class TimeTable {
}

@Inject
private SolverManager&lt;TimeTable, UUID&gt; solverManager;

UUID problemId = UUID.randomUUID();
SolverJob&lt;TimeTable, UUID&gt; solverJob = solverManager.solve(problemId, problem);
TimeTable solution = solverJob.getFinalBestSolution();</code></pre>
</div>
</div>
<p class="">Possible configuration options prefixed with <code>quarkus.optaplanner</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>solver-config-xml</code></dt>
<dd>
<p>A classpath resource to read the solver configuration XML. Not mandatory.</p>
</dd>
<dt class="hdlist1"><code>solver.environment-mode</code></dt>
<dd>
<p>Enable runtime assertions to detect common bugs in your implementation during development. Possible values: <code>FAST_ASSERT</code>, <code>FULL_ASSERT</code>, <code>NON_INTRUSIVE_FULL_ASSERT</code>, <code>NON_REPRODUCIBLE</code>, <code>REPRODUCIBLE</code>. (default: <code>REPRODUCIBLE</code>)</p>
</dd>
<dt class="hdlist1"><code>solver.move-thread-count</code></dt>
<dd>
<p>Enable multithreaded solving for a single problem. Possible values: <code>MOVE_THREAD_COUNT_NONE</code>, <code>MOVE_THREAD_COUNT_AUTO</code>, a number or formula based on the available processors. (default: <code>MOVE_THREAD_COUNT_NONE</code>)</p>
</dd>
<dt class="hdlist1"><code>solver.termination.spent-limit</code></dt>
<dd>
<p>How long the solver can run. (ie <code>5s</code>)</p>
</dd>
<dt class="hdlist1"><code>solver.termination.unimproved-spent-limit</code></dt>
<dd>
<p>How long the solver can run without finding a new best solution after finding a new best solution. (ie <code>2h</code>)</p>
</dd>
<dt class="hdlist1"><code>solver.termination.best-score-limit</code></dt>
<dd>
<p>Terminates the solver when a specific or higher score has been reached. (ie <code>0hard/-1000soft</code>)</p>
</dd>
<dt class="hdlist1"><code>solver-manager.parallel-solver-count</code></dt>
<dd>
<p>The number of solvers that run in parallel. (default: <code>PARALLEL_SOLVER_COUNT_AUTO</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_context_propagation"><a class="anchor" href="#_context_propagation"></a><a class="link" href="#_context_propagation">Context Propagation</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-smallrye-context-propagation"</code></pre>
</div>
</div>
<p class="">If using <code>mutiny</code> extension together you already get context propagation for ArC, RESTEasy and transactions.
With <code>CompletionStage</code> you need to:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject ThreadContext threadContext;
@Inject ManagedExecutor managedExecutor;

threadContext.withContextCapture(..)
             .thenApplyAsync(r -&gt; {}, managedExecutor);</code></pre>
</div>
</div>
<p class="">If you are going to use security in a reactive environment you will likely need Smallrye Content Propagation to propagate the identity throughout the reactive callback.</p>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_from_hasicorp_consul"><a class="anchor" href="#_configuration_from_hasicorp_consul"></a><a class="link" href="#_configuration_from_hasicorp_consul">Configuration from HasiCorp Consul</a></h2>
<div class="sectionbody">
<p class="">You can read runtime configuration from HashiCorp Consul.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="consul-config"</code></pre>
</div>
</div>
<p class="">You need to configure Consul:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.consul-config.enabled=true
quarkus.consul-config.agent.host-port=localhost:8500
quarkus.consul-config.properties-value-keys=config/consul-test</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "greeting.message")
String message;</code></pre>
</div>
</div>
<p class="">In Consul:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">"Key": "config/consul-test",
"Value": "greeting.message=Hello from Consul"</code></pre>
</div>
</div>
<p class="">Possible configuration parameters, prefixed with <code>quarkus.consul-config</code>:</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>enabled</code></dt>
<dd>
<p>The application will attempt to look up the configuration from Consul. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>prefix</code></dt>
<dd>
<p>Common prefix that all keys share when looking up the keys from Consul.
The prefix is <strong>not</strong> included in the keys of the user configuration</p>
</dd>
<dt class="hdlist1">raw-value-keys</dt>
<dd>
<p>Keys whose value is a raw string.
The keys that end up in the user configuration are the keys specified her with '/' replaced by '.'</p>
</dd>
<dt class="hdlist1"><code>properties-value-keys</code></dt>
<dd>
<p>Keys whose value represents a properties-like file conttent.</p>
</dd>
<dt class="hdlist1"><code>fail-on-missing-key</code></dt>
<dd>
<p>If the application will not start if any of the configured config sources cannot be located. (default: <code>true</code>)</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>trust-store</code></dt>
<dd>
<p>TrustStore to be used containing the SSL certificate used by Consul agent.</p>
</dd>
<dt class="hdlist1"><code>trust-store-password</code></dt>
<dd>
<p>Password of TrustStore to be used containing the SSL certificate used by Consul agent.</p>
</dd>
<dt class="hdlist1"><code>key-password</code></dt>
<dd>
<p>Password to recover key from KeyStore for SSL client authentication with Consul agent.</p>
</dd>
<dt class="hdlist1"><code>agent.host-port</code></dt>
<dd>
<p>Consul agent host. (default: <code>localhost:8500</code>)</p>
</dd>
<dt class="hdlist1"><code>agent.use-https</code></dt>
<dd>
<p>Use HTTPS when communicating with the agent. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>agent.token</code></dt>
<dd>
<p>Consul token to be provided when authentication is enabled.</p>
</dd>
<dt class="hdlist1"><code>agent.key-store</code></dt>
<dd>
<p>KeyStore (classpath or filesystem) to be used containing the SSL certificate used by Consul agent.</p>
</dd>
<dt class="hdlist1"><code>agent.key-store-password</code></dt>
<dd>
<p>Password of KeyStore.</p>
</dd>
<dt class="hdlist1"><code>agent.trust-certs</code></dt>
<dd>
<p>To trust all certificates or not.</p>
</dd>
<dt class="hdlist1"><code>agent.connection-timeout</code></dt>
<dd>
<p>Connection timeout. (default: <code>10S</code>)</p>
</dd>
<dt class="hdlist1"><code>agent.read-timeout</code></dt>
<dd>
<p>Reading timeout. (default: <code>60S</code>)</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_alexa"><a class="anchor" href="#_amazon_alexa"></a><a class="link" href="#_amazon_alexa">Amazon Alexa</a></h2>
<div class="sectionbody">
<p class="">You can use Amazon Alexa by adding the extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-amazon-alexa"</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_webjar_locator"><a class="anchor" href="#_webjar_locator"></a><a class="link" href="#_webjar_locator">WebJar Locator</a></h2>
<div class="sectionbody">
<p class="">To change how you can refer to webjars skipping the version part you can use WebJars locator extension.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="webjars-locator"</code></pre>
</div>
</div>
<p class="">Then the JavaScript location is changed from <code>/webjars/jquery/3.1.1/jquery.min.js</code> to <code>/webjars/jquery/jquery.min.js</code> in your HTML files.</p>
</div>
</div>
<div class="sect1">
<h2 id="_amazon_ses"><a class="anchor" href="#_amazon_ses"></a><a class="link" href="#_amazon_ses">Amazon SES</a></h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="amazon-ses"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
software.amazon.awssdk.services.ses.SesClient sesClient;

@Inject
software.amazon.awssdk.services.ses.SesAsyncClient sesClient;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.ses.endpoint-override=http://localhost:8012
quarkus.ses.aws.region=us-east-1
quarkus.ses.aws.credentials.type=static
quarkus.ses.aws.credentials.static-provider.access-key-id=test-key
quarkus.ses.aws.credentials.static-provider.secret-access-key=test-secret</code></pre>
</div>
</div>
<p class="">You need to set a HTTP client either <code>URL Connection</code>:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;url-connection-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">or Apache HTTP:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;apache-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.ses.sync-client.type=apache</code></pre>
</div>
</div>
<p class="">Or async:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;
    &lt;artifactId&gt;netty-nio-client&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<p class="">Configuration properties are the same as <a href="#_amazon_dynamodb">Amazon DynamoDB</a> but changing the prefix from <code>dynamodb</code> to <code>ses</code>.</p>
</div>
</div>
<div class="sect1">
<h2 id="_jbang"><a class="anchor" href="#_jbang"></a><a class="link" href="#_jbang">Jbang</a></h2>
<div class="sectionbody">
<p class="">Creating an initial script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">jbang scripting/quarkusapp.java</code></pre>
</div>
</div>
<p class="">Adding Quarkus dependencies in script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">//DEPS io.quarkus:quarkus-resteasy:{quarkus-version}</code></pre>
</div>
</div>
<p class="">Put some Quarkus CLI code:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/hello")
@ApplicationScoped
public class quarkusapp {
    @GET
    public String sayHello() {
        return "hello";
    }
    public static void main(String[] args) {
        Quarkus.run(args);
    }
}</code></pre>
</div>
</div>
<p class="">To run the script:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">jbang quarkusapp.java</code></pre>
</div>
</div>
<p class="">A Maven goal is provided to scaffold a project:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn io.quarkus:quarkus-maven-plugin:&lt;version&gt;:create-jbang</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_di"><a class="anchor" href="#_spring_di"></a><a class="link" href="#_spring_di">Spring DI</a></h2>
<div class="sectionbody">
<p class="">Quarkus provides a compatibility layer for Spring dependency injection.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-di"</code></pre>
</div>
</div>
<p class="">Some examples of what you can do.
Notice that annotations are the Spring original ones.</p>
<div class="listingblock">
<div class="content">
<pre>@Configuration
public class AppConfiguration {

    @Bean(name = "capitalizeFunction")
    public StringFunction capitalizer() {
        return String::toUpperCase;
    }
}</pre>
</div>
</div>
<p class="">Or as a component:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component("noopFunction")
public class NoOpSingleStringFunction
    implements StringFunction {
}</code></pre>
</div>
</div>
<p class="">Also as a service and injection properties from <code>application.properties</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Service
public class MessageProducer {

    @Value("${greeting.message}")
    String message;

}</code></pre>
</div>
</div>
<p class="">And you can inject using <code>Autowired</code> or constructor in a component and in a JAX-RS resource too.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component
public class GreeterBean {

    private final MessageProducer messageProducer;

    @Autowired @Qualifier("noopFunction")
    StringFunction noopStringFunction;

    public GreeterBean(MessageProducer messageProducer) {
        this.messageProducer = messageProducer;
    }
}</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_boot_configuration"><a class="anchor" href="#_spring_boot_configuration"></a><a class="link" href="#_spring_boot_configuration">Spring Boot Configuration</a></h2>
<div class="sectionbody">
<p class="">Quarkus provides a compatibility layer for Spring Boot <code>ConfigurationProperties</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-boot-properties"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigurationProperties("example")
public final class ClassProperties {

    private String value;
    private AnotherClass anotherClass;

    // getters/setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">example.value=class-value
example.anotherClass.value=true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_cloud_config_client"><a class="anchor" href="#_spring_cloud_config_client"></a><a class="link" href="#_spring_cloud_config_client">Spring Cloud Config Client</a></h2>
<div class="sectionbody">
<p class="">Quarkus integrates <a href="https://cloud.spring.io/spring-cloud-config/multi/multi__spring_cloud_config_client.html">Spring Cloud Config Client</a> and MicroProfile Config spec.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-cloud-config-client"</code></pre>
</div>
</div>
<p class="">You need to configure the extension:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.spring-cloud-config.uri=http://localhost:8089
quarkus.spring-cloud-config.username=user
quarkus.spring-cloud-config.password=pass
quarkus.spring-cloud-config.enabled=true</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "greeting.message")
String greeting;</code></pre>
</div>
</div>
<p class="">Prefix is <code>quarkus.spring-cloud-config</code>.</p>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>uri</code></dt>
<dd>
<p>Base URI where the Spring Cloud Config Server is available. (default: <code>localhost:8888</code>)</p>
</dd>
<dt class="hdlist1"><code>username</code></dt>
<dd>
<p>Username to be used if the Config Server has BASIC Auth enabled.</p>
</dd>
<dt class="hdlist1"><code>password</code></dt>
<dd>
<p>Password to be used if the Config Server has BASIC Auth enabled.</p>
</dd>
<dt class="hdlist1"><code>enabled</code></dt>
<dd>
<p>Enables read configuration from Spring Cloud Config Server. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>fail-fast</code></dt>
<dd>
<p>True to not start application if cannot access to the server. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>connection-timeout</code></dt>
<dd>
<p>The amount of time to wait when initially establishing a connection before giving up and timing out. (default: <code>10S</code>)</p>
</dd>
<dt class="hdlist1"><code>read-timeout</code></dt>
<dd>
<p>The amount of time to wait for a read on a socket before an exception is thrown. (default: <code>60S</code>)</p>
</dd>
<dt class="hdlist1"><code>label</code></dt>
<dd>
<p>The label to be used to pull remote configuration properties.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_web"><a class="anchor" href="#_spring_web"></a><a class="link" href="#_spring_web">Spring Web</a></h2>
<div class="sectionbody">
<p class="">Quarkus provides a compatibility layer for Spring Web.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-web"</code></pre>
</div>
</div>
<p class="">Specifically supports the REST related features.
Notice that infrastructure things like <code>BeanPostProcessor</code> will not be executed.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RestController
@RequestMapping("/greeting")
public class GreetingController {

    private final GreetingBean greetingBean;

    public GreetingController(GreetingBean greetingBean) {
        this.greetingBean = greetingBean;
    }

    @GetMapping("/{name}")
    public Greeting hello(@PathVariable(name = "name")
                            String name) {
        return new Greeting(greetingBean.greet(name));
    }
}</code></pre>
</div>
</div>
<p class="">Supported annotations are: <code>RestController</code>, <code>RequestMapping</code>, <code>GetMapping</code>, <code>PostMapping</code>, <code>PutMapping</code>, <code>DeleteMapping</code>, <code>PatchMapping</code>, <code>RequestParam</code>, <code>RequestHeader</code>, <code>MatrixVariable</code>, <code>PathVariable</code>, <code>CookieValue</code>, <code>RequestBody</code>, <code>ResponseStatus</code>, <code>ExceptionHandler</code> and <code>RestControllerAdvice</code>.</p>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon icon-tip">
<span class="fa-layers"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle" class="svg-inline--fa fa-circle fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8z"></path></svg><svg aria-hidden="true" focusable="false" data-prefix="far" data-icon="lightbulb" class="svg-inline--fa fa-lightbulb fa-w-11" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 352 512" style="transform-origin: 0.34375em 0.5em;"><g transform="translate(176 256)"><g transform="translate(0, 0)  scale(0.625, 0.625)  rotate(0 0 0)"><path fill="currentColor" d="M176 80c-52.94 0-96 43.06-96 96 0 8.84 7.16 16 16 16s16-7.16 16-16c0-35.3 28.72-64 64-64 8.84 0 16-7.16 16-16s-7.16-16-16-16zM96.06 459.17c0 3.15.93 6.22 2.68 8.84l24.51 36.84c2.97 4.46 7.97 7.14 13.32 7.14h78.85c5.36 0 10.36-2.68 13.32-7.14l24.51-36.84c1.74-2.62 2.67-5.7 2.68-8.84l.05-43.18H96.02l.04 43.18zM176 0C73.72 0 0 82.97 0 176c0 44.37 16.45 84.85 43.56 115.78 16.64 18.99 42.74 58.8 52.42 92.16v.06h48v-.12c-.01-4.77-.72-9.51-2.15-14.07-5.59-17.81-22.82-64.77-62.17-109.67-20.54-23.43-31.52-53.15-31.61-84.14-.2-73.64 59.67-128 127.95-128 70.58 0 128 57.42 128 128 0 30.97-11.24 60.85-31.65 84.14-39.11 44.61-56.42 91.47-62.1 109.46a47.507 47.507 0 0 0-2.22 14.3v.1h48v-.05c9.68-33.37 35.78-73.18 52.42-92.16C335.55 260.85 352 220.37 352 176 352 78.8 273.2 0 176 0z" transform="translate(-176 -256)"></path></g></g></svg></span>
</td>
<td class="content">
If you scaffold the project with <code>spring-web</code> extension, then Spring Web annotations are sed in the generated project. <code>mvn io.quarkus:quarkus-maven-plugin:1.13.0.Final:create &#8230;&#8203; -Dextensions="spring-web"</code>.
</td>
</tr>
</table>
</div>
<p class="">The next return types are supported: <code>org.springframework.http.ResponseEntity</code> and <code>java.util.Map</code>.</p>
<p class="">The next parameter types are supported: An <code>Exception</code> argument and <code>ServletRequest</code>/<code>HttpServletRequest</code> (adding <code>quarkus-undertow</code> dependency).</p>
</div>
</div>
<div class="sect1">
<h2 id="_spring_data_jpa"><a class="anchor" href="#_spring_data_jpa"></a><a class="link" href="#_spring_data_jpa">Spring Data JPA</a></h2>
<div class="sectionbody">
<p class="">While users are encouraged to use Hibernate ORM with Panache for Relational Database access, Quarkus provides a compatibility layer for <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/" target="_blank" rel="noopener">Spring Data JPA</a> repositories.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-data-jpa"</code></pre>
</div>
</div>
<p class="">INFO: Of course you still need to add the JDBC driver, and configure it in <code>application.properties</code>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface FruitRepository
        extends CrudRepository&lt;Fruit, Long&gt; {
    List&lt;Fruit&gt; findByColor(String color);
}</code></pre>
</div>
</div>
<p class="">And then you can inject it either as shown in <a href="#_spring_di">Spring DI</a> or in <a href="#_spring_web">Spring Web</a>.</p>
<p class="">Interfaces supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>org.springframework.data.repository.Repository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.CrudRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.PagingAndSortingRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.jpa.repository.JpaRepository</code>.</p>
</li>
</ul>
</div>
<p class="">INFO: Generated repositories are automatically annotated with <code>@Transactional</code>.</p>
<p class="">Repository fragments is also supported:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface PersonRepository
    extends JpaRepository&lt;Person, Long&gt;, PersonFragment {

    void makeNameUpperCase(Person person);
}</code></pre>
</div>
</div>
<p class="">User defined queries:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Query("select m from Movie m where m.rating = ?1")
Iterator&lt;Movie&gt; findByRating(String rating);

@Modifying
@Query("delete from Movie where rating = :rating")
void deleteByRating(@Param("rating") String rating);

@Query(value = "SELECT COUNT(*), publicationYear FROM Book GROUP BY publicationYear")
List&lt;BookCountByYear&gt; findAllByPublicationYear2();

interface BookCountByYear {
    int getPublicationYear();

    Long getCount();
}</code></pre>
</div>
</div>
<p class="">What is currently unsupported:</p>
<div class="ulist">
<ul>
<li>
<p>Methods of <code>org.springframework.data.repository.query.QueryByExampleExecutor</code></p>
</li>
<li>
<p>QueryDSL support</p>
</li>
<li>
<p>Customizing the base repository</p>
</li>
<li>
<p><code>java.util.concurrent.Future</code> as return type</p>
</li>
<li>
<p>Native and named queries when using <code>@Query</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_data_rest"><a class="anchor" href="#_spring_data_rest"></a><a class="link" href="#_spring_data_rest">Spring Data Rest</a></h2>
<div class="sectionbody">
<p class="">While users are encouraged to use REST Data with Panache for the REST data access endpoints generation, Quarkus provides a compatibility layer for Spring Data REST in the form of the <code>spring-data-rest</code> extension.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="spring-data-rest"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import java.util.Optional;
import org.springframework.data.repository.CrudRepository;
import org.springframework.data.rest.core.annotation.RepositoryRestResource;
import org.springframework.data.rest.core.annotation.RestResource;

@RepositoryRestResource(exported = false, path = "/my-fruits")
public interface FruitsRepository extends CrudRepository&lt;Fruit, Long&gt; {
    @RestResource(exported = true)
    Optional&lt;Fruit&gt; findById(Long id);
    @RestResource(exported = true)
    Iterable&lt;Fruit&gt; findAll();
}</code></pre>
</div>
</div>
<p class="">The <code>spring-data-jpa</code> extension will generate an implementation for this repository. Then the <code>spring-data-rest</code> extension will generate a REST CRUD resource for it.</p>
<p class="">The following interfaces are supported:</p>
<div class="ulist">
<ul>
<li>
<p><code>org.springframework.data.repository.CrudRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.PagingAndSortingRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.jpa.repository.JpaRepository</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_security"><a class="anchor" href="#_spring_security"></a><a class="link" href="#_spring_security">Spring Security</a></h2>
<div class="sectionbody">
<p class="">Quarkus provides a compatibility layer for <a href="https://spring.io/projects/spring-security" target="_blank" rel="noopener">Spring Security</a>.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="spring-security"</code></pre>
</div>
</div>
<p class="">You need to choose a security extension to define user, roles, &#8230;&#8203; such as <code>openid-connect</code>, <code>oauth2</code>, <code>properties-file</code> or <code>security-jdbc</code> as seen at <a href="#_rbac">RBAC</a>.</p>
<p class="">Then you can use Spring Security annotations to protect the methods:</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Secured("admin")
@GetMapping
public String hello() {
    return "hello";
}</code></pre>
</div>
</div>
<p class="">Quarkus provides support for some of the most used features of Spring Security’s <code>@PreAuthorize</code> annotation.</p>
<p class="">Some examples:</p>
<p class=""><strong>hasRole</strong></p>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("hasRole('admin')")</code></p>
</li>
<li>
<p><code>@PreAuthorize("hasRole(@roles.USER)")</code> where <code>roles</code> is a bean defined with <code>@Component</code> annotation and <code>USER</code> is a public field of the class.</p>
</li>
</ul>
</div>
<p class=""><strong>hasAnyRole</strong></p>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("hasAnyRole(@roles.USER, 'view')")</code></p>
</li>
</ul>
</div>
<p class=""><strong>Permit and Deny All</strong></p>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("permitAll()")</code></p>
</li>
<li>
<p><code>@PreAuthorize("denyAll()")</code></p>
</li>
</ul>
</div>
<p class=""><strong>Anonymous and Authenticated</strong></p>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("isAnonymous()")</code></p>
</li>
<li>
<p><code>@PreAuthorize("isAuthenticated()")</code></p>
</li>
</ul>
</div>
<p class=""><strong>Expressions</strong></p>
<div class="ulist">
<ul>
<li>
<p>Checks if the current logged in user is the same as the username method parameter:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("#person.name == authentication.principal.username")
public void doSomethingElse(Person person){}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Checks if calling a method if user can access:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("@personChecker.check(#person, authentication.principal.username)")
public void doSomething(Person person){}

@Component
public class PersonChecker {
    public boolean check(Person person, String username) {
        return person.getName().equals(username);
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Combining expressions:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("hasAnyRole('user', 'admin') AND #user == principal.username")
public void allowedForUser(String user) {}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_cache"><a class="anchor" href="#_spring_cache"></a><a class="link" href="#_spring_cache">Spring Cache</a></h2>
<div class="sectionbody">
<p class="">Quarkus provides a compatibility layer for Spring dependency injection.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="spring-cache"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@org.springframework.cache.annotation.Cacheable("someCache")
public Greeting greet(String name) {}</code></pre>
</div>
</div>
<p class="">Quarkus provides compatibility with the following Spring Cache annotations:</p>
<div class="ulist">
<ul>
<li>
<p><code>@Cacheable</code></p>
</li>
<li>
<p><code>@CachePut</code></p>
</li>
<li>
<p><code>@CacheEvict</code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_spring_schedule"><a class="anchor" href="#_spring_schedule"></a><a class="link" href="#_spring_schedule">Spring Schedule</a></h2>
<div class="sectionbody">
<p class="">Quarkus provides a compatibility layer for Spring Scheduled annotation.</p>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="spring-scheduled"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@org.springframework.scheduling.annotation.Scheduled(cron="*/5 * * * * ?")
void cronJob() {
    System.out.println("Cron expression hardcoded");
}

@Scheduled(fixedRate = 1000)
@Scheduled(cron = "{cron.expr}")</code></pre>
</div>
</div>
<div class="page-break"></div>
</div>
</div>
<div class="sect1">
<h2 id="_resources"><a class="anchor" href="#_resources"></a><a class="link" href="#_resources">Resources</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://quarkus.io/guides/" class="bare">https://quarkus.io/guides/</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/user/lordofthejars" class="bare">https://www.youtube.com/user/lordofthejars</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1 authors">
<h3>Authors :</h3>
<div class="author">
<div class="author-avatar"><img src="http://avatars.io/twitter/alexsotob"/></div>
<div class="author-name"><a href="https://twitter.com/alexsotob">@alexsotob</a></div>
<div class="author-bio">Java Champion and Director of DevExp at Red Hat</div>
</div>

<div class="author-bio">1.13.0.Final</div>
<img src="./redhat/assets/by-nc-sa.png"/>
</div>

</section>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>