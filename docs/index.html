<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.9">
<meta name="author" content="Alex Soto">
<title>Home of Quarkus Cheat-Sheet</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt,.quoteblock .quoteblock{margin:0 0 1.25em;padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>Home of Quarkus Cheat-Sheet</h1>
<div class="details">
<span id="author" class="author">Alex Soto</span><br>
<span id="email" class="email"><a href="https://twitter.com/alexsotob" class="bare">https://twitter.com/alexsotob</a></span><br>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><span class="icon"><i class="fa fa-file-pdf-o"></i></span> <a href="https://github.com/lordofthejars/quarkus-cheat-sheet/releases/download/1.0.13/quarkus-cheat-sheet.pdf">Download the Cheat-Sheet as PDF</a>.</p>
</div>
<div class="paragraph">
<p>Quarkus (<a href="https://quarkus.io/" class="bare">https://quarkus.io/</a>) is a Kubernetes Native Java stack tailored for GraalVM &amp; OpenJDK HotSpot, crafted from the best of breed Java libraries and standards.
Also focused on developer experience, making things just work with little to no configuration and allowing to do live coding.</p>
</div>
<div class="paragraph">
<p>In this page you can either read what has been added in each version of the cheat-sheet individually in <a href="#whatsnew">What&#8217;s New in Cheat-Sheet</a> section, see the full cheat-sheet as HTML <span class="icon"><i class="fa fa-html5"></i></span> <a href="#quarkuscheatsheet">Quarkus Cheat-Sheet</a> format or <span class="icon"><i class="fa fa-file-pdf-o"></i></span> <a href="https://github.com/lordofthejars/quarkus-cheat-sheet/releases/download/1.0.13/quarkus-cheat-sheet.pdf">download the full cheat-sheet as PDF</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="whatsnew"><a class="anchor" href="#whatsnew"></a><a class="link" href="#whatsnew">What&#8217;s New in Cheat-Sheet</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_version_1_2_0_final"><a class="anchor" href="#_version_1_2_0_final"></a><a class="link" href="#_version_1_2_0_final">Version 1.2.0.Final</a></h3>
<details>
<summary class="title">Qute Mail Integration</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MailTemplate hello;

CompletionStage&lt;Void&gt; c = hello.to("to@acme.org")
     .subject("Hello from Qute template")
     .data("name", "John")
     .send();</code></pre>
</div>
</div>
<div class="paragraph">
<p>INFO: Template located at <code>src/main/resources/templates/hello.[html|txt]</code>.</p>
</div>
</div>
</details>
<details>
<summary class="title">JSch</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="http://www.jcraft.com/jsch/">Jsch</a> for SSH communication.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-jsch"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">JSch jsch = new JSch();
Session session = jsch.getSession(null, host, port);
session.setConfig("StrictHostKeyChecking", "no");
session.connect();</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Spring Boot Configuration</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus provides a compatibility layer for Spring Boot <code>ConfigurationProperties</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-boot-properties"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigurationProperties("example")
public final class ClassProperties {

    private String value;
    private AnotherClass anotherClass;

    // getters/setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">example.value=class-value
example.anotherClass.value=true</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">GELF handler</summary>
<div class="content">
<div class="paragraph">
<p>You can configure the output to be in <em>GELF</em> format instead of plain text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-gelf"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>handler.gelf.enabled</code></dt>
<dd>
<p>Enable GELF logging handler (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.host</code></dt>
<dd>
<p>Hostname/IP of Logstash/Graylof. Prepend <code>tcp:</code> for using TCP protocol. (default: <code>udp:localhost</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.port</code></dt>
<dd>
<p>The port. (default: <code>12201</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.version</code></dt>
<dd>
<p>GELF version. (default: <code>1.1</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.extract-stack-trace</code></dt>
<dd>
<p>Post Stack-Trace to StackTrace field. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.stack-trace-throwable-reference</code></dt>
<dd>
<p>Gets the cause level to stack trace. <code>0</code> is fulls tack trace. (default: <code>0</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.filter-stack-trace</code></dt>
<dd>
<p>Stack-Trace filtering. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.timestamp-pattern</code></dt>
<dd>
<p>Java Date pattern. (default: <code>yyyy-MM-dd HH:mm:ss,SSS</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.level</code></dt>
<dd>
<p>Log level <code>java.util.logging.Level</code>. (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.facility</code></dt>
<dd>
<p>Name of the facility. (default: <code>jboss-logmanage</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.additional-field.&lt;field&gt;.&lt;subfield&gt;</code></dt>
<dd>
<p>Post additional fields. <code>quarkus.log.handler.gelf.additional-field.field1.type=String</code></p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Get Active Profile</summary>
<div class="content">
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To get the active profile programmatically use <code>io.quarkus.runtime.configuration.ProfileManager.getActiveProfile()</code>.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Flyway Validate on Migrate</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>validate-on-migrate</code></dt>
<dd>
<p>Validate the applied migrations against the available ones (default: <code>true</code>)</p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Appplication Name and Version available at Runtime</summary>
<div class="content">
<div class="paragraph">
<p>Special properties are set in <strong>prod</strong> mode: <code>quarkus.application.version</code> and <code>quarkus.application.name</code> to get them available at runtime.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "quarkus.application.name")
String applicationName;</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Qute Method Parameters</summary>
<div class="content">
<div class="paragraph">
<p><code>@TemplateExtension</code> can be used at class level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@TemplateExtension
public class MyExtensions {
    static BigDecimal discountedPrice(Item item) {
        return item.price.multiply(new BigDecimal("0.9"));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Methods with multiple parameters are supported too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{item.discountedPrice(2)}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">static BigDecimal discountedPrice(Item item, int scale) {
    return item.price.multiply(scale);
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Caching</summary>
<div class="content">
<div class="paragraph">
<p>Annotations to set Cache-Control headers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces(MediaType.APPLICATION_JSON)
@org.jboss.resteasy.annotations.cache.NoCache
public User me() {}

@Produces(MediaType.APPLICATION_JSON)
@org.jboss.resteasy.annotations.cache.Cache(
    maxAge = 2000,
    noStore = false
)
public User you() {}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">MongoDB Projections</summary>
<div class="content">
<div class="paragraph">
<p>Projection can be done for both PanacheQL and native queries.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import io.quarkus.mongodb.panache.ProjectionFor;

@ProjectionFor(Person.class) <i class="conum" data-value="1"></i><b>(1)</b>
public class PersonName {
    public String name;
}

PanacheQuery&lt;PersonName&gt; shortQuery = Person.find("status ", Status.Alive).project(PersonName.class);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Entity class.</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Config Naming Strategy</summary>
<div class="content">
<div class="paragraph">
<p>Naming strategy can be changed with property <code>namingStrategy</code>. <code>KEBAB_CASE</code> (whatever.foo-bar) or <code>VERBATIM</code> (whatever.fooBar).</p>
</div>
</div>
</details>
<details>
<summary class="title">Hibernate ORM Metrics</summary>
<div class="content">
<div class="paragraph">
<p><code>quarkus.hibernate-orm.metrics.enabled</code> set to <code>true</code> exposes Hibernate metrics under <code>vendor</code> scope.</p>
</div>
</div>
</details>
<details>
<summary class="title">Bean Validation and Localization</summary>
<div class="content">
<div class="paragraph">
<p>You can configure the based locale for validation messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.default-locale=ca-ES
# Supported locales resolved by Accept-Language
quarkus.locales=en-US,es-ES,fr-FR, ca_ES</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ValidationMessages_ca_ES.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">pattern.message=No conforme al patro</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Pattern(regexp = "A.*", message = "{pattern.message}")
private String name;</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Vault Transit Engine</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultTransitSecretEngine transit;

transit.encrypt("my_encryption", text);
transit.decrypt("my_encryption", text).asString();
transit.sign("my-sign-key", text);</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">JWT Generation API</summary>
<div class="content">
<div class="paragraph">
<p>JWT generation API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Jwt.claims()
    .issuer("https://server.com")
    .claim("customClaim", 3)
    .sign(createKey());

JwtSignatureBuilder jwtSignatureBuilder = Jwt.claims("/testJsonToken.json").jws();
jwtSignatureBuilder
     .signatureKeyId("some-key-id")
     .signatureAlgorithm(SignatureAlgorithm.ES256)
     .header("custom-header", "custom-value");
     .sign(createKey());

Jwt.claims("/testJsonToken.json")
    .encrypt(createKey());

JwtEncryptionBuilder jwtEncryptionBuilder = Jwt.claims("/testJsonToken.json").jwe();
jwtEncryptionBuilder
     .keyEncryptionKeyId("some-key-id")
      .keyEncryptionAlgorithm(KeyEncryptionAlgorithm.ECDH_ES_A256KW)
     .header("custom-header", "custom-value");
     .encrypt(createKey());

Jwt.claims("/testJsonToken.json")
  .innerSign(createKey());
  .encrypt(createKey());</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">JWT Properties</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>smallrye.jwt.token.header</code></dt>
<dd>
<p>Sets header such as <code>Cookie</code> is used to pass the token. (default: <code>Authorization</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.cookie</code></dt>
<dd>
<p>Name of the cookie containing a token.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.schemes</code></dt>
<dd>
<p>Comma-separated list containing an alternative single or multiple schemes. (default: <code>Bearer</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.require.named-principal</code></dt>
<dd>
<p>A token must have a upn or preferred_username or sub claim set if using <code>java.security.Principal</code>. <code>True</code> makes throw an exception if not set. (default: <code>false</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.sub</code></dt>
<dd>
<p>Path to the claim with subject name.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.claims.sub</code></dt>
<dd>
<p>Default sub claim value.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.groups</code></dt>
<dd>
<p>Path to the claim containing the groups.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.groups-separator</code></dt>
<dd>
<p>Separator for splitting a string which may contain multiple group values. (default. ` `).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.claims.groups</code></dt>
<dd>
<p>Default groups claim value.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.jwk.refresh-interval</code></dt>
<dd>
<p>JWK cache refresh interval in minutes. (default: <code>60</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.expiration.grace</code></dt>
<dd>
<p>Expiration grace in seconds. (default: <code>60</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.verify.audience</code></dt>
<dd>
<p>Comma separated list of the audiences that a token aud claim may contain.</p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Cache with Caffeine</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus can cache method calls by using as key the tuple (method + arguments).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="cache"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@io.quarkus.cache.CacheResult(cacheName = "weather-cache")
public String getDailyForecast(LocalDate date, String city) {}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@CacheInvalidate</code> removes the element represented by the calculated cache key from cache.
<code>@CacheInvalidateAll</code> removes all entries from the cache.
<code>@CacheKey</code> to specifically set the arguments to be used as key instead of all.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CachedBean {

    @CacheResult(cacheName = "foo")
    public Object load(Object key) {}

    @CacheInvalidate(cacheName = "foo")
    public void invalidate(Object key) {}

    @CacheInvalidateAll(cacheName = "foo")
    public void invalidateAll() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This extension uses <a href="https://github.com/ben-manes/caffeine">Caffeine</a> as its underlying caching provider.</p>
</div>
<div class="paragraph">
<p>Each cache can be configured individually:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.cache.caffeine."foo".initial-capacity=10
quarkus.cache.caffeine."foo".maximum-size=20
quarkus.cache.caffeine."foo".expire-after-write
quarkus.cache.caffeine."bar".maximum-size=1000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Full list of configuration properties having  <code>quarkus.cache.caffeine.[cache-name]</code> as prefix:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>initial-capacity</code></dt>
<dd>
<p>Minimum total size for the internal data structures.</p>
</dd>
<dt class="hdlist1"><code>maximum-size</code></dt>
<dd>
<p>Maximum number of entries the cache may contain.</p>
</dd>
<dt class="hdlist1"><code>expire-after-write</code></dt>
<dd>
<p>Specifies that each entry should be automatically removed from the cache once a fixed duration has elapsed after the entry&#8217;s creation, or last write.</p>
</dd>
<dt class="hdlist1"><code>expire-after-access</code></dt>
<dd>
<p>Specifies that each entry should be automatically removed from the cache once a fixed duration has elapsed after the entry&#8217;s creation, or last write.</p>
</dd>
</dl>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_1_1_0_final"><a class="anchor" href="#_version_1_1_0_final"></a><a class="link" href="#_version_1_1_0_final">Version 1.1.0.Final</a></h3>
<details>
<summary class="title">Panache and Optional</summary>
<div class="content">
<div class="dlist">
<dl>
<dt class="hdlist1"><code>findByIdOptional</code>:`Optional&lt;Object&gt;`</dt>
<dd>
<p>Returns object or <code>java.util.Optional</code>.</p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Quartz</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="http://www.quartz-scheduler.org/">Quartz</a>  to schedule periodic clustered tasks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quartz"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class TaskBean {

    @Transactional
    @Scheduled(every = "10s")
    void schedule() {
        Task task = new Task();
        task.persist();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To configure in clustered mode vida DataSource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="application.properties" class="language-application.properties hljs">quarkus.datasource.url=jdbc:postgresql://localhost/quarkus_test
quarkus.datasource.driver=org.postgresql.Driver
# ...

quarkus.quartz.clustered=true
quarkus.quartz.store-type=db</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You need to define the datasource used by clustered mode and also import the database tables following the Quartz schema.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Automatic Readiness Probes</summary>
<div class="content">
<div class="paragraph">
<p>Some default <em>readiness probes</em> are provided by default if any of the next features are added:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">datasource</dt>
<dd>
<p>A probe to check database connection status.</p>
</dd>
<dt class="hdlist1">kafka</dt>
<dd>
<p>A probe to check kafka connection status. In this case you need to enable manually by setting <code>quarkus.kafka.health.enabled</code> to <code>true</code>.</p>
</dd>
<dt class="hdlist1">mongoDB</dt>
<dd>
<p>A probe to check MongoDB connection status.</p>
</dd>
<dt class="hdlist1">neo4j</dt>
<dd>
<p>A probe to check Neo4J connection status.</p>
</dd>
<dt class="hdlist1">artemis</dt>
<dd>
<p>A probe to check Artemis JMS connection status.</p>
</dd>
<dt class="hdlist1">kafka-streams</dt>
<dd>
<p>Liveness (for stream state) and Readiness (topics created) probes.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can disable the automatic generation by setting <code>&lt;component&gt;.health.enabled</code> to false.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kafka-streams.health.enabled=false
quarkus.mongodb.health.enabled=false
quarkus.neo4j.health.enabled=false</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Kubernetes Deployment Targets</summary>
<div class="content">
<div class="paragraph">
<p>You can generate different resources setting the property <code>kubernetes.deployment.target</code>.</p>
</div>
<div class="paragraph">
<p>Possible values are <code>kubernetes</code>, <code>openshift</code> and <code>knative</code>.
The default value is <code>kubernetes</code>.</p>
</div>
</div>
</details>
<details>
<summary class="title">Quartz Expression Type</summary>
<div class="content">
<div class="paragraph">
<p>By default Quarkus expresion is used, but you can change that by setting <code>quarkus.scheduler.cron-type</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.scheduler.cron-type=unix</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Lock and Hint</summary>
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>find</code> methods defines a <code>withLock(LockModeType)</code> to define the lock type and <code>withHint(QueryHints.HINT_CACHEABLE, "true")</code> to define hints.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Flyway Multiple Datasource support</summary>
<div class="content">
<div class="paragraph">
<p>To use multiple datasource in Flyway you just need to add the datasource name just after the <code>flyway</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.users.url=jdbc:h2:tcp://localhost/mem:users
quarkus.datasource.inventory.url=jdbc:h2:tcp://localhost/mem:inventory
# ...

quarkus.flyway.users.schemas=USERS_TEST_SCHEMA
quarkus.flyway.inventory.schemas=INVENTORY_TEST_SCHEMA
# ...</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Qute Template engine</summary>
<div class="content">
<div class="paragraph">
<p>Qute is a templating engine designed specifically to meet the Quarkus needs.
Templates should be placed by default at <code>src/main/resources/templates</code> aand subdirectories.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-qute"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Templates can be defined in any format, in case of HTML:</p>
</div>
<div class="listingblock">
<div class="title">item.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{@org.acme.Item item}
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;{item.name}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{item.name}&lt;/h1&gt;
    &lt;div&gt;Price: {item.price}&lt;/div&gt;
    {#if item.price &gt; 100}
    &lt;div&gt;Discounted Price: {item.discountedPrice}&lt;/div&gt;
    {/if}
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>First line is not mandatory but helps on doing property checks at compilation time.</p>
</div>
<div class="paragraph">
<p>To render the template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Item {
    public String name;
    public BigDecimal price;
}

@Inject
io.quarkus.qute.Template item;

@GET
@Path("{id}")
@Produces(MediaType.TEXT_HTML)
public TemplateInstance get(@PathParam("id") Integer id) {
    return item.data("item", service.findItem(id));
}

@TemplateExtension
static BigDecimal discountedPrice(Item item) {
    return item.price.multiply(new BigDecimal("0.9"));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>@ResourcePath</code> is not used in <code>Template</code> then the name of the field is used as file name.
In this case the file should be <code>src/main/resources/templates/item.{}</code>.
Extension of the file is not required to be set.</p>
</div>
<div class="paragraph">
<p><code>discountedPrice</code> is not a field of the POJO but a method call.
Method definition must be annotated with <code>@TemplateExtension</code> and be static method.
First parameter is used to match the base object (<code>Item</code>).
<code>@TemplateExtension</code> can be used at class level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@TemplateExtension
public class MyExtensions {
    static BigDecimal discountedPrice(Item item) {
        return item.price.multiply(new BigDecimal("0.9"));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Methods with multiple parameters are supported too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{item.discountedPrice(2)}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">static BigDecimal discountedPrice(Item item, int scale) {
    return item.price.multiply(scale);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can render programmaticaly the templates too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">// file located at src/main/resources/templates/reports/v1/report_01.{}
@ResourcePath("reports/v1/report_01")
Template report;

String output = report
    .data("samples", service.get())
    .render();</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">JSON Logging Format</summary>
<div class="content">
<div class="paragraph">
<p>You can configure the output to be in <em>JSON</em> format instead of plain text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-json"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the configuration values are prefix with <code>quarkus.log</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>json</code></dt>
<dd>
<p>JSON logging is enabled (default: true).</p>
</dd>
<dt class="hdlist1"><code>json.pretty-print</code></dt>
<dd>
<p>JSON output is "pretty-printed" (default: false)</p>
</dd>
<dt class="hdlist1"><code>json.date-format</code></dt>
<dd>
<p>Specify the date format to use (default: the default format)</p>
</dd>
<dt class="hdlist1"><code>json.record-delimiter</code></dt>
<dd>
<p>Record delimiter to add (default: no delimiter)</p>
</dd>
<dt class="hdlist1"><code>json.zone-id</code></dt>
<dd>
<p>The time zone ID</p>
</dd>
<dt class="hdlist1"><code>json.exception-output-type</code></dt>
<dd>
<p>The exception output type: <code>detailed</code>, <code>formatted</code>, <code>detailed-and-formatted</code> (default: <code>detailed</code>)</p>
</dd>
<dt class="hdlist1"><code>json.print-details</code></dt>
<dd>
<p>Detailed caller information should be logged (default: false)</p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Sentry Logging</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://sentry.io">Sentry</a> for logging errors into an error monitoring system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-sentry"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the configuration to send all errors occuring in the package <code>org.example</code> to Sentrty with DSN <code><a href="https://abcd@sentry.io/1234" class="bare">https://abcd@sentry.io/1234</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.log.sentry=true
quarkus.log.sentry.dsn=https://abcd@sentry.io/1234
quarkus.log.sentry.level=ERROR
quarkus.log.sentry.in-app-packages=org.example</code></pre>
</div>
</div>
<div class="paragraph">
<p>Full list of configuration properties having  <code>quarkus.log</code> as prefix:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>sentry.enable</code></dt>
<dd>
<p>Enable the Sentry logging extension (default: false)</p>
</dd>
<dt class="hdlist1"><code>sentry.dsn</code></dt>
<dd>
<p>Where to send events.</p>
</dd>
<dt class="hdlist1"><code>sentry.level</code></dt>
<dd>
<p>Log level (default: <code>WARN</code>)</p>
</dd>
<dt class="hdlist1"><code>sentry.in-app-packages</code></dt>
<dd>
<p>Configure which package prefixes your application uses.</p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Spring Security</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus provides a compatibility layer for <a href="https://spring.io/projects/spring-security" target="_blank" rel="noopener">Spring Security</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="spring-security"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to choose a security extension to define user, roles, &#8230;&#8203; such as <code>openid-connect</code>, <code>oauth2</code>, <code>properties-file</code> or <code>security-jdbc</code> as seen at <a href="#_rbac">RBAC</a>.</p>
</div>
<div class="paragraph">
<p>Then you can use Spring Security annotations to protect the methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Secured("admin")
@GetMapping
public String hello() {
    return "hello";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus provides support for some of the most used features of Spring Security’s <code>@PreAuthorize</code> annotation.</p>
</div>
<div class="paragraph">
<p>Some examples:</p>
</div>
<div class="paragraph">
<p><strong>hasRole</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("hasRole('admin')")</code></p>
</li>
<li>
<p><code>@PreAuthorize("hasRole(@roles.USER)")</code> where <code>roles</code> is a bean defined with <code>@Component</code> annotation and <code>USER</code> is a public field of the class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>hasAnyRole</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("hasAnyRole(@roles.USER, 'view')")</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Permit and Deny All</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("permitAll()")</code></p>
</li>
<li>
<p><code>@PreAuthorize("denyAll()")</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Anonymous and Authenticated</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("isAnonymous()")</code></p>
</li>
<li>
<p><code>@PreAuthorize("isAuthenticated()")</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Expressions</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Checks if the current logged in user is the same as the username method parameter:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("#person.name == authentication.principal.username")
public void doSomethingElse(Person person){}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Checks if calling a method if user can access:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("@personChecker.check(#person, authentication.principal.username)")
public void doSomething(Person person){}

@Component
public class PersonChecker {
    public boolean check(Person person, String username) {
        return person.getName().equals(username);
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Combining expressions:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("hasAnyRole('user', 'admin') AND #user == principal.username")
public void allowedForUser(String user) {}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">YAML Config</summary>
<div class="content">
<div class="paragraph">
<p>YAML configuration is also supported.
The configuration file is called <code>application.yaml</code> and you need to register a dependency to enable its support:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-config-yaml&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">quarkus:
  datasource:
    url: jdbc:postgresql://localhost:5432/some-database
    driver: org.postgresql.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or with profiles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">"%dev":
  quarkus:
    datasource:
      url: jdbc:postgresql://localhost:5432/some-database
      driver: org.postgresql.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of subkeys <code>~</code> is used to refer to the unprefixed part.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">quarkus:
  http:
    cors:
      ~: true
      methods: GET,PUT,POST</code></pre>
</div>
</div>
<div class="paragraph">
<p>Is equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.cors=true
quarkus.http.cors.methods=GET,PUT,POST</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_1_0_0_cr2"><a class="anchor" href="#_version_1_0_0_cr2"></a><a class="link" href="#_version_1_0_0_cr2">Version 1.0.0.CR2</a></h3>
<details>
<summary class="title">HTTP Form Auth</summary>
<div class="content">
<div class="paragraph">
<p>HTTP form auth is enabled by the <code>quarkus.http.auth.form.enabled=true</code> property.</p>
</div>
</div>
</details>
<details>
<summary class="title">Alter RBAC behaviour</summary>
<div class="content">
<div class="paragraph">
<p>To alter RBAC behaviour there are two configuration properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.deny-unannotated=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.jaxrs.deny-uncovered</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true denies by default to all JAX-RS endpoints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.security.deny-unannotated</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true denies by default all CDI methods and JAX-RS endpoints.</p></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">Tuning generated Kubernetes resouces</summary>
<div class="content">
<div class="paragraph">
<p>Also, you can customize the generated resource by setting the new values in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">kubernetes.replicas=3

kubernetes.labels[0].key=foo
kubernetes.labels[0].value=bar

kubernetes.readiness-probe.period-seconds=45

docker.registry=quay.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>All possible values are explained at <a href="https://quarkus.io/guides/kubernetes#configuration-options" class="bare">https://quarkus.io/guides/kubernetes#configuration-options</a>.</p>
</div>
</div>
</details>
<details>
<summary class="title">HTTPS Rest Client</summary>
<div class="content">
<div class="paragraph">
<p><strong>SSL</strong></p>
</div>
<div class="paragraph">
<p>You can configure Rest Client key stores.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/trustStore=
    classpath:/store.jks
org.acme.quickstart.WorldClockService/mp-rest/trustStorePassword=
    supersecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible configuration properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>%s/mp-rest/trustStore</code></dt>
<dd>
<p>Trust store location defined with <code>classpath:</code> or <code>file:</code> prefix.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/trustStorePassword</code></dt>
<dd>
<p>Trust store password.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/trustStoreType</code></dt>
<dd>
<p>Trust store type (default: <code>JKS</code>)</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/hostnameVerifier</code></dt>
<dd>
<p>Custom hostname verifier class name.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStore</code></dt>
<dd>
<p>Key store location defined with <code>classpath:</code> or <code>file:</code> prefix.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStorePassword</code></dt>
<dd>
<p>Key store password.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStoreType</code></dt>
<dd>
<p>Key store type (default: <code>JKS</code>)</p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Timeout Rest Client</summary>
<div class="content">
<div class="paragraph">
<p><strong>Timeout</strong></p>
</div>
<div class="paragraph">
<p>You can define the timeout of the Rest Client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/connectTimeout=
    1000
org.acme.quickstart.WorldClockService/mp-rest/readTimeout=
    2000</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Select Container Runtime</summary>
<div class="content">
<div class="paragraph">
<p>You can use <code>quarkus.native.container-runtime</code> to select the container runtime to use.
Now <code>docker</code> (default) and <code>podman</code> are the valid options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw package -Pnative -Dquarkus.native.container-runtime=podman</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Spring Web supported types</summary>
<div class="content">
<div class="paragraph">
<p>The next return types are supported: <code>org.springframework.http.ResponseEntity</code> and <code>java.util.Map</code>.</p>
</div>
<div class="paragraph">
<p>The next parameter types are supported: An <code>Exception</code> argument and <code>ServletRequest</code>/<code>HttpServletRequest</code> (adding <code>quarkus-undertow</code> dependency).</p>
</div>
</div>
</details>
<details>
<summary class="title">AWS Lambda Archetype</summary>
<div class="content">
<div class="paragraph">
<p>To scaffold a AWS Lambda run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn archetype:generate \
    -DarchetypeGroupId=io.quarkus \
    -DarchetypeArtifactId=quarkus-amazon-lambda-archetype \
    -DarchetypeVersion={version}</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_26_0"><a class="anchor" href="#_version_0_26_0"></a><a class="link" href="#_version_0_26_0">Version 0.26.0</a></h3>
<details>
<summary class="title">JAX-RS over Vert.X</summary>
<div class="content">
<div class="paragraph">
<p>Under the covers, Rest-EASY is working with Vert.X directly without using any Servlet.</p>
</div>
<div class="paragraph">
<p>It is <strong>important</strong> to know that if you want to use any feature that implies a <code>Servlet</code> (ie Servlet Filters) then you need to add the <code>quarkus-undertow</code> extension to switch back to the <code>Servlet</code> ecosystem but generally speaking, you don&#8217;t need to add it as everything else is well-supported.</p>
</div>
</div>
</details>
<details>
<summary class="title">Security with File Properties Realm</summary>
<div class="content">
<div class="paragraph">
<p>You can also protect endpoints and store identities (user, roles) in the file system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-properties-file"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to configure the extension with users and roles files:</p>
</div>
<div class="paragraph">
<p>And configuration in <code>src/main/resources/application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.users.file.enabled=true
quarkus.security.users.file.users=test-users.properties
quarkus.security.users.file.roles=test-roles.properties
quarkus.security.users.file.auth-mechanism=BASIC
quarkus.security.users.file.realm-name=MyRealm
quarkus.security.users.file.plain-text=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>users.properties</code> and <code>roles.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">scott=jb0ss
jdoe=p4ssw0rd</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">scott=Admin,admin,Tester,user
jdoe=NoRolesUser</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>IMPORTANT:</strong>  If <code>plain-text</code> is set to <code>false</code> (or omitted) then passwords must be stored in the form MD5 (<code>username</code>:`realm`:`password`).</p>
</div>
<div class="paragraph">
<p>Elytron File Properties configuration properties.
Prefix <code>quarkus.security.users</code> is skipped.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The file realm is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.auth-mechanism</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASIC</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.realm-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Quarkus</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.plain-text</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If passwords are in plain or in MD5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.users</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>users.properties</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classpath resource of user/password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.roles</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>roles.properties</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classpath resource of user/role</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Embedded Realm</strong></p>
</div>
<div class="paragraph">
<p>You can embed user/password/role in the same <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.users.embedded.enabled=true
quarkus.security.users.embedded.plain-text=true
quarkus.security.users.embedded.users.scott=jb0ss
quarkus.security.users.embedded.roles.scott=admin,tester,user
quarkus.security.users.embedded.auth-mechanism=BASIC</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>IMPORTANT:</strong>  If plain-text is set to <code>false</code> (or omitted) then passwords must be stored in the form MD5 (<code>username</code>:`realm`:`password`).</p>
</div>
<div class="paragraph">
<p>Prefix <code>quarkus.security.users.embedded</code> is skipped.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The file realm is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.auth-mechanism</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASIC</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.realm-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Quarkus</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.plain-text</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If passwords are in plain or in MD5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.users.*</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>*</code> is user and value is password</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.roles.*</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>*</code> is user and value is role</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">Http basic auth</summary>
<div class="content">
<div class="paragraph">
<p>HTTP basic auth is enabled by the <code>quarkus.http.auth.basic=true</code> property.</p>
</div>
</div>
</details>
<details>
<summary class="title">RBAC</summary>
<div class="content">
<div class="paragraph">
<p>You can set RBAC using annotations or in <code>application.properties</code>.</p>
</div>
<div class="paragraph">
<p><strong>Annotations</strong></p>
</div>
<div class="paragraph">
<p>You can define roles by using <code>javax.annotation.security.RolesAllowed</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use <code>io.quarkus.security.Authenticated</code> as a shortcut of <code>@RolesAllowed("*")</code>.</p>
</div>
<div class="paragraph">
<p>To alter RBAC behaviour there are two configuration properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.deny-unannotated=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.jaxrs.deny-uncovered</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true denies by default to all JAX-RS endpoints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.security.deny-unannotated</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true denies by default all CDI methods and JAX-RS endpoints.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>File Configuration</strong></p>
</div>
<div class="paragraph">
<p>Defining RBAC in <code>application.properties</code> instead of using annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.auth.policy.role-policy1.roles-allowed=
    user,admin
quarkus.http.auth.permission.roles1.paths=
    /roles-secured/*,/other/*,/api/*
quarkus.http.auth.permission.roles1.policy=
    role-policy1

quarkus.http.auth.permission.permit1.paths=
    /public/*
quarkus.http.auth.permission.permit1.policy=
    permit
quarkus.http.auth.permission.permit1.methods=
    GET

quarkus.http.auth.permission.deny1.paths=
    /forbidden
quarkus.http.auth.permission.deny1.policy=
    deny</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>You need to provide permissions set by using the <code>roles-allowed</code> property or use the built-in ones <code>deny</code>, <code>permit</code> or <code>authenticated</code>.</p>
</div>
</div>
</details>
<details>
<summary class="title">Vault Support</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://www.vaultproject.io/">Vault</a> to manage secrets or protecting sensitive data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="vault"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configuring Vault in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># vault url
quarkus.vault.url=http://localhost:8200

quarkus.vault.authentication.userpass.username=
    bob
quarkus.vault.authentication.userpass.password=
    sinclair

# path within the kv secret engine
quarkus.vault.secret-config-kv-path=
    myapps/vault-quickstart/config
quarkus.vault.secret-config-kv-path.singer=
    multi/singer</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>vault kv put secret/myapps/vault-quickstart/config a-private-key=123456</code></p>
</div>
<div class="paragraph">
<p><code>vault kv put secret/multi/singer firstname=paul</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "a-private-key")
String privateKey;

@ConfigProperty(name = "singer.firstname")
String firstName;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can access the KV engine programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultKVSecretEngine kvSecretEngine;

kvSecretEngine.readSecret("myapps/vault-quickstart/" + vaultPath).toString();</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Fetching credentials DB</strong></p>
</div>
<div class="paragraph">
<p>With the next <em>kv</em> <code>vault kv put secret/myapps/vault-quickstart/db password=connor</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.vault.credentials-provider.mydatabase.kv-path=
    myapps/vault-quickstart/db
quarkus.datasource.credentials-provider=
    mydatabase

quarkus.datasource.url=
    jdbc:postgresql://localhost:5432/mydatabase
quarkus.datasource.driver=
    org.postgresql.Driver
quarkus.datasource.username=
    sarah</code></pre>
</div>
</div>
<div class="paragraph">
<p>No password is set as it is fetched from Vault.</p>
</div>
<div class="paragraph">
<p>INFO: <a href="https://www.vaultproject.io/docs/secrets/databases/index.html">dynamic database credentials</a> through the <code>database-credentials-role</code> property.</p>
</div>
<div class="paragraph">
<p><strong>Transit</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultTransitSecretEngine transit;

transit.encrypt("my_encryption", text);
transit.decrypt("my_encryption", text).asString();
transit.sign("my-sign-key", text);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Elytron JDBC Realm configuration properties.
Prefix <code>quarkus.vault</code> is skipped.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>url</code></dt>
<dd>
<p>Vault server URL</p>
</dd>
<dt class="hdlist1"><code>authentication.client-token</code></dt>
<dd>
<p>Vault token to access</p>
</dd>
<dt class="hdlist1"><code>authentication.app-role.role-id</code></dt>
<dd>
<p>Role Id for AppRole auth</p>
</dd>
<dt class="hdlist1"><code>authentication.app-role.secret-id</code></dt>
<dd>
<p>Secret Id for AppRole auth</p>
</dd>
<dt class="hdlist1"><code>authentication.userpass.username</code></dt>
<dd>
<p>Username for userpass auth</p>
</dd>
<dt class="hdlist1"><code>authentication.userpass.password</code></dt>
<dd>
<p>Password for userpass auth</p>
</dd>
<dt class="hdlist1"><code>authentication.kubernetes.role</code></dt>
<dd>
<p>Kubernetes authentication role</p>
</dd>
<dt class="hdlist1"><code>authentication.kubernetes.jwt-token-path</code></dt>
<dd>
<p>Location of the file containing the Kubernetes JWT token</p>
</dd>
<dt class="hdlist1"><code>renew-grace-period</code></dt>
<dd>
<p>Renew grace period duration (default: <code>1H</code>)</p>
</dd>
<dt class="hdlist1"><code>secret-config-cache-period</code></dt>
<dd>
<p>Vault config source cache period (default: <code>10M</code>)</p>
</dd>
<dt class="hdlist1"><code>secret-config-kv-path</code></dt>
<dd>
<p>Vault path in kv store. List of paths is supported in CSV</p>
</dd>
<dt class="hdlist1"><code>log-confidentiality-level</code></dt>
<dd>
<p>Used to hide confidential infos. <code>low</code>, <code>medium</code>, <code>high</code> (default: <code>medium</code>)</p>
</dd>
<dt class="hdlist1"><code>kv-secret-engine-version</code></dt>
<dd>
<p>Kv secret engine version (default: 1)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>kv-secret-engine-mount-path</code>
Kv secret engine path (default: <code>secret</code>)</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>tls.skip-verify</code></dt>
<dd>
<p>Allows to bypass certificate validation on TLS communications (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>tls.ca-cert</code></dt>
<dd>
<p>Certificate bundle used to validate TLS communications</p>
</dd>
<dt class="hdlist1"><code>tls.use-kubernetes-ca-cert</code></dt>
<dd>
<p>TLS will be active (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>connect-timeout</code></dt>
<dd>
<p>Tiemout to establish a connection (default: <code>5S</code>)</p>
</dd>
<dt class="hdlist1"><code>read-timeout</code></dt>
<dd>
<p>Request timeout (default: <code>1S</code>)</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".database-credentials-role</code></dt>
<dd>
<p>Database credentials role</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".kv-path</code></dt>
<dd>
<p>A path in vault kv store, where we will find the kv-key</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".kv-key</code></dt>
<dd>
<p>Key name to search in vault path kv-path (default: <code>password</code>)</p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Memory Transactions</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with the Software Transactional Memory (STM) implementation provided by the <a href="https://narayana.io/docs/project/index.html">Narayana</a> project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="narayana-stm"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Transactional objects must be interfaces and annotated with <code>org.jboss.stm.annotations.Transactional</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
@NestedTopLevel
public interface FlightService {
    int getNumberOfBookings();
    void makeBooking(String details);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The pessimistic strategy is the default one, you can change to optimistic by using <code>@Optimistic</code>.</p>
</div>
<div class="paragraph">
<p>Then you need to create the object inside <code>org.jboss.stm.Container</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Container&lt;FlightService&gt; container = new Container&lt;&gt;();
FlightServiceImpl instance = new FlightServiceImpl();
FlightService flightServiceProxy = container.create(instance);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The implementation of the service sets the locking and what needs to be saved/restored:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.jboss.stm.annotations.ReadLock;
import org.jboss.stm.annotations.State;
import org.jboss.stm.annotations.WriteLock;

public class FlightServiceImpl
    implements FlightService {
    @State
    private int numberOfBookings;

    @ReadLock
    public int getNumberOfBookings() {
        return numberOfBookings;
    }

    @WriteLock
    public void makeBooking(String details) {
        numberOfBookings += 1;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any member is saved/restored automatically (<code>@State</code> is not mandatory).
You can use <code>@NotState</code> to avoid behaviour.</p>
</div>
<div class="paragraph">
<p><strong>Transaction boundaries</strong></p>
</div>
<div class="paragraph">
<p><em>Declarative</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@NestedTopLevel</code>: Defines that the container will create a new top-level transaction for each method invocation.</p>
</li>
<li>
<p><code>@Nested</code>: Defines that the container will create a new top-level or nested transaction for each method invocation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Programmatically</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">AtomicAction aa = new AtomicAction();

aa.begin();
{
    try {
        flightService.makeBooking("BA123 ...");
        taxiService.makeBooking("East Coast Taxis ...");

        aa.commit();
    } catch (Exception e) {
        aa.abort();
    }
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Infinispan Embedded</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="infinispan-embeddedy"</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Configuration in <code>infinispan.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;local-cache name="quarkus-transaction"&gt;
   &lt;transaction
        transaction-manager-lookup=
        "org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup"/&gt;
&lt;/local-cache&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Set configuration file location in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.infinispan-embedded.xml-config=infinispan.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can inject the main entry point for the cache:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.infinispan.manager.EmbeddedCacheManager cacheManager;</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Gradle</summary>
<div class="content">
<div class="paragraph">
<p>There is no way to scaffold a project in Gradle but you only need to do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">plugins {
    id 'java'
    id 'io.quarkus' version '0.26.1'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation enforcedPlatform('io.quarkus:quarkus-bom:0.26.1')
    implementation 'io.quarkus:quarkus-resteasy'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or in Kotlin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="kotlin" class="language-kotlin hljs">plugins {
    java
}
apply(plugin = "io.quarkus")

repositories {
    mavenCentral()
}

dependencies {
    implementation(enforcedPlatform("io.quarkus:quarkus-bom:0.26.1"))
    implementation("io.quarkus:quarkus-resteasy")
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Declarative Reactive Routes</summary>
<div class="content">
<div class="paragraph">
<p><strong>Declarative</strong></p>
</div>
<div class="paragraph">
<p>You can use <code>@Route</code> annotation to use reactive routes and <code>@RouteFilter</code> to sue reactive filters in a declarative way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-vertx-web"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class MyDeclarativeRoutes {

    @Route(path = "/hello", methods = HttpMethod.GET)
    public void greetings(RoutingContext rc) {
        String name = rc.request().getParam("name");
        if (name == null) {
            name = "world";
        }
        rc.response().end("hello " + name);
    }

     @RouteFilter(20)
    void filter(RoutingContext rc) {
         rc.response().putHeader("X-Filter", "filter 2");
         rc.next();
    }

}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Multipart form-data Rest Client</summary>
<div class="content">
<div class="paragraph">
<p>It is really easy to send multipart form-data with Rest Client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
    &lt;artifactId&gt;resteasy-multipart-provider&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The model object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import java.io.InputStream;

import javax.ws.rs.FormParam;
import javax.ws.rs.core.MediaType;

import
    org.jboss.resteasy.annotations.providers.multipart.PartType;

public class MultipartBody {

    @FormParam("file")
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    private InputStream file;

    @FormParam("fileName")
    @PartType(MediaType.TEXT_PLAIN)
    private String name;

    // getter/setters
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the Rest client interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import
    org.jboss.resteasy.annotations.providers.multipart.MultipartForm;

@Path("/echo")
@RegisterRestClient
public interface MultipartService {

    @POST
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces(MediaType.TEXT_PLAIN)
    String sendMultipartData(@MultipartForm
                        MultipartBody data);

}</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_24_0"><a class="anchor" href="#_version_0_24_0"></a><a class="link" href="#_version_0_24_0">Version 0.24.0</a></h3>
<details>
<summary class="title">Grouping Configuration Properties</summary>
<div class="content">
<div class="paragraph">
<p><strong>@ConfigProperties</strong></p>
</div>
<div class="paragraph">
<p>As an alternative to injecting multiple related configuration values, you can also use the <code>@io.quarkus.arc.config.ConfigProperties</code> annotation to group properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public class GreetingConfiguration {
    private String message;
    // getter/setter
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class maps <code>greeting.message</code> property defined in <code>application.properties</code>.</p>
</div>
<div class="paragraph">
<p>You can inject this class by using CDI <code>@Inject GreetingConfiguration greeting;</code>.</p>
</div>
<div class="paragraph">
<p>Also you can use an interface approach:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public interface GreetingConfiguration {

    @ConfigProperty(name = "message")
    String message();
    String getSuffix();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If property does not follow getter/setter naming convention you need to use <code>org.eclipse.microprofile.config.inject.ConfigProperty</code> to set it.</p>
</div>
<div class="paragraph">
<p>Nested objects are also supporte:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public class GreetingConfiguration {
    public String message;
    public HiddenConfig hidden;

    public static class HiddenConfig {
        public List&lt;String&gt; recipients;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And an <code>application.properties</code> mapping previous class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">greeting.message = hello
greeting.hidden.recipients=Jane,John</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bean Validation is also supported so properties are validated at startup time, for example <code>@Size(min = 20) public String message;</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>prefix</code> attribute is not mandatory. If not provided, attribute is determined by class name (ie <code>GreeetingConfiguration</code> is translated to <code>greeting</code> or <code>GreetingExtraConfiguration</code> to <code>greeting-extra</code>). The suffix of the class is always removed.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Panache MongoDB</summary>
<div class="content">
<div class="paragraph">
<p>You can also use the Panache framework to write persistence part when using MongoDB.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="mongodb-panache"</code></pre>
</div>
</div>
<div class="paragraph">
<p>MongoDB configuration comes from <a href="#_mongodb_client">MongoDB Client</a> section.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@MongoEntity(collection="ThePerson")
public class Person extends PanacheMongoEntity {
    public String name;

    @BsonProperty("birth")
    public LocalDate birthDate;

    public Status status;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible annotations in fields: <code>@BsonId</code> (for custom ID), <code>@BsonProperty</code> and <code>@BsonIgnore</code>.</p>
</div>
<div class="paragraph">
<p><strong>Important:</strong> <code>@MongoEntity</code> is optional.</p>
</div>
<div class="paragraph">
<p>Methods provided are similar of the ones shown in <a href="#_persistence">Persistence</a> section.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">person.persist();
person.update();
person.delete();

List&lt;Person&gt; allPersons = Person.listAll();
person = Person.findById(personId);
List&lt;Person&gt; livingPersons = Person.list("status", Status.Alive);
List&lt;Person&gt; persons = Person.list(Sort.by("name").and("birth"));

long countAll = Person.count();

Person.delete("status", Status.Alive);</code></pre>
</div>
</div>
<div class="paragraph">
<p>All <code>list</code> methods have equivalent <code>stream</code> versions.</p>
</div>
<div class="paragraph">
<p><strong>Pagination</strong></p>
</div>
<div class="paragraph">
<p>You can also use pagination:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons =
    Person.find("status", Status.Alive);
livingPersons.page(Page.ofSize(25));

// get the first page
List&lt;Person&gt; firstPage = livingPersons.list();
// get the second page
List&lt;Person&gt; secondPage = livingPersons.nextPage().list();</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Queries</strong></p>
</div>
<div class="paragraph">
<p>Native MongoDB queries are supported (if they start with <code>{</code> or <code>org.bson.Document</code> instance) as well as Panache Queries.
Panache Queries equivalence in MongoDB:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>firstname = ?1 and status = ?2</code> &#8594; <code>{'firstname': ?1, 'status': ?2}</code></p>
</li>
<li>
<p><code>amount &gt; ?1 and firstname != ?2</code> &#8594; <code>{'amount': {'$gt': ?1}, 'firstname': {'$ne': ?2}}</code></p>
</li>
<li>
<p><code>lastname like ?1</code> &#8594; <code>{'lastname': {'$regex': ?1}}</code></p>
</li>
<li>
<p><code>lastname is not null</code> &#8594; <code>{'lastname':{'$exists': true}}</code></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
PanacheQL refers to the Object parameter name but native queries refer to MongoDB field names.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Projection</strong></p>
</div>
<div class="paragraph">
<p>Projection can be done for both PanacheQL and native queries.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import io.quarkus.mongodb.panache.ProjectionFor;

@ProjectionFor(Person.class) <i class="conum" data-value="1"></i><b>(1)</b>
public class PersonName {
    public String name;
}

PanacheQuery&lt;PersonName&gt; shortQuery = Person.find("status ", Status.Alive).project(PersonName.class);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Entity class.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>DAO pattern</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class PersonRepository
    implements PanacheMongoRepository&lt;Person&gt; {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If entities are defined in external JAR, you need to enable in these projects the <code>Jandex</code> plugin in project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
    &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.3&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-index&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;jandex&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss&lt;/groupId&gt;
            &lt;artifactId&gt;jandex&lt;/artifactId&gt;
            &lt;version&gt;2.1.1.Final&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Panache JPA Pagination</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons = Person
            .find("status", Status.Alive);
livingPersons.page(Page.ofSize(25));

// get the first page
List&lt;Person&gt; firstPage = livingPersons.list();
// get the second page
List&lt;Person&gt; secondPage = livingPersons.nextPage().list();</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Named Lambda Request Handlers</summary>
<div class="content">
<div class="paragraph">
<p>You can set the handler name by using <code>quarkus.lambda.handler</code> property or by annotating the Lambda with the CDI <code>@Named</code> annotation.</p>
</div>
</div>
</details>
<details>
<summary class="title">Vert.X Filters and Routes</summary>
<div class="content">
<div class="paragraph">
<p><strong>Programmatically</strong></p>
</div>
<div class="paragraph">
<p>You can also register Vert.X Filters and Router programmatically inside a CDI bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import io.quarkus.vertx.http.runtime.filters.Filters;
import io.vertx.ext.web.Router;
import javax.enterprise.context.ApplicationScoped;
import javax.enterprise.event.Observes;

@ApplicationScoped
public class MyBean {

    public void filters(
            @Observes Filters filters) {
        filters
            .register(
                rc -&gt; {
                    rc.response()
                        .putHeader("X-Filter", "filter 1");
                    rc.next();
                },
                10);
    }

    public void routes(
            @Observes Router router) {
        router
            .get("/")
            .handler(rc -&gt; rc.response().end("OK"));
    }
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Change Context of Static Web Resources</summary>
<div class="content">
<div class="paragraph">
<p>By default static resources as served under the root context.
You can change this by using <code>quarkus.http.root-path</code> property.</p>
</div>
</div>
</details>
<details>
<summary class="title">Security with a JDBC Realm</summary>
<div class="content">
<div class="paragraph">
<p>You can also protect endpoints and store identities in a database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-jdbc"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You still need to add the database driver (ie <code>jdbc-h2</code>).</p>
</div>
<div class="paragraph">
<p>You need to configure JDBC and Elytron JDBC Realm:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.username=sa
quarkus.datasource.password=sa

quarkus.security.jdbc.enabled=true
quarkus.security.jdbc.principal-query.sql=
    SELECT u.password, u.role FROM test_user u WHERE u.user=?
quarkus.security.jdbc.principal-query
    .clear-password-mapper.enabled=true
quarkus.security.jdbc.principal-query
    .clear-password-mapper.password-index=1
quarkus.security.jdbc.principal-query
    .attribute-mappings.0.index=2
quarkus.security.jdbc.principal-query
    .attribute-mappings.0.to=groups</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to set the index (1-based) of password and role.</p>
</div>
<div class="paragraph">
<p>Elytron JDBC Realm configuration properties.
Prefix <code>quarkus.security.jdbc</code> is skipped.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>auth-mechanism</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASIC</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>realm-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Quarkus</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the properties store is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.sql</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sql query to find the password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.datasource</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The data source to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.clear-password-mapper.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the clear-password-mapper is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.clear-password-mapper.password-index</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index of column containing clear password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the bcrypt-password-mapper is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.password-index</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index of column containing password hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.hash-encoding</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASE64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string referencing the password hash encoding (<code>BASE64</code> or <code>HEX</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.salt-index</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index column containing the Bcrypt salt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.salt-encoding</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASE64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string referencing the salt encoding (<code>BASE64</code> or <code>HEX</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.iteration-count-index</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index column containing the Bcrypt iteration count</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For multiple datasources you can use the datasource name in the properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
quarkus.security.jdbc.principal-query.sql=

quarkus.datasource.permissions.url=
quarkus.security.jdbc.principal-query.permissions.sql=</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">XML Marshalling/Unmarshalling</summary>
<div class="content">
<div class="paragraph">
<p>To work with <code>JAX-B</code> you need to add a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-jaxb"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then annotated POJOs are converted to XML.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@XmlRootElement
public class Message {
}

 @GET
@Produces(MediaType.APPLICATION_XML)
public Message hello() {
    return message;
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Multiple datasources</summary>
<div class="content">
<div class="paragraph">
<p>You can register more than one datasource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># default
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.url=jdbc:h2:tcp://localhost/mem:default
....
# users datasource
quarkus.datasource.users.driver=org.h2.Driver
quarkus.datasource.users.url=jdbc:h2:tcp://localhost/mem:users</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that after <code>datasource</code> you set the datasource name, in previous case <code>users</code>.</p>
</div>
<div class="paragraph">
<p>You can inject then <code>AgroalDataSource</code> with <code>io.quarkus.agroal.DataSource</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@DataSource("users")
AgroalDataSource dataSource1;</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_23_0"><a class="anchor" href="#_version_0_23_0"></a><a class="link" href="#_version_0_23_0">Version 0.23.0</a></h3>
<details>
<summary class="title">JGit</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrets with <a href="https://www.eclipse.org/jgit/" target="_blank" rel="noopener">JGit</a> to integrate with Git repositories:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-jgit"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then you can start using JGit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">try (Git git = Git.cloneRepository()
                  .setDirectory(tmpDir)
                  .setURI(url)
                  .call()) {
    return tmpDir.toString();
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When running in native mode, make sure to configure SSL access correctly <code>quarkus.ssl.native=true</code> (<a href="https://quarkus.io/guides/native-and-ssl-guide" target="_blank" rel="noopener">Native and SSL</a>).
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Spring Data JPA</summary>
<div class="content">
<div class="paragraph">
<p>While users are encouraged to use Hibernate ORM with Panache for Relational Database access, Quarkus provides a compatibility layer for <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/" target="_blank" rel="noopener">Spring Data JPA</a> repositories.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-data-jpa"</code></pre>
</div>
</div>
<div class="paragraph">
<p>INFO: Of course you still need to add the JDBC driver, and configure it in <code>application.properties</code>.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface FruitRepository
        extends CrudRepository&lt;Fruit, Long&gt; {
    List&lt;Fruit&gt; findByColor(String color);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then you can inject it either as shown in <a href="#_spring_di">Spring DI</a> or in <a href="#_spring_web">Spring Web</a>.</p>
</div>
<div class="paragraph">
<p>Interfaces supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.springframework.data.repository.Repository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.CrudRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.PagingAndSortingRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.jpa.repository.JpaRepository</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>INFO: Generated repositories are automatically annotated with <code>@Transactional</code>.</p>
</div>
<div class="paragraph">
<p>Repository fragments is also supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface PersonRepository
    extends JpaRepository&lt;Person, Long&gt;, PersonFragment {

    void makeNameUpperCase(Person person);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>User defined queries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Query("select m from Movie m where m.rating = ?1")
Iterator&lt;Movie&gt; findByRating(String rating);

@Modifying
@Query("delete from Movie where rating = :rating")
void deleteByRating(@Param("rating") String rating);</code></pre>
</div>
</div>
<div class="paragraph">
<p>What is currently unsupported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Methods of <code>org.springframework.data.repository.query.QueryByExampleExecutor</code></p>
</li>
<li>
<p>QueryDSL support</p>
</li>
<li>
<p>Customizing the base repository</p>
</li>
<li>
<p><code>java.util.concurrent.Future</code> as return type</p>
</li>
<li>
<p>Native and named queries when using <code>@Query</code></p>
</li>
</ul>
</div>
</div>
</details>
<details>
<summary class="title">Amazon DynamoDB</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener">Amazon DynamoDB</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-amazon-dynamodb"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
DynamoDbClient dynamoDB;

@Inject
DynamoDbAsyncClient dynamoDB;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use it as a local DynamoDB instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.dynamodb.region=
    eu-central-1
quarkus.dynamodb.endpoint-override=
    http://localhost:8000
quarkus.dynamodb.credentials.type=STATIC
quarkus.dynamodb.credentials.static-provider
    .access-key-id=test-key
quarkus.dynamodb.credentials.static-provider
.secret-access-key=test-secret</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to work with an AWS account, you’d need to set it with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">quarkus.dynamodb.region=&lt;YOUR_REGION&gt;
quarkus.dynamodb.credentials.type=DEFAULT</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>DEFAULT</code> credentials provider chain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>System properties <code>aws.accessKeyId</code>, <code>aws.secretKey</code></p>
</li>
<li>
<p>Env. Varables <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code></p>
</li>
<li>
<p>Credentials profile <code>~/.aws/credentials</code></p>
</li>
<li>
<p>Credentials through the Amazon EC2 container service if the <code>AWS_CONTAINER_CREDENTIALS_RELATIVE_URI</code> set</p>
</li>
<li>
<p>Credentials through Amazon EC2 metadata service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Configuration parameters prefixed with <code>quarkus.dynamodb</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enable-endpoint-discovery</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint discovery for a service API that supports endpoint discovery.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>endpoint-override</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Configure the endpoint with which the SDK should communicate.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>api-call-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time to complete an execution.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>interceptors</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of class interceptors.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Configuration parameters prefixed with <code>quarkus.dynamodb.aws</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>region</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Region that hosts DynamoDB.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DEFAULT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Credentials that should be used <code>DEFAULT</code>, <code>STATIC</code>, <code>SYSTEM_PROPERTY</code>, <code>ENV_VARIABLE</code>, <code>PROFILE</code>, <code>CONTAINER</code>, <code>INSTANCE_PROFILE</code>, <code>PROCESS</code>, <code>ANONYMOUS</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Credentials specific parameters prefixed with <code>quarkus.dynamodb.aws.credentials</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">DEFAULT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default-provider.async-credential-update-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should fetch credentials async.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default-provider.reuse-last-provider-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should reuse the last successful credentials.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">STATIC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>static-provider.access-key-id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AWS access key id.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>static-provider.secret-access-key</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AWS secret access key.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROFILE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>profile-provider.profile-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the profile to use.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROCESS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.command</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Command to execute to retrieve credentials.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.process-output-limit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>1024</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max bytes to retrieve from process.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.credential-refresh-threshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT15S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The amount of time between credentials expire and credentials refreshed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.async-credential-update-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should fetch credentials async.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In case of synchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.sync-client</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection acquisation timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-max-idle-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>60S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time to connection to be opened.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-time-to-live</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time connection to be open.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>socket-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time to wait for data.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connections</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>50</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max connections.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>expect-continue-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Client send an HTTP <code>expect-continue</code> handsake.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>use-idle-connection-reaper</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connections in pool should be closed asynchronously.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.endpoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint of the proxy server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables HTTP proxy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Proxy username.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Proxy password.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.ntlm-domain</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For NTLM, domain name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.ntlm-workstation</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For NTLM, workstation name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.preemptive-basic-authentication-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Authenticate pre-emptively.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.non-proxy-hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of non proxy hosts.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>system-property</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to key store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store type.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store password.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In case of asynchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.async-client</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection acquisation timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-max-idle-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>60S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time to connection to be opened.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-time-to-live</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time connection to be open.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-concurrency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>50</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max number of concurrent connections.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>use-idle-connection-reaper</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connections in pool should be closed asynchronously.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>read-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Read timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Write timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.endpoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint of the proxy server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables HTTP proxy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.non-proxy-hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of non proxy hosts.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>system-property</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to key store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store type.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store password.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ssl-provider</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SSL Provider (<code>jdk</code>, <code>openssl</code>, <code>openssl-refcnt</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>protocol</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>HTTP_1_1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets the HTTP protocol.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-http2-streams</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max number of concurrent streams.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.override</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable custom event loop conf.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.number-of-threads</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Number of threads to use in event loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.thread-name-prefix</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>aws-java-sdk-NettyEventLoop</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Prefix of thread names.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">ActiveMQ Artemis</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus uses <a href="#_reactive_messaging">Reactive Messaging</a> to integrate with messaging systems, but in case you need deeper control when using <a href="https://activemq.apache.org/components/artemis/" target="_blank" rel="noopener">Apache ActiveMQ Artemis</a> there is also an extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-artemis-core"</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>And then you can inject <code>org.apache.activemq.artemis.api.core.client.ServerLocator</code> instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ArtemisConsumerManager {

    @Inject
    ServerLocator serverLocator;

    private ClientSessionFactory connection;

    @PostConstruct
    public void init() throws Exception {
        connection = serverLocator.createSessionFactory();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configure <code>ServerLocator</code> in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.artemis.url=tcp://localhost:61616</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can configure ActiveMQ Artemis in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>artemis.url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection URL</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>artemis.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Username for authentication.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>artemis.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Password for authentication.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Artemis JMS</strong></p>
</div>
<div class="paragraph">
<p>If you want to use JMS with Artemis, you can do it by using its extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-artemis-jms"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then you can inject <code>javax.jms.ConnectionFactory</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ArtemisConsumerManager {

    @Inject
    ConnectionFactory connectionFactory;

    private Connection connection;

    @PostConstruct
    public void init() throws JMSException {
        connection = connectionFactory.createConnection();
        connection.start();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Configuration options are the same as Artemis core.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Spring Web generation</summary>
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you scaffold the project with <code>spring-web</code> extension, then Spring Web annotations are sed in the generated project. <code>mvn io.quarkus:quarkus-maven-plugin:1.1.0.Final:create &#8230;&#8203; -Dextensions="spring-web"</code>.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Azure Functions</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus can make a microservice be deployable to the Azure Functions.</p>
</div>
<div class="paragraph">
<p>To scaffold a deployable microservice to the Azure Functions run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn archetype:generate \
  -DarchetypeGroupId=io.quarkus \
  -DarchetypeArtifactId=quarkus-azure-functions-http-archetype \
  -DarchetypeVersion={version}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Infinispan</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://infinispan.org/" target="_blank" rel="noopener">Infinispan</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="infinispan-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Serialization uses a library called <a href="https://github.com/infinispan/protostream" target="_blank" rel="noopener">Protostream</a>.</p>
</div>
<div class="paragraph">
<p><strong>Annotation based</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ProtoFactory
public Author(String name, String surname) {
    this.name = name;
    this.surname = surname;
}

@ProtoField(number = 1)
public String getName() {
    return name;
}

@ProtoField(number = 2)
public String getSurname() {
    return surname;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Initializer to set configuration settings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@AutoProtoSchemaBuilder(includeClasses =
    { Book.class, Author.class },
    schemaPackageName = "book_sample")
interface BookContextInitializer
        extends SerializationContextInitializer {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>User written based</strong></p>
</div>
<div class="paragraph">
<p>There are three ways to create your schema:</p>
</div>
<div class="paragraph">
<p><em>Protofile</em></p>
</div>
<div class="paragraph">
<p>Creates a <code>.proto</code> file in the <code>META-INF</code> directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="proto" class="language-proto hljs">package book_sample;

message Author {
  required string name = 1;
  required string surname = 2;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of having a Collection field you need to use the <code>repeated</code> key (ie <code>repeated Author authors = 4</code>).</p>
</div>
<div class="paragraph">
<p><em>In code</em></p>
</div>
<div class="paragraph">
<p>Setting <code>proto</code> schema directly in a produced bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
FileDescriptorSource bookProtoDefinition() {
    return FileDescriptorSource
        .fromString("library.proto",
                    "package book_sample;\n" +
                    "message Author {\n" +
                    "  required string name = 1;\n" +
                    "  required string surname = 2;\n" +
                    "}");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Marshaller</em></p>
</div>
<div class="paragraph">
<p>Using <code>org.infinispan.protostream.MessageMarshaller</code> interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class AuthorMarshaller
    implements MessageMarshaller&lt;Author&gt; {

   @Override
   public String getTypeName() {
      return "book_sample.Author";
   }

   @Override
   public Class&lt;? extends Author&gt; getJavaClass() {
      return Author.class;
   }

   @Override
   public void writeTo(ProtoStreamWriter writer,
                    Author author) throws IOException {
      writer.writeString("name", author.getName());
      writer.writeString("surname", author.getSurname());
   }

   @Override
   public Author readFrom(ProtoStreamReader reader)
        throws IOException {
      String name = reader.readString("name");
      String surname = reader.readString("surname");
      return new Author(name, surname);
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And producing the marshaller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
MessageMarshaller authorMarshaller() {
    return new AuthorMarshaller();
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Reactive MySQL client</summary>
<div class="content">
<div class="paragraph">
<p>You can use Reactive MySQL to execute queries to MySQL database in a reactive way, instead of using JDBC way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-mysql-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
    vertx-reactive:mysql://localhost:3306/db</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can inject <code>io.vertx.axle.mysqlclient.MySQLPool</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MySQLPool client;

public static CompletionStage&lt;Fruit&gt; findById(
    MySQLPool c, Long id) {
    return c.preparedQuery("SELECT name FROM fruits WHERE id = $1",
                Tuple.of(id))
            .thenApply(RowSet::iterator)
            .thenApply(iterator -&gt; iterator.hasNext() ?
                        from(iterator.next()) : null);
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Web Resources</summary>
<div class="content">
<div class="paragraph">
<p>You can serve web resources with Quarkus.
You need to place web resources at <code>src/main/resources/META-INF/resources</code> and then they are accessible (ie <a href="http://localhost:8080/index.html" class="bare">http://localhost:8080/index.html</a>)</p>
</div>
</div>
</details>
<details>
<summary class="title">Static OpenAPI documents</summary>
<div class="content">
<div class="paragraph">
<p>You can also serve OpenAPI Schema from static files instead of dynamically generated from annotation scanning.</p>
</div>
<div class="paragraph">
<p>You need to put OpenAPIdocumentation under <code>META-INF</code> directory (ie: <code>META-INF/openapi.yaml</code>).</p>
</div>
<div class="paragraph">
<p>A request to <code>/openapi</code> will serve the combined OpenAPI document from the static file and the generated from annotations.
You can disable the scanning documents by adding the next configuration property: <code>mp.openapi.scan.disable=true</code>.</p>
</div>
<div class="paragraph">
<p>Other valid document paths are: <code>META-INF/openapi.yml</code>, <code>META-INF/openapi.json</code>, <code>WEB-INF/classes/META-INF/openapi.yml</code>, <code>WEB-INF/classes/META-INF/openapi.yaml</code>, <code>WEB-INF/classes/META-INF/openapi.json</code>.</p>
</div>
</div>
</details>
<details>
<summary class="title">Disable Jaeger</summary>
<div class="content">
<div class="paragraph">
<p>You can disable <code>Jaeger</code> extension by using <code>quarkus.jaeger.enabled</code> property.</p>
</div>
</div>
</details>
<details>
<summary class="title">JDBC Tracer</summary>
<div class="content">
<div class="paragraph">
<p><strong>Additional tracers</strong></p>
</div>
<div class="paragraph">
<p><strong>JDBC Tracer</strong></p>
</div>
<div class="paragraph">
<p>Adds a span for each JDBC queries.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;
    &lt;artifactId&gt;opentracing-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure JDBC driver apart from tracing properties seen before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># add ':tracing' to your database URL
quarkus.datasource.url=
    jdbc:tracing:postgresql://localhost:5432/mydatabase
quarkus.datasource.driver=
    io.opentracing.contrib.jdbc.TracingDriver
quarkus.hibernate-orm.dialect=
    org.hibernate.dialect.PostgreSQLDialect</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Custom Health Check Paths</summary>
<div class="content">
<div class="paragraph">
<p>If you want to override or set manually readiness/liveness probes, you can do it by setting health properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.smallrye-health.root-path=/hello
quarkus.smallrye-health.liveness-path=/customlive
quarkus.smallrye-health.readiness-path=/customready</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Provided Health Check implementations</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus comes with some <code>HealthCheck</code> implementations for checking service status.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SocketHealthCheck</strong>: checks if host is reachable using a socket.</p>
</li>
<li>
<p><strong>UrlHealthCheck</strong>: checks if host is reachable using a Http URL connection.</p>
</li>
<li>
<p><strong>InetAddressHealthCheck</strong>: checks if host is reachable using <code>InetAddress.isReachable</code> method.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
@Liveness
HealthCheck check1() {
    return new UrlHealthCheck("https://www.google.com")
            .name("Google-Check");
}</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_21_0"><a class="anchor" href="#_version_0_21_0"></a><a class="link" href="#_version_0_21_0">Version 0.21.0</a></h3>
<details>
<summary class="title">Injecting without @Inject</summary>
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Quarkus breaks the CDI spec by allowing you to inject qualified beans without using <code>@Inject</code> annotation.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Kafka Stream support</summary>
<div class="content">
<div class="paragraph">
<p>All we need to do for that is to declare a CDI producer method which returns the Kafka Streams <code>org.apache.kafka.streams.Topology</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class TopologyProducer {
    @Produces
    public Topology buildTopology() {
        org.apache.kafka.streams.StreamsBuilder.StreamsBuilder
            builder = new StreamsBuilder();
        // ...
        builder.stream()
            .join()
            // ...
            .toStream()
            .to();
        return builder.build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Previous example produces content to another stream.
If you want to write interactive queries, you can use Kafka streams.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KafkaStreams streams;

return streams
        .store("stream", QueryableStoreTypes.keyValueStore());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Kafka Streams extension is configured via the Quarkus configuration file <code>application.properties</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kafka-streams.bootstrap-servers=localhost:9092
quarkus.kafka-streams.application-id=temperature-aggregator
quarkus.kafka-streams.application-server=${hostname}:8080
quarkus.kafka-streams.topics=weather-stations,temperature-values

kafka-streams.cache.max.bytes.buffering=10240
kafka-streams.commit.interval.ms=1000</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>IMPORTANT:</strong> All the properties within the <code>kafka-streams</code> namespace are passed through as-is to the Kafka Streams engine. Changing their values requires a rebuild of the application.</p>
</div>
</div>
</details>
<details>
<summary class="title">Configuring Apache Tika</summary>
<div class="content">
<div class="paragraph">
<p>You can configure Apache Tika in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika.tika-config-path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika-config.xml</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to the Tika configuration resource.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.tika.parsers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CSV of the abbreviated or full parser class to be loaded by the extension.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika.append-embedded-content</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The document may have other embedded documents. Set if autmatically append.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">GZip support</summary>
<div class="content">
<div class="paragraph">
<p>You can configure Quarkus to use GZip in the <code>application.properties</code> file using the next properties with <code>quarkus.resteasy</code> suffix:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gzip.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>EnableGZip.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gzip.max-input</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10M</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Configure the upper limit on deflated request body.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">Spring DI</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus provides a compatibility layer for Spring dependency injection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-di"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some examples of what you can do.
Notice that annotations are the Spring original ones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Configuration
public class AppConfiguration {

    @Bean(name = "capitalizeFunction")
    public StringFunction capitalizer() {
        return String::toUpperCase;
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Or as a component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component("noopFunction")
public class NoOpSingleStringFunction
    implements StringFunction {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also as a service and injection properties from <code>application.properties</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Service
public class MessageProducer {

    @Value("${greeting.message}")
    String message;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can inject using <code>Autowired</code> or constructor in a component and in a JAX-RS resource too.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component
public class GreeterBean {

    private final MessageProducer messageProducer;

    @Autowired @Qualifier("noopFunction")
    StringFunction noopStringFunction;

    public GreeterBean(MessageProducer messageProducer) {
        this.messageProducer = messageProducer;
    }
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Spring Web</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus provides a compatibility layer for Spring Web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-web"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifically supports the REST related features.
Notice that infrastructure things like <code>BeanPostProcessor</code> will not be executed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RestController
@RequestMapping("/greeting")
public class GreetingController {

    private final GreetingBean greetingBean;

    public GreetingController(GreetingBean greetingBean) {
        this.greetingBean = greetingBean;
    }

    @GetMapping("/{name}")
    public Greeting hello(@PathVariable(name = "name")
                            String name) {
        return new Greeting(greetingBean.greet(name));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Supported annotations are: <code>RestController</code>, <code>RequestMapping</code>, <code>GetMapping</code>, <code>PostMapping</code>, <code>PutMapping</code>, <code>DeleteMapping</code>, <code>PatchMapping</code>, <code>RequestParam</code>, <code>RequestHeader</code>, <code>MatrixVariable</code>, <code>PathVariable</code>, <code>CookieValue</code>, <code>RequestBody</code>, <code>ResponseStatus</code>, <code>ExceptionHandler</code> and <code>RestControllerAdvice</code>.</p>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_20_0"><a class="anchor" href="#_version_0_20_0"></a><a class="link" href="#_version_0_20_0">Version 0.20.0</a></h3>
<details>
<summary class="title">Jackson</summary>
<div class="content">
<div class="paragraph">
<p>To work with <code>Jackson</code> you need to add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-jackson"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t want to use the default <code>ObjectMapper</code> you can customize it by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CustomObjectMapperConfig {
    @Singleton
    @Produces
    public ObjectMapper objectMapper() {
        ObjectMapper objectMapper = new ObjectMapper();
        // perform configuration
        return objectMapper;
    }
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Custom Context Path</summary>
<div class="content">
<div class="paragraph">
<p>By default Undertow will serve content from under the root context.
If you want to change this you can use the <code>quarkus.servlet.context-path</code> config key to set the context path.</p>
</div>
</div>
</details>
<details>
<summary class="title">Test Coverage</summary>
<div class="content">
<div class="paragraph">
<p>Due the nature of Quarkus to calculate correctly the coverage information with JaCoCo, you might need offline instrumentation.
I recommend reading <a href="https://quarkus.io/guides/tests-with-coverage-guide" target="_blank" rel="noopener">this document</a> to understand how JaCoCo and Quarkus works and how you can configure JaCoCo to get correct data.</p>
</div>
</div>
</details>
<details>
<summary class="title">Transactions</summary>
<div class="content">
<div class="paragraph">
<p>The easiest way to define your transaction boundaries is to use the <code>@Transactional</code> annotation.</p>
</div>
<div class="paragraph">
<p>Transactions are mandatory in case of none idempotent operations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
public void createDeveloper() {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can control the transaction scope:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Transactional(REQUIRED)</code> (default): starts a transaction if none was started, stays with the existing one otherwise.</p>
</li>
<li>
<p><code>@Transactional(REQUIRES_NEW)</code>: starts a transaction if none was started; if an existing one was started, suspends it and starts a new one for the boundary of that method.</p>
</li>
<li>
<p><code>@Transactional(MANDATORY)</code>: fails if no transaction was started ; works within the existing transaction otherwise.</p>
</li>
<li>
<p><code>@Transactional(SUPPORTS)</code>: if a transaction was started, joins it ; otherwise works with no transaction.</p>
</li>
<li>
<p><code>@Transactional(NOT_SUPPORTED)</code>: if a transaction was started, suspends it and works with no transaction for the boundary of the method; otherwise works with no transaction.</p>
</li>
<li>
<p><code>@Transactional(NEVER)</code>: if a transaction was started, raises an exception; otherwise works with no transaction.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can configure the default transaction timeout using <code>quarkus.transaction-manager.default-transaction-timeout</code> configuration property. By default it is set to 60 seconds.</p>
</div>
<div class="paragraph">
<p>You can set a timeout property, in seconds, that applies to transactions created within the annotated method by using <code>@TransactionConfiguration</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
@TransactionConfiguration(timeout=40)
public void createDeveloper() {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want more control over transactions you can inject <code>UserTransaction</code> and use a programmatic way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject UserTransaction transaction

transaction.begin();
transaction.commit();
transaction.rollback();</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Kubernetes Client Configuration</summary>
<div class="content">
<div class="paragraph">
<p>List of Kubernetes client parameters.</p>
</div>
<div class="paragraph">
<p><code>quarkus.kubernetes-client</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>trust-certs</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust self-signed certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>master-url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of Kubernetes API server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>namesapce</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default namespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ca-cert-file</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CA certificate data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-cert-file</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-cert-data</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-data</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-algorithm</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key algorithm.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-passphrase</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key passphrase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>watch-reconnect-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT1S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Watch reconnect interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>watch-reconnect-limit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>-1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum reconnect attempts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>request-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>rolling-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT15M</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a rollout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>http-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP proxy used to access the Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>https-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>``</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS proxy used to access the Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy-username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy-password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>no-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP addresses or hosts to exclude from proxying</p></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">Customization of OpenAPI v3 output</summary>
<div class="content">
<div class="paragraph">
<p>You can customize the output by using Open API v3 annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Schema(name="Developers",
        description="POJO that represents a developer.")
public class Developer {
    @Schema(required = true, example = "Alex")
    private String name;
}

@POST
@Path("/developer")
@Operation(summary = "Create deeloper",
           description = "Only be done by admin.")
public Response createDeveloper(
        @RequestBody(description = "Developer object",
            required = true,
            content = @Content(schema =
            @Schema(implementation = Developer.class)))
                Developer developer)</code></pre>
</div>
</div>
<div class="paragraph">
<p>All possible annotations can be seen at <a href="https://github.com/eclipse/microprofile-open-api/tree/master/api/src/main/java/org/eclipse/microprofile/openapi/annotations" target="_blank" rel="noopener">org.eclipse.microprofile.openapi.annotations</a> package.</p>
</div>
</div>
</details>
<details>
<summary class="title">Build Tool and Profiles</summary>
<div class="content">
<div class="paragraph">
<p>You can also set it in the build tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
&lt;version&gt;${surefire-plugin.version}&lt;/version&gt;
&lt;configuration&gt;
    &lt;systemPropertyVariables&gt;
        &lt;quarkus.test.profile&gt;foo&lt;/quarkus.test.profile&gt;
        &lt;buildDirectory&gt;${project.build.directory}
        &lt;/buildDirectory&gt;
    &lt;/systemPropertyVariables&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Same for <code>maven-failsafe-plugin</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">test {
    useJUnitPlatform()
    systemProperty "quarkus.test.profile", "foo"
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">OAuth2</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with OAuth2 to be used in case of opaque tokens (none JWT) and its validation against an introspection endpoint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="security-oauth2"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configuration in <code>src/main/resources/application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oauth2.client-id=client_id
quarkus.oauth2.client-secret=secret
quarkus.oauth2.introspection-url=http://oauth-server/introspect</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can map roles to be used in security annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine if the OAuth2 extension is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.client-id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OAuth2 client id used to validate the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.client-secret</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OAuth2 client secret used to validate the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.introspection-url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL used to validate the token and gather the authentication claims.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.role-claim</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>scope</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The claim that is used in the endpoint response to load the roles</p></td>
</tr>
</tbody>
</table>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_19_0"><a class="anchor" href="#_version_0_19_0"></a><a class="link" href="#_version_0_19_0">Version 0.19.0</a></h3>
<details>
<summary class="title">Exception Mapper</summary>
<div class="content">
<div class="paragraph">
<p>You can map exceptions to produce a custom output by implementing <code>ExceptionMapper</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Provider
public class ErrorMapper
    implements ExceptionMapper&lt;Exception&gt; {

    @Override
    public Response toResponse(Exception exception) {
        int code = 500;
        if (exception instanceof WebApplicationException) {
            code = ((WebApplicationException) exception)
                .getResponse().getStatus();
        }
        return Response.status(code)
            .entity(
                Json.createObjectBuilder()
                .add("error", exception.getMessage())
                .add("code", code)
                .build()
            )
            .build();
        }
    }</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">EntityManager Injection</summary>
<div class="content">
<div class="paragraph">
<p>You can inject <code>EntityManager</code> in your classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
EntityManager em;

em.persist(car);</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Hibernate Configuration</summary>
<div class="content">
<div class="paragraph">
<p>Hibernate configuration properties.
Prefix <code>quarkus.hibernate-orm</code> is skipped.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Values[Default]</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>dialect</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class name of the Hibernate ORM dialect.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not necessary to set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>dialect.storage-engine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The storage engine when the dialect supports multiple storage engines.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not necessary to set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>sql-load-script</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the file containing the SQL statements to execute when starts.
<code>no-file</code> force Hibernate to skip SQL import.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>import.sql</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>batch-fetch-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the batches.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-1 disabled.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>query.query-plan-cache-max-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum size of the query plan cache.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>query.default-null-ordering</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default precedence of null values in <code>ORDER BY</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>none</code>], <code>first</code>, <code>last</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.generation</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database schema is generation.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>none</code>], <code>create</code>, <code>drop-and-create</code>, <code>drop</code>, <code>update</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.generation.halt-on-error</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop on the first error when applying the schema.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>flase</code>], <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.default-catalog</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default catalog.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.default-schema</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Schema.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.charset</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Charset.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jdbc.timezone</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time Zone JDBC driver.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jdbc.statement-fetch-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of rows fetched at a time.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jdbc.statement-batch-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of updates sent at a time.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>log.sql</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show SQL logs</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>false</code>], <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>log.jdbc-warnings</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collect and show JDBC warnings.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>false</code>], <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>statistics</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable statiscs collection.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>false</code>], <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>physical-naming-strategy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class name of the Hibernate PhysicalNamingStrategy implementation.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>globally-quoted-identifiers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should quote all identifiers.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>false</code>], <code>true</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">CDI Produces and Qualifiers</summary>
<div class="content">
<div class="paragraph">
<p>You can also create a factory of an object by using <code>@javax.enterprise.inject.Produces</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
@ApplicationScoped
Message message() {
    Message m = new Message();
    m.setMsn("Hello");
    return m;
}

@Inject
Message msg;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Qualifiers</strong></p>
</div>
<div class="paragraph">
<p>You can use qualifiers to return different implementations of the same interface or to customize the configuration of the bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface Quote {
    @Nonbinding String value();
}

@Produces
@Quote("")
Message message(InjectionPoint msg) {
    Message m = new Message();
    m.setMsn(
        msg.getAnnotated()
        .getAnnotation(Quote.class)
        .value()
    );

    return m;
}

@Inject
@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Tests and Interceptors</summary>
<div class="content">
<div class="paragraph">
<p>Tests are actually full CDI beans, so you can apply CDI interceptors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTest
@Stereotype
@Transactional
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface TransactionalQuarkusTest {
}

@TransactionalQuarkusTest
public class TestStereotypeTestCase {}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Amazon DynamoDB</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener">Amazon DynamoDB</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-amazon-dynamodb"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
DynamoDbClient dynamoDB;

@Inject
DynamoDbAsyncClient dynamoDB;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use it as a local DynamoDB instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.dynamodb.region=
    eu-central-1
quarkus.dynamodb.endpoint-override=
    http://localhost:8000
quarkus.dynamodb.credentials.type=STATIC
quarkus.dynamodb.credentials.static-provider
    .access-key-id=test-key
quarkus.dynamodb.credentials.static-provider
.secret-access-key=test-secret</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to work with an AWS account, you’d need to set it with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">quarkus.dynamodb.region=&lt;YOUR_REGION&gt;
quarkus.dynamodb.credentials.type=DEFAULT</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>DEFAULT</code> credentials provider chain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>System properties <code>aws.accessKeyId</code>, <code>aws.secretKey</code></p>
</li>
<li>
<p>Env. Varables <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code></p>
</li>
<li>
<p>Credentials profile <code>~/.aws/credentials</code></p>
</li>
<li>
<p>Credentials through the Amazon EC2 container service if the <code>AWS_CONTAINER_CREDENTIALS_RELATIVE_URI</code> set</p>
</li>
<li>
<p>Credentials through Amazon EC2 metadata service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Configuration parameters prefixed with <code>quarkus.dynamodb</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enable-endpoint-discovery</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint discovery for a service API that supports endpoint discovery.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>endpoint-override</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Configure the endpoint with which the SDK should communicate.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>api-call-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time to complete an execution.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>interceptors</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of class interceptors.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Configuration parameters prefixed with <code>quarkus.dynamodb.aws</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>region</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Region that hosts DynamoDB.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DEFAULT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Credentials that should be used <code>DEFAULT</code>, <code>STATIC</code>, <code>SYSTEM_PROPERTY</code>, <code>ENV_VARIABLE</code>, <code>PROFILE</code>, <code>CONTAINER</code>, <code>INSTANCE_PROFILE</code>, <code>PROCESS</code>, <code>ANONYMOUS</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Credentials specific parameters prefixed with <code>quarkus.dynamodb.aws.credentials</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">DEFAULT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default-provider.async-credential-update-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should fetch credentials async.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default-provider.reuse-last-provider-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should reuse the last successful credentials.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">STATIC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>static-provider.access-key-id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AWS access key id.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>static-provider.secret-access-key</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AWS secret access key.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROFILE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>profile-provider.profile-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the profile to use.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROCESS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.command</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Command to execute to retrieve credentials.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.process-output-limit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>1024</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max bytes to retrieve from process.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.credential-refresh-threshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT15S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The amount of time between credentials expire and credentials refreshed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.async-credential-update-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should fetch credentials async.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In case of synchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.sync-client</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection acquisation timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-max-idle-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>60S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time to connection to be opened.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-time-to-live</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time connection to be open.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>socket-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time to wait for data.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connections</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>50</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max connections.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>expect-continue-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Client send an HTTP <code>expect-continue</code> handsake.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>use-idle-connection-reaper</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connections in pool should be closed asynchronously.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.endpoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint of the proxy server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables HTTP proxy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Proxy username.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Proxy password.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.ntlm-domain</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For NTLM, domain name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.ntlm-workstation</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For NTLM, workstation name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.preemptive-basic-authentication-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Authenticate pre-emptively.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.non-proxy-hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of non proxy hosts.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>system-property</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to key store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store type.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store password.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In case of asynchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.async-client</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection acquisation timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-max-idle-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>60S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time to connection to be opened.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-time-to-live</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time connection to be open.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-concurrency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>50</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max number of concurrent connections.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>use-idle-connection-reaper</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connections in pool should be closed asynchronously.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>read-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Read timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Write timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.endpoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint of the proxy server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables HTTP proxy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.non-proxy-hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of non proxy hosts.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>system-property</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to key store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store type.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store password.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ssl-provider</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SSL Provider (<code>jdk</code>, <code>openssl</code>, <code>openssl-refcnt</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>protocol</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>HTTP_1_1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets the HTTP protocol.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-http2-streams</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max number of concurrent streams.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.override</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable custom event loop conf.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.number-of-threads</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Number of threads to use in event loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.thread-name-prefix</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>aws-java-sdk-NettyEventLoop</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Prefix of thread names.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">Neo4j</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://neo4j.com/" target="_blank" rel="noopener">Neo4j</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-neo4j"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.neo4j.driver.Driver driver;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration properties:</p>
</div>
<div class="paragraph">
<p><code>quarkus.neo4j</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>uri</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>localhost:7687</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI of Neo4j.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>authentication</code>
<code>.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>neo4j</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>authentication</code>
<code>.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>neo4j</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>authentication</code>
<code>.disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.metrics-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable metrics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.log-leaked-sessions</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable leaked sessions logging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.max-connection-pool-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>100</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max amount of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.max-connection-lifetime</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1H</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pooled connections older will be closed and removed from the pool.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.connection-acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1M</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timout for connection adquisation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.idle-time-before-connection-test</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>-1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pooled connections idled in the pool for longer than this timeout will be tested before they are used.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As Neo4j uses SSL communication by default, to create a native executable you need to compile with next options GraalVM options:</p>
</div>
<div class="paragraph">
<p><code>-H:EnableURLProtocols=http,https --enable-all-security-services -H:+JNI</code></p>
</div>
<div class="paragraph">
<p>And Quarkus Maven Plugin with next configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;
&lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;native-image&lt;/id&gt;
        &lt;goals&gt;
            &lt;goal&gt;native-image&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
            &lt;enableHttpUrlHandler&gt;true
            &lt;/enableHttpUrlHandler&gt;
            &lt;enableHttpsUrlHandler&gt;true
            &lt;/enableHttpsUrlHandler&gt;
            &lt;enableAllSecurityServices&gt;true
            &lt;/enableAllSecurityServices&gt;
            &lt;enableJni&gt;true&lt;/enableJni&gt;
        &lt;/configuration&gt;
    &lt;/execution&gt;
&lt;/executions&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, and as a not recommended way in production, you can disable SSL and Quarkus will disable Bolt SSL as well. <code>quarkus.ssl.native=false</code>.</p>
</div>
<div class="paragraph">
<p>If you are using Neo4j 4.0, you can use fully reactive.
Add next depenency management <code>io.projectreactor:reactor-bom:Californium-SR4:pom:import</code> and dependency: <code>io.projectreactor:reactor-core</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public Publisher&lt;String&gt; get() {
        return Flux.using(driver::rxSession, ...);
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Apache Tika</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrets with <a href="https://tika.apache.org/" target="_blank" rel="noopener">Apache Tika</a> to detect and extract metadata/text from different file types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-tika"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
io.quarkus.tika.TikaParser parser;

@POST
@Path("/text")
@Consumes({ "text/plain", "application/pdf",
            "application/vnd.oasis.opendocument.text" })
@Produces(MediaType.TEXT_PLAIN)
public String extractText(InputStream stream) {
    return parser.parse(stream).getText();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can configure Apache Tika in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika.tika-config-path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika-config.xml</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to the Tika configuration resource.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.tika.parsers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CSV of the abbreviated or full parser class to be loaded by the extension.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika.append-embedded-content</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The document may have other embedded documents. Set if autmatically append.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">Kubernetes Mock Server</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus provides a Kubernetes Mock test resource that starts a mock of Kubernetes API server and sets the proper environment variables needed by Kubernetes Client.</p>
</div>
<div class="paragraph">
<p>Register next dependency: <code>io.quarkus:quarkus-test-kubernetes-client:test</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(KubernetesMockServerTestResource.class)
@QuarkusTest
public class KubernetesClientTest {

    @MockServer
    private KubernetesMockServer mockServer;

    @Test
    public void test() {
        final Pod pod1 = ...
        mockServer
            .expect()
            .get()
            .withPath("/api/v1/namespaces/test/pods")
            .andReturn(200,
                new PodListBuilder()
                .withNewMetadata()
                .withResourceVersion("1")
                .endMetadata()
                .withItems(pod1, pod2)
                .build())
            .always();
    }
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">MongoDB Client</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://www.mongodb.com/" target="_blank" rel="noopener">MongoDB</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-mongodb-client"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
com.mongodb.client.MongoClient client;

@Inject
io.quarkus.mongodb.ReactiveMongoClient client;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mongodb.connection-string=mongodb://localhost:27018
quarkus.mongodb.write-concern.journal=false</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>quarkus.mongodb</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MongoDB connection URI.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>List&lt;String&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Addresses passed as <code>host:port</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>application-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-pool-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>min-pool-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connection-idle-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle time of a pooled connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connection-life-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Life time of pooled connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>wait-queue-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum wait time for new connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>maintenance-frequency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time period between runs of maintenance job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>maintenance-initial-delay</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait before running the first maintenance job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>wait-queue-multiple</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Multiplied with <code>max-pool-size</code> gives max numer of threads waiting.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>socket-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-insecure</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [false]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insecure TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [false]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable TLS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>replica-set-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implies hosts given are a seed list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>server-selection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait for server selection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>local-threshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum ping time to make a server eligible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>heartbeat-frequency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frequency to determine the state of servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>read-preference</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>primary</code>,
<code>primaryPreferred</code>,
<code>secondary</code>,
<code>secondaryPreferred</code>,
<code>nearest</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read preferences.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-wait-queue-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of concurrent operations allowed to wait.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.safe</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [true]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures are writes are ack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.journal</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [true]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Journal writing aspect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.w</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to all write commands.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.retry-writes</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [false]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retry writes if network fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.w-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout to all write commands.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.auth-mechanism</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MONGO-CR</code>, <code>GSSAPI</code>, <code>PLAIN</code>, <code>MONGODB-X509</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.auth-source</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source of the authentication credentials.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.auth-mechanism-properties</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Map&lt;String, String&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication mechanism properties.</p></td>
</tr>
</tbody>
</table>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_18_0"><a class="anchor" href="#_version_0_18_0"></a><a class="link" href="#_version_0_18_0">Version 0.18.0</a></h3>
<details>
<summary class="title">JAX-RS</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus uses JAX-RS to define <a href="https://github.com/jax-rs" target="_blank" rel="noopener">REST-ful web APIs</a>.
Under the covers, Rest-EASY is working with Vert.X directly without using any Servlet.</p>
</div>
<div class="paragraph">
<p>It is <strong>important</strong> to know that if you want to use any feature that implies a <code>Servlet</code> (ie Servlet Filters) then you need to add the <code>quarkus-undertow</code> extension to switch back to the <code>Servlet</code> ecosystem but generally speaking, you don&#8217;t need to add it as everything else is well-supported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/book")
public class BookResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Book&gt; getAllBooks() {}

    @POST
    @Produces(MediaType.APPLICATION_JSON)
    public Response createBook(Book book) {}

    @DELETE
    @Path("{isbn}")
    @Produces(MediaType.APPLICATION_JSON)
    public Response deleteBook(
        @PathParam("isbn") String isbn) {}


    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("search")
    public Response searchBook(
        @QueryParam("description") String description) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get information from request:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@PathParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets content from request URI.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>/book/{id} @PathParam("id")</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@QueryParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets query parameter.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/book?desc="" @QueryParam("desc)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@FormParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets form parameter.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@MatrixParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get URI matrix parameter.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>/book;author=mkyong;country=malaysia</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@CookieParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets cookie param by name.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@HeaderParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets header parameter by name.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Valid HTTP method annotations provided by the spec are: <code>@GET</code>, <code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code>, <code>@PATCH</code>, <code>@HEAD</code> and <code>@OPTIONS</code>.</p>
</div>
<div class="paragraph">
<p>You can create new annotations that bind to HTTP methods not defined by the spec.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@HttpMethod("LOCK")
public @interface LOCK {
}

@LOCK
public void lockIt() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Injecting</strong></p>
</div>
<div class="paragraph">
<p>Using <code>@Context</code> annotation to inject JAX-RS and Servlet information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
public String getBase(@Context UriInfo uriInfo) {
    return uriInfo.getBaseUri();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible injectable objects: <code>SecurityContext</code>, <code>Request</code>, <code>Application</code>, <code>Configuration</code>, <code>Providers</code>, <code>ResourceContext</code>, <code>ServletConfig</code>, <code>ServletContext</code>, <code>HttpServletRequest</code>, <code>HttpServletResponse</code>, <code>HttpHeaders</code>, <code>Urinfo</code>, <code>SseEventSink</code> and <code>Sse</code>.</p>
</div>
</div>
</details>
<details>
<summary class="title">Quarkus Test Resource</summary>
<div class="content">
<div class="paragraph">
<p>You can execute some logic before the first test run (<code>start</code>) and execute some logic at the end of the test suite (<code>stop</code>).</p>
</div>
<div class="paragraph">
<p>You need to create a class implementing <code>QuarkusTestResourceLifecycleManager</code> interface and register it in the test via <code>@QuarkusTestResource</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyCustomTestResource
    implements QuarkusTestResourceLifecycleManager {

    @Override
    public Map&lt;String, String&gt; start() {
        // return system properties that
        // should be set for the running test
        return Collections.emptyMap();
    }

    @Override
    public void stop() {
    }

    // optional
    @Override
    public void inject(Object testInstance) {
    }

    // optional
    @Override
    public int order() {
        return 0;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Returning new system properties implies running parallel tests in different JVMs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And the usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(MyCustomTestResource.class)
public class MyTest {
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">H2 Quarkus Test Resource</summary>
<div class="content">
<div class="paragraph">
<p>There is a Quarkus Test Resource that starts and stops H2 server before and after test suite.</p>
</div>
<div class="paragraph">
<p>Register dependency <code>io.quarkus:quarkus-test-h2:test</code>.</p>
</div>
<div class="paragraph">
<p>And annotate the test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(H2DatabaseTestResource.class)
public class FlywayTestResources {
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Flushing</summary>
<div class="content">
<div class="paragraph">
<p>You can force flush operation by calling <code>.flush()</code> or <code>.persistAndFlush()</code> to make it in a single call.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This flush is less efficient and you still need to commit transaction.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Fabric8 Kubernetes Client</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://github.com/fabric8io/kubernetes-client" target="_blank" rel="noopener">Fabric8 Kubernetes Client</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="terminal" class="language-terminal hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kubernetes-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of Kubernetes client parameters.</p>
</div>
<div class="paragraph">
<p><code>quarkus.kubernetes-client</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>trust-certs</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust self-signed certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>master-url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of Kubernetes API server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>namesapce</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default namespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ca-cert-file</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CA certificate data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-cert-file</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-cert-data</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-data</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-algorithm</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key algorithm.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-passphrase</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key passphrase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>watch-reconnect-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT1S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Watch reconnect interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>watch-reconnect-limit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>-1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum reconnect attempts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>request-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>rolling-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT15M</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a rollout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>http-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP proxy used to access the Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>https-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>``</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS proxy used to access the Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy-username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy-password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>no-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP addresses or hosts to exclude from proxying</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Or programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Dependent
public class KubernetesClientProducer {

    @Produces
    public KubernetesClient kubernetesClient() {
        Config config = new ConfigBuilder()
            .withMasterUrl("https://mymaster.com")
            .build();
        return new DefaultKubernetesClient(config);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And inject it on code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KubernetesClient client;

ServiceList myServices = client.services().list();

Service myservice = client.services()
        .inNamespace("default")
        .withName("myservice")
        .get();

CustomResourceDefinitionList crds = client
        .customResourceDefinitions()
        .list();

dummyCRD = new CustomResourceDefinitionBuilder()
        ...
        .build()
client.customResourceDefinitions()
        .create(dummyCRD);</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">DataSource Properties</summary>
<div class="content">
<div class="paragraph">
<p>List of datasource parameters.</p>
</div>
<div class="paragraph">
<p><code>quarkus.datasource</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>driver</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>min-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Integer</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Integer</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>initial-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Integer</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>background-validation-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>java.time.Duration</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>java.time.Duration</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>leak-detection-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>java.time.Duration</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>idle-removal-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>java.time.Duration</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>transaction-isolation-level</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.quarkus.agroal.runtime</code>
<code>.TransactionIsolationLevel</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enable-metrics</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Boolean</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>xa</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Boolean</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>validation-query-sql</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Boolean</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_17_0"><a class="anchor" href="#_version_0_17_0"></a><a class="link" href="#_version_0_17_0">Version 0.17.0</a></h3>
<details>
<summary class="title">Hibernate Search</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener">Elasticsearch</a> to provide a full-featured full-text search using <a href="https://hibernate.org/search/" target="_blank" rel="noopener">Hibernate Search</a> API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-hibernate-search-elasticsearch"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to annotate your model with Hibernate Search API to index it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
@Indexed
public class Author extends PanacheEntity {

    @FullTextField(analyzer = "english")
    public String bio;

    @FullTextField(analyzer = "name")
    @KeywordField(name = "firstName_sort",
        sortable = Sortable.YES,
        normalizer = "sort")
    public String firstName;

    @OneToMany
    @IndexedEmbedded
    public List&lt;Book&gt; books;

}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It is not mandatory to use Panache.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You need to define the analyzers and normalizers defined in annotations.
You only need to implement <code>ElasticsearchAnalysisConfigurer</code> interface and configure it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyQuarkusAnalysisConfigurer
            implements ElasticsearchAnalysisConfigurer {

    @Override
    public void configure(
        ElasticsearchAnalysisDefinitionContainerContext ctx)
    {
            ctx.analyzer("english").custom()
                .withTokenizer("standard")
                .withTokenFilters("asciifolding",
                    "lowercase", "porter_stem");

        ctx.normalizer("sort").custom()
            .withTokenFilters("asciifolding", "lowercase");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use Hibernate Search in REST service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class LibraryResource {

    @Inject
    EntityManager em;

    @Transactional
    public List&lt;Author&gt; searchAuthors(
        @QueryParam("pattern") String pattern) {
        return Search.getSearchSession(em)
            .search(Author.class)
            .predicate(f -&gt;
                pattern == null || pattern.isEmpty() ?
                    f.matchAll() :
                    f.simpleQueryString()
                        .onFields("firstName",
                            "lastName", "books.title")
                        .matching(pattern)
                )
            .sort(f -&gt; f.byField("lastName_sort")
            .then().byField("firstName_sort"))
            .fetchHits();
    }</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When not using Hibernate ORM, index data using <code>Search.getSearchSession(em).createIndexer()</code> <code>.startAndWait()</code> at startup time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Configure the extension in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.hibernate-search.elasticsearch.version=7
quarkus.hibernate-search.elasticsearch.
    analysis-configurer=MyQuarkusAnalysisConfigurer
quarkus.hibernate-search.elasticsearch.
    automatic-indexing.synchronization-strategy=searchable
quarkus.hibernate-search.elasticsearch.
    index-defaults.lifecycle.strategy=drop-and-create
quarkus.hibernate-search.elasticsearch.
    index-defaults.lifecycle.required-status=yellow</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of Hibernate-Elasticsearch properties prefixed with <code>quarkus.hibernate-search.elasticsearch</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>backends</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map of configuration of additional backends.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>version</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of Elasticsearch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>analysis-configurer</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class or name of the neab used to configure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Elasticsearch servers hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for auth.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for auth.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration of connection timeout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connections</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of connections to servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connections-per-route</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of connections to server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>indexes</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Per-index specific configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>discovery.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables automatic discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>discovery.refresh-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refresh interval of node list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>discovery.default-scheme</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scheme to be used for the new nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>automatic-indexing.synchronization-strategy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Status for which you wait before considering the operation completed (<code>queued</code>,<code>committed</code> or <code>searchable</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>automatic-indexing.enable-dirty-check</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, re-indexing of is skipped if the changes are on properties that are not used when indexing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>index-defaults.lifecycle.strategy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Index lifecycle (<code>none</code>, <code>validate</code>, <code>update</code>, <code>create</code>, <code>drop-and-create</code>, <code>drop-abd-create-drop</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>index-defaults.lifecycle.required-status</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimal cluster status (<code>green</code>, <code>yellow</code>, <code>red</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>index-defaults.lifecycle.required-status-wait-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting time before failing the bootstrap.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>index-defaults.refresh-after-write</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set if index should be refreshed after writes.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Possible annotations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Indexed</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register entity as full text index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@FullTextField</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full text search. Need to set an analyzer to split tokens.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@KeywordField</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string is kept as one single token but can be normalized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>IndexedEmbedded</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include the Book fields into the Author index.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@ContainerExtraction</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets how to extract a value from container, e.g from a <code>Map</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@DocumentId</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map an unusual entity identifier to a document identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@GenericField</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full text index for any supported type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@IdentifierBridgeRef</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference to the identifier bridge to use for a <code>@DocumentId</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@IndexingDependency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How a dependency of the indexing process to a property should affect automatic reindexing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@ObjectPath</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@ScaledNumberField</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>java.math.BigDecimal</code> or <code>java.math.BigInteger</code> that you need higher precision.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">Scheduled Tasks</summary>
<div class="content">
<div class="paragraph">
<p>You can schedule periodic tasks with Quarkus.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CounterBean {

    @Scheduled(every="10s")
    void increment() {}

    @Scheduled(cron="0 15 10 * * ?")
    void morningTask() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>every</code> and <code>cron</code> parameters can be surrounded with <code>{}</code> and the value is used as config property to get the value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Scheduled(cron = "{morning.check.cron.expr}")
void morningTask() {}</pre>
</div>
</div>
<div class="paragraph">
<p>And configure the property into <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">morning.check.cron.expr=0 15 10 * * ?</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">HTTP Filters</summary>
<div class="content">
<div class="paragraph">
<p>HTTP request and response can be intercepted to manipulate the metadata (ie headers, parameters, media type, &#8230;&#8203;) or abort a request.
You only need to implement the next <code>ContainerRequestFilter</code> and <code>ContainerResponseFilter</code> JAX-RS interfaces respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Provider
public class LoggingFilter
        implements ContainerRequestFilter {

    @Context
    UriInfo info;

    @Context
    HttpServletRequest request;

    @Override
    public void filter(ContainerRequestContext context) {
        final String method = context.getMethod();
        final String path = info.getPath();
        final String address = request.getRemoteAddr();
        System.out.println("Request %s %s from IP %s",
                method, path, address);
    }

}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">MicroProfile Health 2.0</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus relies on <a href="https://github.com/eclipse/microprofile-health" target="_blank" rel="noopener">MicroProfile Health</a> spec to provide health checks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-health"</code></pre>
</div>
</div>
<div class="paragraph">
<p>By just adding this extension, an endpoint is registered to <code>/health</code> providing a default health check.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
    "status": "UP",
    "checks": [
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create a custom health check you need to implement the <code>HealthCheck</code> interface and annotate either with <code>@Readiness</code> (ready to process requests) or <code>@Liveness</code> (is running) annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Readiness
public class DatabaseHealthCheck implements HealthCheck {
    @Override
    public HealthCheckResponse call() {
        HealthCheckResponseBuilder responseBuilder =
            HealthCheckResponse.named("Database conn");

        try {
            checkDatabaseConnection();
            responseBuilder.withData("connection", true);
            responseBuilder.up();
        } catch (IOException e) {
            // cannot access the database
            responseBuilder.down()
                    .withData("error", e.getMessage());
        }
        return responseBuilder.build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Builds the next output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
    "status": "UP",
    "checks": [
        {
            "name": "Database conn",
            "status": "UP",
            "data": {
                "connection": true
            }
        }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since health checks are CDI beans, you can do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class DatabaseHealthCheck {

    @Produces
    @Liveness
    HealthCheck check1() {
      return io.smallrye.health.HealthStatus
                                .up("successful-live");
    }

    @Produces
    @Readiness
    HealthCheck check2() {
      return HealthStatus
                .state("successful-read", this::isReady)
    }

    private boolean isReady() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can ping liveness or readiness health checks individually by querying <code>/health/live</code> or <code>/health/ready</code>.</p>
</div>
<div class="paragraph">
<p>Quarkus comes with some <code>HealthCheck</code> implementations for checking service status.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SocketHealthCheck</strong>: checks if host is reachable using a socket.</p>
</li>
<li>
<p><strong>UrlHealthCheck</strong>: checks if host is reachable using a Http URL connection.</p>
</li>
<li>
<p><strong>InetAddressHealthCheck</strong>: checks if host is reachable using <code>InetAddress.isReachable</code> method.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
@Liveness
HealthCheck check1() {
    return new UrlHealthCheck("https://www.google.com")
            .name("Google-Check");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to override or set manually readiness/liveness probes, you can do it by setting health properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.smallrye-health.root-path=/hello
quarkus.smallrye-health.liveness-path=/customlive
quarkus.smallrye-health.readiness-path=/customready</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Custom OpenAPI path</summary>
<div class="content">
<div class="paragraph">
<p>You can update the OpenApi path by setting <code>quarkus.smallrye-openapi.path</code> property.</p>
</div>
</div>
</details>
<details>
<summary class="title">Mock annotaiton</summary>
<div class="content">
<div class="paragraph">
<p>A stereotype annotation <code>io.quarkus.test.Mock</code> is provided declaring <code>@Alternative</code>, <code>@Priority(1)</code> and <code>@Dependent</code>.</p>
</div>
</div>
</details>
<details>
<summary class="title">Email Test</summary>
<div class="content">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
if you enable SSL for the mailer and you want to build a native executable, you will need to enable the SSL support <code>quarkus.ssl.native=true</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Testing</strong></p>
</div>
<div class="paragraph">
<p>If <code>quarkus.mailer.mock</code> is set to <code>true</code>, which is the default value in <code>dev</code> and <code>test</code> mode, you can inject <code>MockMailbox</code> to get the sent messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MockMailbox mailbox;

@BeforeEach
void init() {
    mailbox.clear();
}

List&lt;Mail&gt; sent = mailbox
                    .getMessagesSentTo("to@acme.org");</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Refactor on configuration properties and Kafka, AMQP, MQTT support</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream("generated-price")
Emitter&lt;String&gt; emitter;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Patterns</strong></p>
</div>
<div class="paragraph">
<p><em>REST API &#8594; Message</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(“in”)
Emitter&lt;String&gt; emitter;

emitter.send(message);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; Message</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Incoming(“in”)
@Outgoing(“out”)
public String process(String in) {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; SSE</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(“out”)
Publisher&lt;String&gt; result;

@GET
@Produces(SERVER_SENT_EVENTS)
public Publisher&lt;String&gt; stream() {
    return result;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; Business Logic</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ReceiverMessages {
    @Incoming("prices")
    public void print(String price) {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible implementations are:</p>
</div>
<div class="paragraph">
<p><strong>In-Memory</strong></p>
</div>
<div class="paragraph">
<p>If the stream is not configured then it is assumed to be an in-memory stream, if not then stream type is defined by <code>connector</code> field.</p>
</div>
<div class="paragraph">
<p><strong>Kafka</strong></p>
</div>
<div class="paragraph">
<p>To integrate with Kafka you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
    io.quarkus:quarkus-smallrye-reactive-messaging-kafka"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>Kafka configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The <code>connector</code> type is <code>smallrye-kafka</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.generated-price.connector=
    smallrye-kafka
mp.messaging.outgoing.generated-price.topic=
    prices
mp.messaging.outgoing.generated-price.bootstrap.servers=
    localhost:9092
mp.messaging.outgoing.generated-price.value.serializer=
    org.apache.kafka.common.serialization.IntegerSerializer

mp.messaging.incoming.prices.connector=
    smallrye-kafka
mp.messaging.incoming.prices.value.deserializer=
    org.apache.kafka.common.serialization.IntegerDeserializer</code></pre>
</div>
</div>
<div class="paragraph">
<p>A complete list of supported properties are in Kafka site. For the <a href="https://kafka.apache.org/documentation/#producerconfigs" target="_blank" rel="noopener">producer</a> and for <a href="https://kafka.apache.org/documentation/#consumerconfigs" target="_blank" rel="noopener">consumer</a></p>
</div>
<div class="paragraph">
<p><em>JSON-B Serializer/Deserializer</em></p>
</div>
<div class="paragraph">
<p>You can use JSON-B to serialize/deserialize objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kafka-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To serialize you can use <code>io.quarkus.kafka.client.serialization.JsonbSerializer</code>.</p>
</div>
<div class="paragraph">
<p>To deserialize you need to extend <code>io.quarkus.kafka.client.serialization.JsonbDeserializer</code> and provide a type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class BeerDeserializer
    extends JsonbDeserializer&lt;Beer&gt; {

    public BeerDeserializer() {
        super(Beer.class);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>AMQP</strong></p>
</div>
<div class="paragraph">
<p>To integrate with AMQP you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="reactive-messaging-amqp"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>AMQP configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.
Special properties <code>amqp-username</code> and <code>amqp-password</code> are used to configure AMQP broker credentials.</p>
</div>
<div class="paragraph">
<p>The connector type is <code>smallrye-amqp</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">amqp-username=quarkus
amqp-password=quarkus
# write
mp.messaging.outgoing.generated-price.connector=
    smallrye-amqp
mp.messaging.outgoing.generated-price.address=
    prices
mp.messaging.outgoing.generated-price.durable=
    true
# read
mp.messaging.incoming.prices.connector=
    smallrye-amqp
mp.messaging.incoming.prices.durable=
    true</code></pre>
</div>
</div>
<div class="paragraph">
<p>A complete list of supported properties for <a href="https://smallrye.io/smallrye-reactive-messaging/#_interacting_using_amqp" target="_blank" rel="noopener">AMQP</a>.</p>
</div>
<div class="paragraph">
<p><strong>MQTT</strong></p>
</div>
<div class="paragraph">
<p>To integrate with MQTT you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="vertx, smallrye-reactive-streams-operators
        smallrye-reactive-messaging"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And add <code>io.smallrye.reactive:smallrye-reactive-messaging-mqtt-1.0:0.0.10</code> dependency in your build tool.</p>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>MQTT configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The connector type is <code>smallrye-mqtt</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.topic-price.type=
    smallrye-mqtt
mp.messaging.outgoing.topic-price.topic=
    prices
mp.messaging.outgoing.topic-price.host=
    localhost
mp.messaging.outgoing.topic-price.port=
    1883
mp.messaging.outgoing.topic-price.auto-generated-client-id=
    true

mp.messaging.incoming.prices.type=
    smallrye-mqtt
mp.messaging.incoming.prices.topic=
    prices
mp.messaging.incoming.prices.host=
    localhost
mp.messaging.incoming.prices.port=
    1883
mp.messaging.incoming.prices.auto-generated-client-id=
    true</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Kogito</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="http://www.kiegroup.org/" target="_blank" rel="noopener">Kogito</a>, a next-generation business automation toolkit from Drools and jBPM projects for adding business automation capabilities.</p>
</div>
<div class="paragraph">
<p>To start using it you only need to add the next extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="kogito"</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Kafka Streams</summary>
<div class="content">
<div class="paragraph">
<p>Create streaming queries with the Kafka Streams API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="kafka-streams"</code></pre>
</div>
</div>
<div class="paragraph">
<p>All we need to do for that is to declare a CDI producer method which returns the Kafka Streams <code>org.apache.kafka.streams.Topology</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class TopologyProducer {
    @Produces
    public Topology buildTopology() {
        org.apache.kafka.streams.StreamsBuilder.StreamsBuilder
            builder = new StreamsBuilder();
        // ...
        builder.stream()
            .join()
            // ...
            .toStream()
            .to();
        return builder.build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Previous example produces content to another stream.
If you want to write interactive queries, you can use Kafka streams.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KafkaStreams streams;

return streams
        .store("stream", QueryableStoreTypes.keyValueStore());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Kafka Streams extension is configured via the Quarkus configuration file <code>application.properties</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kafka-streams.bootstrap-servers=localhost:9092
quarkus.kafka-streams.application-id=temperature-aggregator
quarkus.kafka-streams.application-server=${hostname}:8080
quarkus.kafka-streams.topics=weather-stations,temperature-values

kafka-streams.cache.max.bytes.buffering=10240
kafka-streams.commit.interval.ms=1000</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>IMPORTANT:</strong> All the properties within the <code>kafka-streams</code> namespace are passed through as-is to the Kafka Streams engine. Changing their values requires a rebuild of the application.</p>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_16_0"><a class="anchor" href="#_version_0_16_0"></a><a class="link" href="#_version_0_16_0">Version 0.16.0</a></h3>
<details>
<summary class="title">Apache Camel</summary>
<div class="content">
<div class="paragraph">
<p>Apache Camel Quarkus has its own site: <a href="https://github.com/apache/camel-quarkus" class="bare">https://github.com/apache/camel-quarkus</a></p>
</div>
</div>
</details>
<details>
<summary class="title">WebSockets</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus can be used to handling web sockets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-undertow-websockets"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And web sockets classes can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ServerEndpoint("/chat/{username}")
@ApplicationScoped
public class ChatSocket {

    @OnOpen
    public void onOpen(Session session,
                @PathParam("username") String username) {}

    @OnClose
    public void onClose(..) {}

    @OnError
    public void onError(..., Throwable throwable) {}

    @OnMessage
    public void onMessage(...) {}

}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">OpenAPI</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus can expose its API description as <a href="https://swagger.io/specification/" target="_blank" rel="noopener">OpenAPI</a> spec and test it using <a href="https://swagger.io/tools/swagger-ui/" target="_blank" rel="noopener">Swagger UI</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-openapi"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you only need to access to <code>/openapi</code> to get OpenAPI v3 spec of services.</p>
</div>
<div class="paragraph">
<p>You can update the OpenApi path by setting <code>quarkus.smallrye-openapi.path</code> property.</p>
</div>
<div class="paragraph">
<p>Also, in case of starting Quarkus application in <code>dev</code> or <code>test</code> mode, Swagger UI is accessible at <code>/swagger-ui</code>.
If you want to use it in production mode you need to set <code>quarkus.swagger-ui.always-include</code> property to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>You can update the Swagger UI path by setting <code>quarkus.swagger-ui.path</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.swagger-ui.path=/my-custom-path</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Maven List Extensions</summary>
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can use <code>-DsearchPattern=panache</code> to filter out all extensions except the ones matching the expression.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Mail Sender</summary>
<div class="content">
<div class="paragraph">
<p>You can send emails by using Quarkus Mailer extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-mailer"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can inject two possible classes <code>io.quarkus.mailer.Mailer</code> for synchronous API or <code>io.quarkus.mailer.ReactiveMailer</code> for asynchronous API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Mailer mailer;

@Inject
ReactiveMailer reactiveMailer;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then you can use them to send an email:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">mailer.send(
    Mail.withText("to@acme.org", "Subject", "Body")
);

CompletionStage&lt;Void&gt; stage =
    reactiveMailer.send(
        Mail.withText("to@acme.org", "Subject", "Body")
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Mail</code> class contains methods to add <code>cc</code>, <code>bcc</code>, <code>headers</code>, <code>bounce address</code>, <code>reply to</code>, <code>attachments</code>, <code>inline attachments</code> and <code>html body</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">mailer.send(Mail.withHtml("to@acme.org", "Subject", body)
      .addInlineAttachment("quarkus.png",
            new File("quarkus.png"),
            "image/png", "&lt;my-image@quarkus.io&gt;"));</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you need deep control you can inject Vert.x mail client <code>@Inject  MailClient client;</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You need to configure SMTP properties to be able to send an email:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mailer.from=test@quarkus.io
quarkus.mailer.host=smtp.sendgrid.net
quarkus.mailer.port=465
quarkus.mailer.ssl=true
quarkus.mailer.username=....
quarkus.mailer.password=....</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of Mailer parameters.
<code>quarkus.</code> as a prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.from</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default address.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.mock</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>false in <code>prod</code>, true in <code>dev</code> and <code>test</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emails not sent, just printed and stored in a <code>MockMailbox</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.bounce-address</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.host</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>mandatory</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.port</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.ssl</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables SSL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.trust-all</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust all certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.max-pool-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max open connections .</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.own-host-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Hostname for <code>HELO/EHLO</code> and <code>Message-ID</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.keep-alive</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection pool enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.disable-esmtp</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable ESMTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.start-tls</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>OPTIONAL</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS security mode. <code>DISABLED</code>, <code>OPTIONAL</code>, <code>REQUIRED</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.login</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NONE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Login mode. <code>NONE</code>, <code>OPTIONAL</code>, <code>REQUIRED</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.auth-methods</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All methods.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Space-separated list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.key-store</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path of the key store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.key-store-password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key store password.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
if you enable SSL for the mailer and you want to build a native executable, you will need to enable the SSL support <code>quarkus.ssl.native=true</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Testing</strong></p>
</div>
<div class="paragraph">
<p>If <code>quarkus.mailer.mock</code> is set to <code>true</code>, which is the default value in <code>dev</code> and <code>test</code> mode, you can inject <code>MockMailbox</code> to get the sent messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MockMailbox mailbox;

@BeforeEach
void init() {
    mailbox.clear();
}

List&lt;Mail&gt; sent = mailbox
                    .getMessagesSentTo("to@acme.org");</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Custom ConfigSource</summary>
<div class="content">
<div class="paragraph">
<p><strong>Custom Loader</strong></p>
</div>
<div class="paragraph">
<p>You can implement your own <code>ConfigSource</code> to load configuration from different places than the default ones provided by Quarkus.
For example, database, custom XML, REST Endpoints, &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>You need to create a new class and implement <code>ConfigSource</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package com.acme.config;
public class InMemoryConfig implements ConfigSource {

    private Map&lt;String, String&gt; prop = new HashMap&lt;&gt;();

    public InMemoryConfig() {
        // Init properties
    }

    @Override
    public int getOrdinal() {
        // The highest ordinal takes precedence
        return 900;
    }

    @Override
    public Map&lt;String, String&gt; getProperties() {
        return prop;
    }

    @Override
    public String getValue(String propertyName) {
        return prop.get(propertyName);
    }

    @Override
    public String getName() {
        return "MemoryConfigSource";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you need to register the <code>ConfigSource</code> as Java service.
Create a file with the following content:</p>
</div>
<div class="listingblock">
<div class="title">/META-INF/services/org.eclipse.microprofile.config.spi.ConfigSource</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">com.acme.config.InMemoryConfig</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Array config converters</summary>
<div class="content">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>Array</code>, <code>List</code> and <code>Set</code> are supported. The delimiter is comma (<code>,</code>) char and <code>\</code> is the escape char.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Custom config converters</summary>
<div class="content">
<div class="paragraph">
<p><strong>Custom Converters</strong></p>
</div>
<div class="paragraph">
<p>You can implement your own conversion types from String.
Implement <code>org.eclipse.microprofile.config.spi.Converter</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Priority(DEFAULT_QUARKUS_CONVERTER_PRIORITY + 100)
public class CustomInstantConverter
    implements Converter&lt;Instant&gt; {

    @Override
    public Instant convert(String value) {
        if ("now".equals(value.trim())) {
            return Instant.now();
        }
        return Instant.parse(value);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Priority</code> annotation is used to override the default <code>InstantConverter</code>.</p>
</div>
<div class="paragraph">
<p>Then you need to register the <code>Converter</code> as Java service.
Create a file with the following content:</p>
</div>
<div class="listingblock">
<div class="title">/META-INF/services/org.eclipse.microprofile.config.spi.Converter</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">com.acme.config.CustomInstantConverter</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Configuration Profiles</summary>
<div class="content">
<div class="paragraph">
<p><strong>Configuration Profiles</strong></p>
</div>
<div class="paragraph">
<p>Quarkus allow you to have multiple configuration in the same file (<code>application.properties</code>).</p>
</div>
<div class="paragraph">
<p>The syntax for this is <code>%{profile}.config.key=value</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.port=9090
%dev.quarkus.http.port=8181</code></pre>
</div>
</div>
<div class="paragraph">
<p>HTTP port will be 9090, unless the 'dev' profile is active.</p>
</div>
<div class="paragraph">
<p>Default profiles are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dev</code>: Activated when in development mode (<code>quarkus:dev</code>).</p>
</li>
<li>
<p><code>test</code>: Activated when running tests.</p>
</li>
<li>
<p><code>prod</code>: The default profile when not running in development or test mode</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can create custom profile names by enabling the profile either setting <code>quarkus.profile</code> system property or <code>QUARKUS_PROFILE</code> environment variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.port=9090
%staging.quarkus.http.port=9999</code></pre>
</div>
</div>
<div class="paragraph">
<p>And enable it <code>quarkus.profile=staging</code>.</p>
</div>
</div>
</details>
<details>
<summary class="title">ORM entities in external JAR</summary>
<div class="content">
<div class="paragraph">
<p>If entities are defined in external JAR, you need to enable in these projects the <code>Jandex</code> plugin in project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
    &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.3&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-index&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;jandex&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss&lt;/groupId&gt;
            &lt;artifactId&gt;jandex&lt;/artifactId&gt;
            &lt;version&gt;2.1.1.Final&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">CORS Filter</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus comes with a CORS filter that can be enabled via configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.cors=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prefix is <code>quarkus.http</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable CORS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors.origins</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Any request valid.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of origins allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors.methods</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any method valid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of methods valid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors.headers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any requested header valid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of valid allowed headers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors.exposed-headers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of valid exposed headers.</p></td>
</tr>
</tbody>
</table>
</div>
</details>
<details>
<summary class="title">DAO pattern</summary>
<div class="content">
<div class="paragraph">
<p>Also supports <em>DAO</em> pattern with <code>PanacheRepository&lt;TYPE&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class DeveloperRepository
    implements PanacheRepository&lt;Person&gt; {
   public Person findByName(String name){
     return find("name", name).firstResult();
   }
}</code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_version_0_15_0"><a class="anchor" href="#_version_0_15_0"></a><a class="link" href="#_version_0_15_0">Version 0.15.0</a></h3>
<details>
<summary class="title">Headers Propagation</summary>
<div class="content">
<div class="paragraph">
<p>If invokation happens within JAX-RS, you can propagate headers from incoming to outgoing by using next property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.eclipse.microprofile.rest.client.propagateHeaders=
            Authorization,MyCustomHeader</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Fault Tolerance</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus uses <a href="https://github.com/eclipse/microprofile-fault-tolerance" target="_blank" rel="noopener">MicroProfile Fault Tolerance</a> spec:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-fault-tolerance"</code></pre>
</div>
</div>
<div class="paragraph">
<p>MicroProfile Fault Tolerance spec uses CDI interceptor and it can be used in several elements such as CDI bean, JAX-RS resource or MicroProfile Rest Client.</p>
</div>
<div class="paragraph">
<p>To do automatic <strong>retries</strong> on a method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/api")
@RegisterRestClient
public interface WorldClockService {
    @GET @Path("/json/cet/now")
    @Produces(MediaType.APPLICATION_JSON)
    @Retry(maxRetries = 2)
    WorldClock getNow();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can set fallback code in case of an error by using <code>@Fallback</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Retry(maxRetries = 1)
@Fallback(fallbackMethod = "fallbackMethod")
WorldClock getNow(){}

public WorldClock fallbackMethod() {
    return new WorldClock();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>fallbackMethod</code> must have the same parameters and return type as the annotated method.</p>
</div>
<div class="paragraph">
<p>You can also set logic into a class that implements <code>FallbackHandler</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class RecoverFallback
            implements FallbackHandler&lt;WorldClock&gt; {
    @Override
    public WorldClock handle(ExecutionContext context) {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And set it in the annotation as value <code>@Fallback(RecoverFallback.class)</code>.</p>
</div>
<div class="paragraph">
<p>In case you want to use <strong>circuit breaker</strong> pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CircuitBreaker(requestVolumeThreshold = 4,
                failureRatio=0.75,
                delay = 1000)
WorldClock getNow(){}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If 3 <code>(4 x 0.75)</code> failures occur among the rolling window of 4 consecutive invocations then the circuit is opened for 1000 ms and then be back to half open.
If the invocation succeeds then the circuit is back to closed again.</p>
</div>
<div class="paragraph">
<p>You can use <strong>bulkahead</strong> pattern to limit the number of concurrent access to the same resource.
If the operation is synchronous it uses a semaphore approach, if it is asynchronous a thread-pool one.
When a request cannot be processed <code>BulkheadException</code> is thrown.
It can be used together with any other fault tolerance annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Bulkhead(5)
@Retry(maxRetries = 4,
       delay = 1000,
       retryOn = BulkheadException.class)
WorldClock getNow(){}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fault tolerance annotations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Properties</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>unit</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Retry</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>maxRetries</code>, <code>delay</code>, <code>delayUnit</code>, <code>maxDuration</code>, <code>durationUnit</code>, <code>jitter</code>, <code>jitterDelayUnit</code>, <code>retryOn</code>, <code>abortOn</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Fallback</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fallbackMethod</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Bulkhead</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>waitingTaskQueue</code> (only valid in asynchronous)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@CircuitBreaker</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>failOn</code>, <code>delay</code>, <code>delayUnit</code>, <code>requestVolumeThreshold</code>, <code>failureRatio</code>, <code>successThreshold</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Asynchronous</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can override annotation parameters via configuration file using property <code>[classname/methodname/]annotation/parameter</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClock/getNow/Retry/maxDuration=30
# Class scope
org.acme.quickstart.WorldClock/Retry/maxDuration=3000
# Global
Retry/maxDuration=3000</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also enable/disable policies using special parameter <code>enabled</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClock/getNow/Retry/enabled=false
# Disable everything except fallback
MP_Fault_Tolerance_NonFallback_Enabled=false</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
MicroProfile Fault Tolerance integrates with MicroProfile Metrics spec. You can disable it by setting <code>MP_Fault_Tolerance_Metrics_Enabled</code> to false.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Application Lifecycle</summary>
<div class="content">
<div class="paragraph">
<p>You can be notified when the application starts/stops by observing <code>StartupEvent</code> and <code>ShutdownEvent</code> events.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ApplicationLifecycle {
    void onStart(@Observes StartupEvent event) {}
    void onStop(@Observes ShutdownEvent event) {}
}</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Reactive Messaging</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus relies on MicroProfile <a href="https://github.com/eclipse/microprofile-reactive-messaging" target="_blank" rel="noopener">Reactive Messaging spec</a> to implement reactive messaging streams.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
        io.quarkus:quarkus-smallrye-reactive-messaging"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can just start using in-memory streams by using <code>@Incoming</code> to produce data and <code>@Outgoing</code> to consume data.</p>
</div>
<div class="paragraph">
<p>Produce every 5 seconds one piece of data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ProducerData {

    @Outgoing("my-in-memory")
    public Flowable&lt;Integer&gt; generate() {
        return Flowable.interval(5, TimeUnit.SECONDS)
                .map(tick -&gt; random.nextInt(100));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to dispatch to all subscribers you can annotate the method with <code>@Broadcast</code>.</p>
</div>
<div class="paragraph">
<p>Consumes generated data from <code>my-in-memory</code> stream.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ConsumerData {
    @Incoming("my-in-memory")
    public void randomNumber(int randomNumber) {
        System.out.println("Received " + randomNumber);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also inject an stream as a field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Stream("my-in-memory") Publisher&lt;Integer&gt; randomRumbers;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream("generated-price")
Emitter&lt;String&gt; emitter;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Patterns</strong></p>
</div>
<div class="paragraph">
<p><em>REST API &#8594; Message</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(“in”)
Emitter&lt;String&gt; emitter;

emitter.send(message);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; Message</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Incoming(“in”)
@Outgoing(“out”)
public String process(String in) {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; SSE</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(“out”)
Publisher&lt;String&gt; result;

@GET
@Produces(SERVER_SENT_EVENTS)
public Publisher&lt;String&gt; stream() {
    return result;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; Business Logic</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ReceiverMessages {
    @Incoming("prices")
    public void print(String price) {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible implementations are:</p>
</div>
<div class="paragraph">
<p><strong>In-Memory</strong></p>
</div>
<div class="paragraph">
<p>If the stream is not configured then it is assumed to be an in-memory stream, if not then stream type is defined by <code>connector</code> field.</p>
</div>
<div class="paragraph">
<p><strong>Kafka</strong></p>
</div>
<div class="paragraph">
<p>To integrate with Kafka you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
    io.quarkus:quarkus-smallrye-reactive-messaging-kafka"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>Kafka configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The <code>connector</code> type is <code>smallrye-kafka</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.generated-price.connector=
    smallrye-kafka
mp.messaging.outgoing.generated-price.topic=
    prices
mp.messaging.outgoing.generated-price.bootstrap.servers=
    localhost:9092
mp.messaging.outgoing.generated-price.value.serializer=
    org.apache.kafka.common.serialization.IntegerSerializer

mp.messaging.incoming.prices.connector=
    smallrye-kafka
mp.messaging.incoming.prices.value.deserializer=
    org.apache.kafka.common.serialization.IntegerDeserializer</code></pre>
</div>
</div>
<div class="paragraph">
<p>A complete list of supported properties are in Kafka site. For the <a href="https://kafka.apache.org/documentation/#producerconfigs" target="_blank" rel="noopener">producer</a> and for <a href="https://kafka.apache.org/documentation/#consumerconfigs" target="_blank" rel="noopener">consumer</a></p>
</div>
<div class="paragraph">
<p><em>JSON-B Serializer/Deserializer</em></p>
</div>
<div class="paragraph">
<p>You can use JSON-B to serialize/deserialize objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kafka-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To serialize you can use <code>io.quarkus.kafka.client.serialization.JsonbSerializer</code>.</p>
</div>
<div class="paragraph">
<p>To deserialize you need to extend <code>io.quarkus.kafka.client.serialization.JsonbDeserializer</code> and provide a type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class BeerDeserializer
    extends JsonbDeserializer&lt;Beer&gt; {

    public BeerDeserializer() {
        super(Beer.class);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>AMQP</strong></p>
</div>
<div class="paragraph">
<p>To integrate with AMQP you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="reactive-messaging-amqp"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>AMQP configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.
Special properties <code>amqp-username</code> and <code>amqp-password</code> are used to configure AMQP broker credentials.</p>
</div>
<div class="paragraph">
<p>The connector type is <code>smallrye-amqp</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">amqp-username=quarkus
amqp-password=quarkus
# write
mp.messaging.outgoing.generated-price.connector=
    smallrye-amqp
mp.messaging.outgoing.generated-price.address=
    prices
mp.messaging.outgoing.generated-price.durable=
    true
# read
mp.messaging.incoming.prices.connector=
    smallrye-amqp
mp.messaging.incoming.prices.durable=
    true</code></pre>
</div>
</div>
<div class="paragraph">
<p>A complete list of supported properties for <a href="https://smallrye.io/smallrye-reactive-messaging/#_interacting_using_amqp" target="_blank" rel="noopener">AMQP</a>.</p>
</div>
<div class="paragraph">
<p><strong>MQTT</strong></p>
</div>
<div class="paragraph">
<p>To integrate with MQTT you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="vertx, smallrye-reactive-streams-operators
        smallrye-reactive-messaging"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And add <code>io.smallrye.reactive:smallrye-reactive-messaging-mqtt-1.0:0.0.10</code> dependency in your build tool.</p>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>MQTT configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The connector type is <code>smallrye-mqtt</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.topic-price.type=
    smallrye-mqtt
mp.messaging.outgoing.topic-price.topic=
    prices
mp.messaging.outgoing.topic-price.host=
    localhost
mp.messaging.outgoing.topic-price.port=
    1883
mp.messaging.outgoing.topic-price.auto-generated-client-id=
    true

mp.messaging.incoming.prices.type=
    smallrye-mqtt
mp.messaging.incoming.prices.topic=
    prices
mp.messaging.incoming.prices.host=
    localhost
mp.messaging.incoming.prices.port=
    1883
mp.messaging.incoming.prices.auto-generated-client-id=
    true</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">JWT</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus implements <a href="https://github.com/eclipse/microprofile-jwt-auth" target="_blank" rel="noopener">MicroProfile JWT RBAC spec</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="io.quarkus:quarkus-smallrye-jwt"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Minimum JWT required claims: <code>typ</code>, <code>alg</code>, <code>kid</code>, <code>iss</code>, <code>sub</code>, <code>exp</code>, <code>iat</code>, <code>jti</code>, <code>upn</code>, <code>groups</code>.</p>
</div>
<div class="paragraph">
<p>You can inject token by using <code>JsonWebToken</code> or a claim individually by using <code>@Claim</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
JsonWebToken jwt;

@Inject
@Claim(standard = Claims.preferred_username)
String name;

@Inject
@Claim("groups")
Set&lt;String&gt; groups;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Set of supported types: <code>String</code>, <code>Set&lt;String&gt;</code>, <code>Long</code>, <code>Boolean, `javax.json.JsonValue</code>, <code>Optional</code>, <code>org.eclipse.microprofile.jwt.ClaimValue</code>.</p>
</div>
<div class="paragraph">
<p>And configuration in <code>src/main/resources/application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.jwt.verify.publickey.location=
    META-INF/resources/publicKey.pem
mp.jwt.verify.issuer=
    https://quarkus.io/using-jwt-rbac</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>mp.jwt.verify.publickey</code></dt>
<dd>
<p>Public Key text itself to be supplied as a string.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>mp.jwt.verify.publickey.location</code>
Relative path or URL of a public key.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>mp.jwt.verify.issuer</code></dt>
<dd>
<p><code>iss</code> accepted as valid.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.header</code></dt>
<dd>
<p>Sets header such as <code>Cookie</code> is used to pass the token. (default: <code>Authorization</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.cookie</code></dt>
<dd>
<p>Name of the cookie containing a token.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.schemes</code></dt>
<dd>
<p>Comma-separated list containing an alternative single or multiple schemes. (default: <code>Bearer</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.require.named-principal</code></dt>
<dd>
<p>A token must have a upn or preferred_username or sub claim set if using <code>java.security.Principal</code>. <code>True</code> makes throw an exception if not set. (default: <code>false</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.sub</code></dt>
<dd>
<p>Path to the claim with subject name.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.claims.sub</code></dt>
<dd>
<p>Default sub claim value.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.groups</code></dt>
<dd>
<p>Path to the claim containing the groups.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.groups-separator</code></dt>
<dd>
<p>Separator for splitting a string which may contain multiple group values. (default. ` `).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.claims.groups</code></dt>
<dd>
<p>Default groups claim value.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.jwk.refresh-interval</code></dt>
<dd>
<p>JWK cache refresh interval in minutes. (default: <code>60</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.expiration.grace</code></dt>
<dd>
<p>Expiration grace in seconds. (default: <code>60</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.verify.audience</code></dt>
<dd>
<p>Comma separated list of the audiences that a token aud claim may contain.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Supported public key formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PKCS#8 PEM</p>
</li>
<li>
<p>JWK</p>
</li>
<li>
<p>JWKS</p>
</li>
<li>
<p>JWK Base64 URL</p>
</li>
<li>
<p>JWKS Base64 URL</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To send a token to server-side you should use <code>Authorization</code> header: <code>curl -H "Authorization: Bearer eyJraWQiOi&#8230;&#8203;"</code>.</p>
</div>
<div class="paragraph">
<p>To inject claim values, the bean must be <code>@RequestScoped</code> CDI scoped.
If you need to inject claim values in scope with a lifetime greater than <code>@RequestScoped</code> then you need to use <code>javax.enterprise.inject.Instance</code> interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Claim(standard = Claims.iat)
private Instance&lt;Long&gt; providerIAT;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>RBAC</strong></p>
</div>
<div class="paragraph">
<p>JWT <code>groups</code> claim is directly mapped to roles to be used in security annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Configuring Native</summary>
<div class="content">
<div class="paragraph">
<p>To configure native application, you can create a <code>config</code> directory at the same place as the native file and place an <code>application.properties</code> file inside. <code>config/application.properties</code>.</p>
</div>
</div>
</details>
<details>
<summary class="title">Flyway</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with <a href="https://flywaydb.org/" target="_blank" rel="noopener">Flyway</a> to help you on database schema migrations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-flyway"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then place migration files to the migrations folder (<code>classpath:db/migration</code>).</p>
</div>
<div class="paragraph">
<p>You can inject <code>org.flywaydb.core.Flyway</code> to programmatically execute the migration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Flyway flyway;

flyway.migrate();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or can be automatically executed by setting <code>migrate-at-start</code> property to <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.flyway.migrate-at-start=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of Flyway parameters.</p>
</div>
<div class="paragraph">
<p><code>quarkus.flyway</code> as prefix is skipped in the next table.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>clean-at-start</code></dt>
<dd>
<p>Execute Flyway clean command (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>migrate-at-start</code></dt>
<dd>
<p>Flyway migration automatically (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>locations</code></dt>
<dd>
<p>CSV locations to scan recursively for migrations. Supported prefixes <code>classpath</code> and <code>filesystem</code> (default: <code>classpath:db/migration</code>).</p>
</dd>
<dt class="hdlist1"><code>connect-retries</code></dt>
<dd>
<p>The maximum number of retries when attempting to connect (default: 0)</p>
</dd>
<dt class="hdlist1"><code>schemas</code></dt>
<dd>
<p>CSV case-sensitive list of schemas managed (default: none)</p>
</dd>
<dt class="hdlist1"><code>table</code></dt>
<dd>
<p>The name of Flyway’s schema history table (default: <code>flyway_schema_history</code>)</p>
</dd>
<dt class="hdlist1"><code>sql-migration-prefix</code></dt>
<dd>
<p>Prefix for versioned SQL migrations (default: <code>V</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>repeatable-sql-migration-prefix::</code>
Prefix for repeatable SQL migrations (default: <code>R</code>)</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>baseline-on-migrate</code></dt>
<dd>
<p>Only migrations above <strong>baseline-version</strong> will then be applied</p>
</dd>
<dt class="hdlist1"><code>baseline-version</code></dt>
<dd>
<p>Version to tag an existing schema with when executing baseline (default: 1)</p>
</dd>
<dt class="hdlist1"><code>baseline-description</code></dt>
<dd>
<p>Description to tag an existing schema with when executing baseline (default: <code>Flyway Baseline</code>)</p>
</dd>
</dl>
</div>
</div>
</details>
<details>
<summary class="title">Reactive PostgreSQL Client</summary>
<div class="content">
<div class="paragraph">
<p>You can use Reactive PostgreSQL to execute queries to PostreSQL database in a reactive way, instead of using JDBC way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-pg-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
    vertx-reactive:postgresql://host:5431/db</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can inject <code>io.vertx.axle.pgclient.PgPool</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
PgPool client;

CompletionStage&lt;JsonArray&gt; =
    client.query("SELECT * FROM table")
    .thenApply(rowSet -&gt; {
        JsonArray jsonArray = new JsonArray();
        PgIterator iterator = rowSet.iterator();
        return jsonArray;
    })</code></pre>
</div>
</div>
</div>
</details>
<details>
<summary class="title">Keycloak</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus can use OpenId Connect or OAuth 2.0 authorization servers such as  <a href="https://www.keycloak.org/" target="_blank" rel="noopener">Keycloak</a> to protect resources using bearer token issued by Keycloak server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="using-openid-connect"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also protect resources with security annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@RolesAllowed("admin")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure application to Keycloak service in <code>application.properties</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oidc.realm=quarkus
quarkus.oidc.auth-server-url=http://localhost:8180/auth
quarkus.oidc.resource=backend-service
quarkus.oidc.bearer-only=true
quarkus.oidc.credentials.secret=secret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options with <code>quarkus.oidc</code> prefix:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>auth-server-url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The base URL of the OpenID Connect (OIDC) server</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>introspection-path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Relative path of the RFC7662 introspection service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jwks-path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Relative path of the OIDC service returning a JWK set</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>public-key</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Public key for the local JWT token verification</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The client-id of the application.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.secret</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The client secret</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
With Keycloak OIDC server <code><a href="https://host:port/auth/realms/{realm}" class="bare">https://host:port/auth/realms/{realm}</a></code> where <code>{realm}</code> has to be replaced by the name of the Keycloak realm.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can use <code>quarkus.http.cors</code> property to enable consuming form different domain.
</td>
</tr>
</table>
</div>
</div>
</details>
<details>
<summary class="title">Amazon Lambda</summary>
<div class="content">
<div class="paragraph">
<p>Quarkus integrates with Amazon Lambda.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-amazon-lambda"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then implement <code>com.amazonaws.services.lambda.runtime.RequestHandler</code> interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class TestLambda
        implements RequestHandler&lt;MyInput, MyOutput&gt; {
    @Override
    public MyInput handleRequest(MyOutput input,
                                    Context context) {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can set the handler name by using <code>quarkus.lambda.handler</code> property or by annotating the Lambda with the CDI <code>@Named</code> annotation.</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>You can write tests for Amazon lambdas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-test-amazon-lambda&lt;/artifactId&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Test
public void testLambda() {
    MyInput in = new MyInput();
    in.setGreeting("Hello");
    in.setName("Stu");
    MyOutput out = LambdaClient.invoke(MyOutput.class, in);
}</code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quarkuscheatsheet"><a class="anchor" href="#quarkuscheatsheet"></a><a class="link" href="#quarkuscheatsheet">Quarkus Cheat-Sheet</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><span class="icon"><i class="fa fa-file-pdf-o"></i></span> <a href="https://github.com/lordofthejars/quarkus-cheat-sheet/releases/download/1.0.13/quarkus-cheat-sheet.pdf">Download the Cheat-Sheet as PDF</a>.</p>
</div>
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#whatsnew">What&#8217;s New in Cheat-Sheet</a>
<ul class="sectlevel2">
<li><a href="#_version_1_2_0_final">Version 1.2.0.Final</a></li>
<li><a href="#_version_1_1_0_final">Version 1.1.0.Final</a></li>
<li><a href="#_version_1_0_0_cr2">Version 1.0.0.CR2</a></li>
<li><a href="#_version_0_26_0">Version 0.26.0</a></li>
<li><a href="#_version_0_24_0">Version 0.24.0</a></li>
<li><a href="#_version_0_23_0">Version 0.23.0</a></li>
<li><a href="#_version_0_21_0">Version 0.21.0</a></li>
<li><a href="#_version_0_20_0">Version 0.20.0</a></li>
<li><a href="#_version_0_19_0">Version 0.19.0</a></li>
<li><a href="#_version_0_18_0">Version 0.18.0</a></li>
<li><a href="#_version_0_17_0">Version 0.17.0</a></li>
<li><a href="#_version_0_16_0">Version 0.16.0</a></li>
<li><a href="#_version_0_15_0">Version 0.15.0</a></li>
</ul>
</li>
<li><a href="#quarkuscheatsheet">Quarkus Cheat-Sheet</a>
<ul class="sectlevel2">
<li><a href="#_what_is_quarkus">What is Quarkus?</a></li>
<li><a href="#_getting_started">Getting Started</a></li>
<li><a href="#_gradle">Gradle</a></li>
<li><a href="#_extensions">Extensions</a></li>
<li><a href="#_application_lifecycle">Application Lifecycle</a></li>
<li><a href="#_adding_configuration_parameters">Adding Configuration Parameters</a></li>
<li><a href="#_custom_context_path">Custom Context Path</a></li>
<li><a href="#_injection">Injection</a></li>
<li><a href="#_json_marshallingunmarshalling">JSON Marshalling/Unmarshalling</a></li>
<li><a href="#_xml_marshallingunmarshalling">XML Marshalling/Unmarshalling</a></li>
<li><a href="#_validator">Validator</a></li>
<li><a href="#_logging">Logging</a></li>
<li><a href="#_rest_client">Rest Client</a></li>
<li><a href="#_testing">Testing</a></li>
<li><a href="#_persistence">Persistence</a></li>
<li><a href="#_infinispan">Infinispan</a></li>
<li><a href="#_flyway">Flyway</a></li>
<li><a href="#_hibernate_search">Hibernate Search</a></li>
<li><a href="#_amazon_dynamodb">Amazon DynamoDB</a></li>
<li><a href="#_neo4j">Neo4j</a></li>
<li><a href="#_mongodb_client">MongoDB Client</a></li>
<li><a href="#_mongodb_panache">MongoDB Panache</a></li>
<li><a href="#_reactive_programming">Reactive Programming</a></li>
<li><a href="#_reactive_messaging">Reactive Messaging</a></li>
<li><a href="#_kafka_streams">Kafka Streams</a></li>
<li><a href="#_reactive_postgresql_client">Reactive PostgreSQL Client</a></li>
<li><a href="#_reactive_mysql_client">Reactive MySQL Client</a></li>
<li><a href="#_activemq_artemis">ActiveMQ Artemis</a></li>
<li><a href="#_rbac">RBAC</a></li>
<li><a href="#_jwt">JWT</a></li>
<li><a href="#_openid_connect">OpenId Connect</a></li>
<li><a href="#_oauth2">OAuth2</a></li>
<li><a href="#_authenticating_via_http">Authenticating via HTTP</a></li>
<li><a href="#_security_with_properties_file">Security with Properties File</a></li>
<li><a href="#_security_with_a_jdbc_realm">Security with a JDBC Realm</a></li>
<li><a href="#_vault">Vault</a></li>
<li><a href="#_jax_rs">JAX-RS</a></li>
<li><a href="#_vert_x_filters_and_routes">Vert.X Filters and Routes</a></li>
<li><a href="#_gzip_support">GZip Support</a></li>
<li><a href="#_cors_filter">CORS Filter</a></li>
<li><a href="#_fault_tolerance">Fault Tolerance</a></li>
<li><a href="#_observability">Observability</a></li>
<li><a href="#_cloud">Cloud</a></li>
<li><a href="#_kubernetes_client">Kubernetes Client</a></li>
<li><a href="#_amazon_lambda">Amazon Lambda</a></li>
<li><a href="#_azure_functions">Azure Functions</a></li>
<li><a href="#_apache_camel">Apache Camel</a></li>
<li><a href="#_websockets">WebSockets</a></li>
<li><a href="#_openapi">OpenAPI</a></li>
<li><a href="#_mail_sender">Mail Sender</a></li>
<li><a href="#_scheduled_tasks">Scheduled Tasks</a></li>
<li><a href="#_kogito">Kogito</a></li>
<li><a href="#_apache_tika">Apache Tika</a></li>
<li><a href="#_jgit">JGit</a></li>
<li><a href="#_web_resources">Web Resources</a></li>
<li><a href="#_transactional_memory">Transactional Memory</a></li>
<li><a href="#_quartz">Quartz</a></li>
<li><a href="#_qute">Qute</a></li>
<li><a href="#_sentry">Sentry</a></li>
<li><a href="#_jsch">JSch</a></li>
<li><a href="#_cache">Cache</a></li>
<li><a href="#_spring_di">Spring DI</a></li>
<li><a href="#_spring_boot_configuration">Spring Boot Configuration</a></li>
<li><a href="#_spring_web">Spring Web</a></li>
<li><a href="#_spring_data_jpa">Spring Data JPA</a></li>
<li><a href="#_spring_security">Spring Security</a></li>
<li><a href="#_resources">Resources</a></li>
</ul>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_what_is_quarkus"><a class="anchor" href="#_what_is_quarkus"></a><a class="link" href="#_what_is_quarkus">What is Quarkus?</a></h3>
<div class="paragraph">
<p><a href="https://quarkus.io/">Quarkus</a> is a Kubernetes Native Java stack tailored for GraalVM &amp; OpenJDK HotSpot, crafted from the best of breed Java libraries and standards.
Also focused on developer experience, making things just work with little to no configuration and allowing to do live coding.</p>
</div>
<div class="paragraph">
<p>Cheat-sheet tested with <strong>Quarkus 1.1.0.Final</strong>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_getting_started"><a class="anchor" href="#_getting_started"></a><a class="link" href="#_getting_started">Getting Started</a></h3>
<div class="paragraph">
<p>Quarkus comes with a Maven archetype to scaffold a very simple starting project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn io.quarkus:quarkus-maven-plugin:1.1.0.Final:create \
    -DprojectGroupId=org.acme \
    -DprojectArtifactId=getting-started \
    -DclassName="org.acme.quickstart.GreetingResource" \
    -Dpath="/hello"</code></pre>
</div>
</div>
<div class="paragraph">
<p>This creates a simple JAX-RS resource called <code>GreetingResource</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/hello")
public class GreetingResource {

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return "hello";
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gradle"><a class="anchor" href="#_gradle"></a><a class="link" href="#_gradle">Gradle</a></h3>
<div class="paragraph">
<p>There is no way to scaffold a project in Gradle but you only need to do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">plugins {
    id 'java'
    id 'io.quarkus' version '0.26.1'
}

repositories {
    mavenCentral()
}

dependencies {
    implementation enforcedPlatform('io.quarkus:quarkus-bom:0.26.1')
    implementation 'io.quarkus:quarkus-resteasy'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or in Kotlin:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="kotlin" class="language-kotlin hljs">plugins {
    java
}
apply(plugin = "io.quarkus")

repositories {
    mavenCentral()
}

dependencies {
    implementation(enforcedPlatform("io.quarkus:quarkus-bom:0.26.1"))
    implementation("io.quarkus:quarkus-resteasy")
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_extensions"><a class="anchor" href="#_extensions"></a><a class="link" href="#_extensions">Extensions</a></h3>
<div class="paragraph">
<p>Quarkus comes with extensions to integrate with some libraries such as JSON-B, Camel or MicroProfile spec.
To list all available extensions just run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:list-extensions</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can use <code>-DsearchPattern=panache</code> to filter out all extensions except the ones matching the expression.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And to register the extensions into build tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension -Dextensions=""</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>extensions</code> property supports CSV format to register more than one extension at once.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_application_lifecycle"><a class="anchor" href="#_application_lifecycle"></a><a class="link" href="#_application_lifecycle">Application Lifecycle</a></h3>
<div class="paragraph">
<p>You can be notified when the application starts/stops by observing <code>StartupEvent</code> and <code>ShutdownEvent</code> events.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ApplicationLifecycle {
    void onStart(@Observes StartupEvent event) {}
    void onStop(@Observes ShutdownEvent event) {}
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_adding_configuration_parameters"><a class="anchor" href="#_adding_configuration_parameters"></a><a class="link" href="#_adding_configuration_parameters">Adding Configuration Parameters</a></h3>
<div class="paragraph">
<p>To add configuration to your application, Quarkus relies on <a href="https://github.com/eclipse/microprofile-config" target="_blank" rel="noopener">MicroProfile Config</a> spec.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "greetings.message")
String message;

@ConfigProperty(name = "greetings.message",
                defaultValue = "Hello")
String messageWithDefault;

@ConfigProperty(name = "greetings.message")
Optional&lt;String&gt; optionalMessage;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Properties can be set as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Environment variables (<code>GREETINGS_MESSAGE</code>).</p>
</li>
<li>
<p>System properties (<code>-Dgreetings.message</code>).</p>
</li>
<li>
<p>Resources <code>src/main/resources/application.properties</code>.</p>
</li>
<li>
<p>External config directory under the current working directory: <code>config/application.properties</code>.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">greetings.message = Hello World</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>Array</code>, <code>List</code> and <code>Set</code> are supported. The delimiter is comma (<code>,</code>) char and <code>\</code> is the escape char.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Configuration Profiles</strong></p>
</div>
<div class="paragraph">
<p>Quarkus allow you to have multiple configuration in the same file (<code>application.properties</code>).</p>
</div>
<div class="paragraph">
<p>The syntax for this is <code>%{profile}.config.key=value</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.port=9090
%dev.quarkus.http.port=8181</code></pre>
</div>
</div>
<div class="paragraph">
<p>HTTP port will be 9090, unless the 'dev' profile is active.</p>
</div>
<div class="paragraph">
<p>Default profiles are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>dev</code>: Activated when in development mode (<code>quarkus:dev</code>).</p>
</li>
<li>
<p><code>test</code>: Activated when running tests.</p>
</li>
<li>
<p><code>prod</code>: The default profile when not running in development or test mode</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can create custom profile names by enabling the profile either setting <code>quarkus.profile</code> system property or <code>QUARKUS_PROFILE</code> environment variable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.port=9090
%staging.quarkus.http.port=9999</code></pre>
</div>
</div>
<div class="paragraph">
<p>And enable it <code>quarkus.profile=staging</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To get the active profile programmatically use <code>io.quarkus.runtime.configuration.ProfileManager.getActiveProfile()</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can also set it in the build tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
&lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
&lt;version&gt;${surefire-plugin.version}&lt;/version&gt;
&lt;configuration&gt;
    &lt;systemPropertyVariables&gt;
        &lt;quarkus.test.profile&gt;foo&lt;/quarkus.test.profile&gt;
        &lt;buildDirectory&gt;${project.build.directory}
        &lt;/buildDirectory&gt;
    &lt;/systemPropertyVariables&gt;
&lt;/configuration&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Same for <code>maven-failsafe-plugin</code>.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="groovy" class="language-groovy hljs">test {
    useJUnitPlatform()
    systemProperty "quarkus.test.profile", "foo"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Special properties are set in <strong>prod</strong> mode: <code>quarkus.application.version</code> and <code>quarkus.application.name</code> to get them available at runtime.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "quarkus.application.name")
String applicationName;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>@ConfigProperties</strong></p>
</div>
<div class="paragraph">
<p>As an alternative to injecting multiple related configuration values, you can also use the <code>@io.quarkus.arc.config.ConfigProperties</code> annotation to group properties.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public class GreetingConfiguration {
    private String message;
    // getter/setter
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This class maps <code>greeting.message</code> property defined in <code>application.properties</code>.</p>
</div>
<div class="paragraph">
<p>You can inject this class by using CDI <code>@Inject GreetingConfiguration greeting;</code>.</p>
</div>
<div class="paragraph">
<p>Also you can use an interface approach:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public interface GreetingConfiguration {

    @ConfigProperty(name = "message")
    String message();
    String getSuffix();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If property does not follow getter/setter naming convention you need to use <code>org.eclipse.microprofile.config.inject.ConfigProperty</code> to set it.</p>
</div>
<div class="paragraph">
<p>Nested objects are also supporte:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperties(prefix = "greeting", namingStrategy=NamingStrategy.KEBAB_CASE)
public class GreetingConfiguration {
    public String message;
    public HiddenConfig hidden;

    public static class HiddenConfig {
        public List&lt;String&gt; recipients;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And an <code>application.properties</code> mapping previous class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">greeting.message = hello
greeting.hidden.recipients=Jane,John</code></pre>
</div>
</div>
<div class="paragraph">
<p>Bean Validation is also supported so properties are validated at startup time, for example <code>@Size(min = 20) public String message;</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<code>prefix</code> attribute is not mandatory. If not provided, attribute is determined by class name (ie <code>GreeetingConfiguration</code> is translated to <code>greeting</code> or <code>GreetingExtraConfiguration</code> to <code>greeting-extra</code>). The suffix of the class is always removed.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Naming strategy can be changed with property <code>namingStrategy</code>. <code>KEBAB_CASE</code> (whatever.foo-bar) or <code>VERBATIM</code> (whatever.fooBar).</p>
</div>
<div class="paragraph">
<p><strong>YAML Config</strong></p>
</div>
<div class="paragraph">
<p>YAML configuration is also supported.
The configuration file is called <code>application.yaml</code> and you need to register a dependency to enable its support:</p>
</div>
<div class="listingblock">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-config-yaml&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">quarkus:
  datasource:
    url: jdbc:postgresql://localhost:5432/some-database
    driver: org.postgresql.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or with profiles:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">"%dev":
  quarkus:
    datasource:
      url: jdbc:postgresql://localhost:5432/some-database
      driver: org.postgresql.Driver</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of subkeys <code>~</code> is used to refer to the unprefixed part.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="yaml" class="language-yaml hljs">quarkus:
  http:
    cors:
      ~: true
      methods: GET,PUT,POST</code></pre>
</div>
</div>
<div class="paragraph">
<p>Is equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.cors=true
quarkus.http.cors.methods=GET,PUT,POST</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Custom Loader</strong></p>
</div>
<div class="paragraph">
<p>You can implement your own <code>ConfigSource</code> to load configuration from different places than the default ones provided by Quarkus.
For example, database, custom XML, REST Endpoints, &#8230;&#8203;</p>
</div>
<div class="paragraph">
<p>You need to create a new class and implement <code>ConfigSource</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">package com.acme.config;
public class InMemoryConfig implements ConfigSource {

    private Map&lt;String, String&gt; prop = new HashMap&lt;&gt;();

    public InMemoryConfig() {
        // Init properties
    }

    @Override
    public int getOrdinal() {
        // The highest ordinal takes precedence
        return 900;
    }

    @Override
    public Map&lt;String, String&gt; getProperties() {
        return prop;
    }

    @Override
    public String getValue(String propertyName) {
        return prop.get(propertyName);
    }

    @Override
    public String getName() {
        return "MemoryConfigSource";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you need to register the <code>ConfigSource</code> as Java service.
Create a file with the following content:</p>
</div>
<div class="listingblock">
<div class="title">/META-INF/services/org.eclipse.microprofile.config.spi.ConfigSource</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">com.acme.config.InMemoryConfig</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Custom Converters</strong></p>
</div>
<div class="paragraph">
<p>You can implement your own conversion types from String.
Implement <code>org.eclipse.microprofile.config.spi.Converter</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Priority(DEFAULT_QUARKUS_CONVERTER_PRIORITY + 100)
public class CustomInstantConverter
    implements Converter&lt;Instant&gt; {

    @Override
    public Instant convert(String value) {
        if ("now".equals(value.trim())) {
            return Instant.now();
        }
        return Instant.parse(value);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Priority</code> annotation is used to override the default <code>InstantConverter</code>.</p>
</div>
<div class="paragraph">
<p>Then you need to register the <code>Converter</code> as Java service.
Create a file with the following content:</p>
</div>
<div class="listingblock">
<div class="title">/META-INF/services/org.eclipse.microprofile.config.spi.Converter</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-none hljs">com.acme.config.CustomInstantConverter</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_context_path"><a class="anchor" href="#_custom_context_path"></a><a class="link" href="#_custom_context_path">Custom Context Path</a></h3>
<div class="paragraph">
<p>By default Undertow will serve content from under the root context.
If you want to change this you can use the <code>quarkus.servlet.context-path</code> config key to set the context path.</p>
</div>
</div>
<div class="sect2">
<h3 id="_injection"><a class="anchor" href="#_injection"></a><a class="link" href="#_injection">Injection</a></h3>
<div class="paragraph">
<p>Quarkus is based on CDI 2.0 to implement injection of code.
It is not fully supported and only a subset of the <a href="https://quarkus.io/guides/cdi-reference" target="_blank" rel="noopener">specification is implemented</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class GreetingService {

    public String message(String message) {
        return message.toUpperCase();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Scope annotation is mandatory to make the bean discoverable.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
GreetingService greetingService;</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Quarkus is designed with Substrate VM in mind. For this reason, we encourage you to use <em>package-private</em> scope instead of <em>private</em>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Produces</strong></p>
</div>
<div class="paragraph">
<p>You can also create a factory of an object by using <code>@javax.enterprise.inject.Produces</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
@ApplicationScoped
Message message() {
    Message m = new Message();
    m.setMsn("Hello");
    return m;
}

@Inject
Message msg;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Qualifiers</strong></p>
</div>
<div class="paragraph">
<p>You can use qualifiers to return different implementations of the same interface or to customize the configuration of the bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Qualifier
@Retention(RUNTIME)
@Target({TYPE, METHOD, FIELD, PARAMETER})
public @interface Quote {
    @Nonbinding String value();
}

@Produces
@Quote("")
Message message(InjectionPoint msg) {
    Message m = new Message();
    m.setMsn(
        msg.getAnnotated()
        .getAnnotation(Quote.class)
        .value()
    );

    return m;
}

@Inject
@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Quarkus breaks the CDI spec by allowing you to inject qualified beans without using <code>@Inject</code> annotation.
</td>
</tr>
</table>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Quote("Aloha Beach")
Message message;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_json_marshallingunmarshalling"><a class="anchor" href="#_json_marshallingunmarshalling"></a><a class="link" href="#_json_marshallingunmarshalling">JSON Marshalling/Unmarshalling</a></h3>
<div class="paragraph">
<p>To work with <code>JSON-B</code> you need to add a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-resteasy-jsonb"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any POJO is marshaled/unmarshalled automatically.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Sauce {
    private String name;
    private long scovilleHeatUnits;

    // getter/setters
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>JSON equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
	"name":"Blair's Ultra Death",
	"scovilleHeatUnits": 1100000
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In a <code>POST</code> endpoint example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@POST
@Consumes(MediaType.APPLICATION_JSON)
public Response create(Sauce sauce) {
    // Create Sauce
    return Response.created(URI.create(sauce.getId()))
            .build();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To work with <code>Jackson</code> you need to add:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-jackson"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t want to use the default <code>ObjectMapper</code> you can customize it by:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CustomObjectMapperConfig {
    @Singleton
    @Produces
    public ObjectMapper objectMapper() {
        ObjectMapper objectMapper = new ObjectMapper();
        // perform configuration
        return objectMapper;
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_xml_marshallingunmarshalling"><a class="anchor" href="#_xml_marshallingunmarshalling"></a><a class="link" href="#_xml_marshallingunmarshalling">XML Marshalling/Unmarshalling</a></h3>
<div class="paragraph">
<p>To work with <code>JAX-B</code> you need to add a dependency:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-jaxb"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then annotated POJOs are converted to XML.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@XmlRootElement
public class Message {
}

 @GET
@Produces(MediaType.APPLICATION_XML)
public Message hello() {
    return message;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_validator"><a class="anchor" href="#_validator"></a><a class="link" href="#_validator">Validator</a></h3>
<div class="paragraph">
<p>Quarkus uses <a href="https://hibernate.org/validator/" target="_blank" rel="noopener">Hibernate Validator</a> to validate input/output of REST services and business services using Bean validation spec.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-hibernate-validator"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Annotate POJO objects with validator annotations such as: <code>@NotNull</code>, <code>@Digits</code>, <code>@NotBlank</code>, <code>@Min</code>, <code>@Max</code>, &#8230;&#8203;</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Sauce {

    @NotBlank(message = "Name may not be blank")
    private String name;
    @Min(0)
    private long scovilleHeatUnits;

    // getter/setters
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To validate an object use <code>@Valid</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public Response create(@Valid Sauce sauce) {}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If a validation error is triggered, a violation report is generated and serialized as JSON. If you want to manipulate the output, you need to catch in the code the <code>ConstraintViolationException</code> exception.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Create Your Custom Constraints</strong></p>
</div>
<div class="paragraph">
<p>First you need to create the custom annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR,
            PARAMETER, TYPE_USE })
@Retention(RUNTIME)
@Documented
@Constraint(validatedBy = { NotExpiredValidator.class})
public @interface NotExpired {

    String message() default "Sauce must not be expired";
    Class&lt;?&gt;[] groups() default { };
    Class&lt;? extends Payload&gt;[] payload() default { };

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to implement the validator logic in a class that implements <code>ConstraintValidator</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class NotExpiredValidator
    implements ConstraintValidator&lt;NotExpired, LocalDate&gt;
    {

    @Override
    public boolean isValid(LocalDate value,
                        ConstraintValidatorContext ctx) {
        if ( value == null ) return true;
        LocalDate today = LocalDate.now();
        return ChronoUnit.YEARS.between(today, value) &gt; 0;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And use it normally:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@NotExpired
@JsonbDateFormat(value = "yyyy-MM-dd")
private LocalDate expired;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Manual Validation</strong></p>
</div>
<div class="paragraph">
<p>You can call the validation process manually instead of relaying to <code>@Valid</code> by injecting <code>Validator</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Validator validator;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And use it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Set&lt;ConstraintViolation&lt;Sauce&gt;&gt; violations =
            validator.validate(sauce);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Localization</strong></p>
</div>
<div class="paragraph">
<p>You can configure the based locale for validation messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.default-locale=ca-ES
# Supported locales resolved by Accept-Language
quarkus.locales=en-US,es-ES,fr-FR, ca_ES</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">ValidationMessages_ca_ES.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">pattern.message=No conforme al patro</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Pattern(regexp = "A.*", message = "{pattern.message}")
private String name;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_logging"><a class="anchor" href="#_logging"></a><a class="link" href="#_logging">Logging</a></h3>
<div class="paragraph">
<p>You can configure how Quarkus logs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.log.console.enable=true
quarkus.log.console.level=DEBUG
quarkus.log.console.color=false
quarkus.log.category."com.lordofthejars".level=DEBUG</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prefix is <code>quarkus.log</code>.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>category."&lt;category-name&gt;".level</code></dt>
<dd>
<p>Minimum level category (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>level</code></dt>
<dd>
<p>Default minimum level (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>console.enabled</code></dt>
<dd>
<p>Console logging enabled (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>console.format</code></dt>
<dd>
<p>Format pattern to use for logging. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>console.level</code></dt>
<dd>
<p>Minimum log level (default: <code>INFO</code>)</p>
</dd>
<dt class="hdlist1"><code>console.color</code></dt>
<dd>
<p>Allow color rendering (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>file.enable</code></dt>
<dd>
<p>File logging enabled (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.format</code></dt>
<dd>
<p>Format pattern to use for logging. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %h %N[%i] %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>file.level</code></dt>
<dd>
<p>Minimum log level (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>file.path</code></dt>
<dd>
<p>The path to log file (default: <code>quarkus.log</code>)</p>
</dd>
<dt class="hdlist1"><code>file.rotation.max-file-size</code></dt>
<dd>
<p>The maximum file size of the log file</p>
</dd>
<dt class="hdlist1"><code>file.rotation.max-backup-index</code></dt>
<dd>
<p>The maximum number of backups to keep (default: <code>1</code>)</p>
</dd>
<dt class="hdlist1"><code>file.rotation.file-suffix</code></dt>
<dd>
<p>Rotating log file suffix.</p>
</dd>
<dt class="hdlist1"><code>file.rotation.rotate-on-boot</code></dt>
<dd>
<p>Indicates rotate logs at bootup (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async</code></dt>
<dd>
<p>Log asynchronously (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async.queue-length</code></dt>
<dd>
<p>The queue length to use before flushing writing (default: <code>512</code>)</p>
</dd>
<dt class="hdlist1"><code>file.async.overflow</code></dt>
<dd>
<p>Action when queue is full (default: <code>BLOCK</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.enable</code></dt>
<dd>
<p>syslog logging is enabled (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.format</code></dt>
<dd>
<p>The format pattern to use for logging to syslog. Default value:<br>
<code>%d{yyyy-MM-dd HH:mm:ss,SSS} %h %N[%i] %-5p [%c{3.}] (%t) %s%e%n</code></p>
</dd>
<dt class="hdlist1"><code>syslog.level</code></dt>
<dd>
<p>The minimum log level to write to syslog (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.endpoint</code></dt>
<dd>
<p>The IP address and port of the syslog server (default: <code>localhost:514</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.app-name</code></dt>
<dd>
<p>The app name used when formatting the message in RFC5424 format (default: current process name)</p>
</dd>
<dt class="hdlist1"><code>syslog.hostname</code></dt>
<dd>
<p>The name of the host the messages are being sent from (default: current hostname)</p>
</dd>
<dt class="hdlist1"><code>syslog.facility</code></dt>
<dd>
<p>Priority of the message as defined by RFC-5424 and RFC-3164 (default: <code>USER_LEVEL</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.syslog-type</code></dt>
<dd>
<p>The syslog type of format message (default: <code>RFC5424</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.protocol</code></dt>
<dd>
<p>Protocol used (default: <code>TCP</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.use-counting-framing</code></dt>
<dd>
<p>Message prefixed with the size of the message (default <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.truncate</code></dt>
<dd>
<p>Message should be truncated (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.block-on-reconnect</code></dt>
<dd>
<p>Block when attempting to reconnect (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async</code></dt>
<dd>
<p>Log asynchronously (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async.queue-length</code></dt>
<dd>
<p>The queue length to use before flushing writing (default: <code>512</code>)</p>
</dd>
<dt class="hdlist1"><code>syslog.async.overflow</code></dt>
<dd>
<p>Action when queue is full (default: <code>BLOCK</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Gelf ouput</strong></p>
</div>
<div class="paragraph">
<p>You can configure the output to be in <em>GELF</em> format instead of plain text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-gelf"</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>handler.gelf.enabled</code></dt>
<dd>
<p>Enable GELF logging handler (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.host</code></dt>
<dd>
<p>Hostname/IP of Logstash/Graylof. Prepend <code>tcp:</code> for using TCP protocol. (default: <code>udp:localhost</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.port</code></dt>
<dd>
<p>The port. (default: <code>12201</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.version</code></dt>
<dd>
<p>GELF version. (default: <code>1.1</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.extract-stack-trace</code></dt>
<dd>
<p>Post Stack-Trace to StackTrace field. (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.stack-trace-throwable-reference</code></dt>
<dd>
<p>Gets the cause level to stack trace. <code>0</code> is fulls tack trace. (default: <code>0</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.filter-stack-trace</code></dt>
<dd>
<p>Stack-Trace filtering. (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.timestamp-pattern</code></dt>
<dd>
<p>Java Date pattern. (default: <code>yyyy-MM-dd HH:mm:ss,SSS</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.level</code></dt>
<dd>
<p>Log level <code>java.util.logging.Level</code>. (default: <code>ALL</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.facility</code></dt>
<dd>
<p>Name of the facility. (default: <code>jboss-logmanage</code>)</p>
</dd>
<dt class="hdlist1"><code>handler.gelf.additional-field.&lt;field&gt;.&lt;subfield&gt;</code></dt>
<dd>
<p>Post additional fields. <code>quarkus.log.handler.gelf.additional-field.field1.type=String</code></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>JSON output</strong></p>
</div>
<div class="paragraph">
<p>You can configure the output to be in <em>JSON</em> format instead of plain text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="shell-session" class="language-shell-session hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-json"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the configuration values are prefix with <code>quarkus.log</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>json</code></dt>
<dd>
<p>JSON logging is enabled (default: true).</p>
</dd>
<dt class="hdlist1"><code>json.pretty-print</code></dt>
<dd>
<p>JSON output is "pretty-printed" (default: false)</p>
</dd>
<dt class="hdlist1"><code>json.date-format</code></dt>
<dd>
<p>Specify the date format to use (default: the default format)</p>
</dd>
<dt class="hdlist1"><code>json.record-delimiter</code></dt>
<dd>
<p>Record delimiter to add (default: no delimiter)</p>
</dd>
<dt class="hdlist1"><code>json.zone-id</code></dt>
<dd>
<p>The time zone ID</p>
</dd>
<dt class="hdlist1"><code>json.exception-output-type</code></dt>
<dd>
<p>The exception output type: <code>detailed</code>, <code>formatted</code>, <code>detailed-and-formatted</code> (default: <code>detailed</code>)</p>
</dd>
<dt class="hdlist1"><code>json.print-details</code></dt>
<dd>
<p>Detailed caller information should be logged (default: false)</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_rest_client"><a class="anchor" href="#_rest_client"></a><a class="link" href="#_rest_client">Rest Client</a></h3>
<div class="paragraph">
<p>Quarkus implements <a href="https://github.com/eclipse/microprofile-rest-client" target="_blank" rel="noopener">MicroProfile Rest Client</a> spec:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-rest-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get content from <a href="http://worldclockapi.com/api/json/cet/now" class="bare">http://worldclockapi.com/api/json/cet/now</a> you need to create a service interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/api")
@RegisterRestClient
public interface WorldClockService {

    @GET @Path("/json/cet/now")
    @Produces(MediaType.APPLICATION_JSON)
    WorldClock getNow();

    @GET
    @Path("/json/{where}/now")
    @Produces(MediaType.APPLICATION_JSON)
    WorldClock getSauce(@BeanParam
                    WorldClockOptions worldClockOptions);

}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class WorldClockOptions {
    @HeaderParam("Authorization")
    String auth;

    @PathParam("where")
    String where;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configure the hostname at <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/url=
        http://worldclockapi.com</code></pre>
</div>
</div>
<div class="paragraph">
<p>Injecting the client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RestClient
WorldClockService worldClockService;</code></pre>
</div>
</div>
<div class="paragraph">
<p>If invokation happens within JAX-RS, you can propagate headers from incoming to outgoing by using next property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.eclipse.microprofile.rest.client.propagateHeaders=
            Authorization,MyCustomHeader</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can still use the JAX-RS client without any problem <code>ClientBuilder.newClient().target(&#8230;&#8203;)</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Adding headers</strong></p>
</div>
<div class="paragraph">
<p>You can customize the headers passed by implementing MicroProfile <code>ClientHeadersFactory</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RegisterForReflection
public class BaggageHeadersFactory
                implements ClientHeadersFactory {
    @Override
    public MultivaluedMap&lt;String, String&gt; update(
        MultivaluedMap&lt;String, String&gt; incomingHeaders,
        MultivaluedMap&lt;String, String&gt; outgoingHeaders) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And registering it in the client using <code>RegisterClientHeaders</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RegisterClientHeaders(BaggageHeadersFactory.class)
@RegisterRestClient
public interface WorldClockService {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or statically set:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@ClientHeaderParam(name="X-Log-Level", value="ERROR")
Response getNow();</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Asynchronous</strong></p>
</div>
<div class="paragraph">
<p>A method on client interface can return a <code>CompletionStage</code> class to be executed asynchronously.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET @Path("/json/cet/now")
@Produces(MediaType.APPLICATION_JSON)
CompletionStage&lt;WorldClock&gt; getNow();</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Multipart</strong></p>
</div>
<div class="paragraph">
<p>It is really easy to send multipart form-data with Rest Client.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;org.jboss.resteasy&lt;/groupId&gt;
    &lt;artifactId&gt;resteasy-multipart-provider&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The model object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import java.io.InputStream;

import javax.ws.rs.FormParam;
import javax.ws.rs.core.MediaType;

import
    org.jboss.resteasy.annotations.providers.multipart.PartType;

public class MultipartBody {

    @FormParam("file")
    @PartType(MediaType.APPLICATION_OCTET_STREAM)
    private InputStream file;

    @FormParam("fileName")
    @PartType(MediaType.TEXT_PLAIN)
    private String name;

    // getter/setters
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the Rest client interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import
    org.jboss.resteasy.annotations.providers.multipart.MultipartForm;

@Path("/echo")
@RegisterRestClient
public interface MultipartService {

    @POST
    @Consumes(MediaType.MULTIPART_FORM_DATA)
    @Produces(MediaType.TEXT_PLAIN)
    String sendMultipartData(@MultipartForm
                        MultipartBody data);

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>SSL</strong></p>
</div>
<div class="paragraph">
<p>You can configure Rest Client key stores.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/trustStore=
    classpath:/store.jks
org.acme.quickstart.WorldClockService/mp-rest/trustStorePassword=
    supersecret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible configuration properties:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>%s/mp-rest/trustStore</code></dt>
<dd>
<p>Trust store location defined with <code>classpath:</code> or <code>file:</code> prefix.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/trustStorePassword</code></dt>
<dd>
<p>Trust store password.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/trustStoreType</code></dt>
<dd>
<p>Trust store type (default: <code>JKS</code>)</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/hostnameVerifier</code></dt>
<dd>
<p>Custom hostname verifier class name.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStore</code></dt>
<dd>
<p>Key store location defined with <code>classpath:</code> or <code>file:</code> prefix.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStorePassword</code></dt>
<dd>
<p>Key store password.</p>
</dd>
<dt class="hdlist1"><code>%s/mp-rest/keyStoreType</code></dt>
<dd>
<p>Key store type (default: <code>JKS</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Timeout</strong></p>
</div>
<div class="paragraph">
<p>You can define the timeout of the Rest Client:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClockService/mp-rest/connectTimeout=
    1000
org.acme.quickstart.WorldClockService/mp-rest/readTimeout=
    2000</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_testing"><a class="anchor" href="#_testing"></a><a class="link" href="#_testing">Testing</a></h3>
<div class="paragraph">
<p>Quarkus archetype adds test dependencies with JUnit 5 and Rest-Assured library to test REST endpoints.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTest
public class GreetingResourceTest {

    @Test
    public void testHelloEndpoint() {
        given()
          .when().get("/hello")
          .then()
             .statusCode(200)
             .body(is("hello"));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Test port can be set in <code>quarkus.http.test-port</code> property.</p>
</div>
<div class="paragraph">
<p>You can also inject the URL where Quarkus is started:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@TestHTTPResource("index.html")
URL url;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Quarkus Test Resource</strong></p>
</div>
<div class="paragraph">
<p>You can execute some logic before the first test run (<code>start</code>) and execute some logic at the end of the test suite (<code>stop</code>).</p>
</div>
<div class="paragraph">
<p>You need to create a class implementing <code>QuarkusTestResourceLifecycleManager</code> interface and register it in the test via <code>@QuarkusTestResource</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyCustomTestResource
    implements QuarkusTestResourceLifecycleManager {

    @Override
    public Map&lt;String, String&gt; start() {
        // return system properties that
        // should be set for the running test
        return Collections.emptyMap();
    }

    @Override
    public void stop() {
    }

    // optional
    @Override
    public void inject(Object testInstance) {
    }

    // optional
    @Override
    public int order() {
        return 0;
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Returning new system properties implies running parallel tests in different JVMs.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>And the usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(MyCustomTestResource.class)
public class MyTest {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Mocking</strong></p>
</div>
<div class="paragraph">
<p>If you need to provide an alternative implementation of a service (for testing purposes) you can do it by using CDI <code>@Alternative</code> annotation using it in the test service placed at <code>src/test/java</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Alternative
@Priority(1)
@ApplicationScoped
public class MockExternalService extends ExternalService {}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This does not work when using native image testing.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A stereotype annotation <code>io.quarkus.test.Mock</code> is provided declaring <code>@Alternative</code>, <code>@Priority(1)</code> and <code>@Dependent</code>.</p>
</div>
<div class="paragraph">
<p><strong>Interceptors</strong></p>
</div>
<div class="paragraph">
<p>Tests are actually full CDI beans, so you can apply CDI interceptors:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTest
@Stereotype
@Transactional
@Retention(RetentionPolicy.RUNTIME)
@Target(ElementType.TYPE)
public @interface TransactionalQuarkusTest {
}

@TransactionalQuarkusTest
public class TestStereotypeTestCase {}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Test Coverage</strong>
Due the nature of Quarkus to calculate correctly the coverage information with JaCoCo, you might need offline instrumentation.
I recommend reading <a href="https://quarkus.io/guides/tests-with-coverage-guide" target="_blank" rel="noopener">this document</a> to understand how JaCoCo and Quarkus works and how you can configure JaCoCo to get correct data.</p>
</div>
<div class="paragraph">
<p><strong>Native Testing</strong></p>
</div>
<div class="paragraph">
<p>To test native executables annotate the test with <code>@NativeImageTest</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_persistence"><a class="anchor" href="#_persistence"></a><a class="link" href="#_persistence">Persistence</a></h3>
<div class="paragraph">
<p>Quarkus works with JPA(Hibernate) as persistence solution.
But also provides an <a href="https://en.wikipedia.org/wiki/Active_record_pattern" target="_blank" rel="noopener">Active Record pattern</a> implementation under Panache project.</p>
</div>
<div class="paragraph">
<p>To use database access you need to add Quarkus JDBC drivers instead of the original ones.
At this time <code>Apache Derby</code>, <code>H2</code>, <code>MariaDB</code>, <code>MySQL</code>, <code>MSSQL</code> and <code>PostgreSQL</code> drivers are supported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-hibernate-orm-panache,
                io.quarkus:quarkus-jdbc-mariadb"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
public class Developer extends PanacheEntity {

    // id field is implicit

    public String name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configuration in <code>src/main/resources/application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=jdbc:mariadb://localhost:3306/mydb
quarkus.datasource.driver=org.mariadb.jdbc.Driver
quarkus.datasource.username=developer
quarkus.datasource.password=developer
quarkus.hibernate-orm.database.generation=update</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of datasource parameters.</p>
</div>
<div class="paragraph">
<p><code>quarkus.datasource</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>driver</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>min-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Integer</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Integer</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>initial-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Integer</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>background-validation-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>java.time.Duration</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>java.time.Duration</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>leak-detection-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>java.time.Duration</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>idle-removal-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>java.time.Duration</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>transaction-isolation-level</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>io.quarkus.agroal.runtime</code>
<code>.TransactionIsolationLevel</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enable-metrics</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Boolean</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>xa</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Boolean</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>validation-query-sql</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Boolean</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Hibernate configuration properties.
Prefix <code>quarkus.hibernate-orm</code> is skipped.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Values[Default]</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>dialect</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class name of the Hibernate ORM dialect.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not necessary to set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>dialect.storage-engine</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The storage engine when the dialect supports multiple storage engines.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Not necessary to set.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>sql-load-script</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the file containing the SQL statements to execute when starts.
<code>no-file</code> force Hibernate to skip SQL import.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>import.sql</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>batch-fetch-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The size of the batches.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>-1 disabled.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>query.query-plan-cache-max-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The maximum size of the query plan cache.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>query.default-null-ordering</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default precedence of null values in <code>ORDER BY</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>none</code>], <code>first</code>, <code>last</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.generation</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Database schema is generation.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>none</code>], <code>create</code>, <code>drop-and-create</code>, <code>drop</code>, <code>update</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.generation.halt-on-error</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stop on the first error when applying the schema.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>flase</code>], <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.default-catalog</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default catalog.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.default-schema</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default Schema.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>database.charset</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Charset.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jdbc.timezone</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time Zone JDBC driver.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jdbc.statement-fetch-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of rows fetched at a time.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jdbc.statement-batch-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Number of updates sent at a time.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>log.sql</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show SQL logs</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>false</code>], <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>log.jdbc-warnings</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Collect and show JDBC warnings.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>false</code>], <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>statistics</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable statiscs collection.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>false</code>], <code>true</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>physical-naming-strategy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class name of the Hibernate PhysicalNamingStrategy implementation.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>globally-quoted-identifiers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Should quote all identifiers.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>[<code>false</code>], <code>true</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Database operations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">// Insert
Developer developer = new Developer();
developer.name = "Alex";
developer.persist();

// Find All
Developer.findAll().list();

// Find By Query
Developer.find("name", "Alex").firstResult();

// Delete
Developer developer = new Developer();
developer.id = 1;
developer.delete();

// Delete By Query
long numberOfDeleted = Developer.delete("name", "Alex");</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remember to annotate methods with <code>@Transactional</code> annotation to make changes persisted in the database.</p>
</div>
<div class="paragraph">
<p>If queries start with the keyword <code>from</code> then they are treated as <em>HQL</em> query, if not then next short form is supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>order by</code> which expands to <code>from EntityName order by &#8230;&#8203;</code></p>
</li>
<li>
<p><code>&lt;columnName&gt;</code> which expands to <code>from EntityName where &lt;columnName&gt;=?</code></p>
</li>
<li>
<p><code>&lt;query&gt;</code> which is expanded to <code>from EntityName where &lt;query&gt;</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Static Methods</strong></p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>findById</code>:`Object`</dt>
<dd>
<p>Returns object or null if not found. Overloaded version with <code>LockModeType</code> is provided.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>findByIdOptional</code>:`Optional&lt;Object&gt;`</dt>
<dd>
<p>Returns object or <code>java.util.Optional</code>.</p>
</dd>
<dt class="hdlist1"><code>find</code>:`String`, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Lists of entities meeting given query with parameters set.</p>
</dd>
<dt class="hdlist1"><code>find</code>:`String`, <code>Sort</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Lists of entities meeting given query with parameters set sorted by <code>Sort</code> attribute/s.</p>
</dd>
<dt class="hdlist1"><code>findAll</code></dt>
<dd>
<p>Finds all entities.</p>
</dd>
<dt class="hdlist1"><code>findAll</code>:`Sort`</dt>
<dd>
<p>Finds all entities sorted by <code>Sort</code> attribute/s.</p>
</dd>
<dt class="hdlist1"><code>stream</code>:`String`, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p><code>java.util.stream.Stream</code> of entities meeting given query with parameters set.</p>
</dd>
<dt class="hdlist1"><code>stream</code>:`String`, <code>Sort</code>, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p><code>java.util.stream.Stream</code> of entities meeting given query with parameters set sorted by <code>Sort</code> attribute/s.</p>
</dd>
<dt class="hdlist1"><code>streamAll</code></dt>
<dd>
<p><code>java.util.stream.Stream</code> of all entities.</p>
</dd>
<dt class="hdlist1"><code>streamAll</code>:`Sort`</dt>
<dd>
<p><code>java.util.stream.Stream</code> of all entities sorted by <code>Sort</code> attribute/s.</p>
</dd>
<dt class="hdlist1"><code>count</code></dt>
<dd>
<p>Number of entities.</p>
</dd>
<dt class="hdlist1"><code>count</code>:`String`, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Number of entities meeting given query with parameters set.</p>
</dd>
<dt class="hdlist1"><code>deleteAll</code></dt>
<dd>
<p>Number of deleted entities.</p>
</dd>
<dt class="hdlist1"><code>delete</code>:`String`, [<code>Object&#8230;&#8203;</code>, <code>Map&lt;String, Object&gt;</code>, <code>Parameters</code>]</dt>
<dd>
<p>Number of deleted entities meeting given query with parameters set.</p>
</dd>
<dt class="hdlist1"><code>persist</code>:[<code>Iterable</code>, <code>Steram</code>, <code>Object&#8230;&#8203;</code>]</dt>
<dd>
<p>TIP: <code>find</code> methods defines a <code>withLock(LockModeType)</code> to define the lock type and <code>withHint(QueryHints.HINT_CACHEABLE, "true")</code> to define hints.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Pagination</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons = Person
            .find("status", Status.Alive);
livingPersons.page(Page.ofSize(25));

// get the first page
List&lt;Person&gt; firstPage = livingPersons.list();
// get the second page
List&lt;Person&gt; secondPage = livingPersons.nextPage().list();</code></pre>
</div>
</div>
<div class="paragraph">
<p>If entities are defined in external JAR, you need to enable in these projects the <code>Jandex</code> plugin in project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
    &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.3&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-index&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;jandex&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss&lt;/groupId&gt;
            &lt;artifactId&gt;jandex&lt;/artifactId&gt;
            &lt;version&gt;2.1.1.Final&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>DAO pattern</strong></p>
</div>
<div class="paragraph">
<p>Also supports <em>DAO</em> pattern with <code>PanacheRepository&lt;TYPE&gt;</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class DeveloperRepository
    implements PanacheRepository&lt;Person&gt; {
   public Person findByName(String name){
     return find("name", name).firstResult();
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>EntityManager</strong>
You can inject <code>EntityManager</code> in your classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
EntityManager em;

em.persist(car);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Multiple datasources</strong></p>
</div>
<div class="paragraph">
<p>You can register more than one datasource.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># default
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.url=jdbc:h2:tcp://localhost/mem:default
....
# users datasource
quarkus.datasource.users.driver=org.h2.Driver
quarkus.datasource.users.url=jdbc:h2:tcp://localhost/mem:users</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that after <code>datasource</code> you set the datasource name, in previous case <code>users</code>.</p>
</div>
<div class="paragraph">
<p>You can inject then <code>AgroalDataSource</code> with <code>io.quarkus.agroal.DataSource</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@DataSource("users")
AgroalDataSource dataSource1;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Flushing</strong></p>
</div>
<div class="paragraph">
<p>You can force flush operation by calling <code>.flush()</code> or <code>.persistAndFlush()</code> to make it in a single call.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This flush is less efficient and you still need to commit transaction.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Testing</strong></p>
</div>
<div class="paragraph">
<p>There is a Quarkus Test Resource that starts and stops H2 server before and after test suite.</p>
</div>
<div class="paragraph">
<p>Register dependency <code>io.quarkus:quarkus-test-h2:test</code>.</p>
</div>
<div class="paragraph">
<p>And annotate the test:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(H2DatabaseTestResource.class)
public class FlywayTestResources {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Transactions</strong></p>
</div>
<div class="paragraph">
<p>The easiest way to define your transaction boundaries is to use the <code>@Transactional</code> annotation.</p>
</div>
<div class="paragraph">
<p>Transactions are mandatory in case of none idempotent operations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
public void createDeveloper() {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can control the transaction scope:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@Transactional(REQUIRED)</code> (default): starts a transaction if none was started, stays with the existing one otherwise.</p>
</li>
<li>
<p><code>@Transactional(REQUIRES_NEW)</code>: starts a transaction if none was started; if an existing one was started, suspends it and starts a new one for the boundary of that method.</p>
</li>
<li>
<p><code>@Transactional(MANDATORY)</code>: fails if no transaction was started ; works within the existing transaction otherwise.</p>
</li>
<li>
<p><code>@Transactional(SUPPORTS)</code>: if a transaction was started, joins it ; otherwise works with no transaction.</p>
</li>
<li>
<p><code>@Transactional(NOT_SUPPORTED)</code>: if a transaction was started, suspends it and works with no transaction for the boundary of the method; otherwise works with no transaction.</p>
</li>
<li>
<p><code>@Transactional(NEVER)</code>: if a transaction was started, raises an exception; otherwise works with no transaction.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can configure the default transaction timeout using <code>quarkus.transaction-manager.default-transaction-timeout</code> configuration property. By default it is set to 60 seconds.</p>
</div>
<div class="paragraph">
<p>You can set a timeout property, in seconds, that applies to transactions created within the annotated method by using <code>@TransactionConfiguration</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
@TransactionConfiguration(timeout=40)
public void createDeveloper() {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want more control over transactions you can inject <code>UserTransaction</code> and use a programmatic way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject UserTransaction transaction

transaction.begin();
transaction.commit();
transaction.rollback();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_infinispan"><a class="anchor" href="#_infinispan"></a><a class="link" href="#_infinispan">Infinispan</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://infinispan.org/" target="_blank" rel="noopener">Infinispan</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="infinispan-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Serialization uses a library called <a href="https://github.com/infinispan/protostream" target="_blank" rel="noopener">Protostream</a>.</p>
</div>
<div class="paragraph">
<p><strong>Annotation based</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ProtoFactory
public Author(String name, String surname) {
    this.name = name;
    this.surname = surname;
}

@ProtoField(number = 1)
public String getName() {
    return name;
}

@ProtoField(number = 2)
public String getSurname() {
    return surname;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Initializer to set configuration settings.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@AutoProtoSchemaBuilder(includeClasses =
    { Book.class, Author.class },
    schemaPackageName = "book_sample")
interface BookContextInitializer
        extends SerializationContextInitializer {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>User written based</strong></p>
</div>
<div class="paragraph">
<p>There are three ways to create your schema:</p>
</div>
<div class="paragraph">
<p><em>Protofile</em></p>
</div>
<div class="paragraph">
<p>Creates a <code>.proto</code> file in the <code>META-INF</code> directory.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="proto" class="language-proto hljs">package book_sample;

message Author {
  required string name = 1;
  required string surname = 2;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of having a Collection field you need to use the <code>repeated</code> key (ie <code>repeated Author authors = 4</code>).</p>
</div>
<div class="paragraph">
<p><em>In code</em></p>
</div>
<div class="paragraph">
<p>Setting <code>proto</code> schema directly in a produced bean.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
FileDescriptorSource bookProtoDefinition() {
    return FileDescriptorSource
        .fromString("library.proto",
                    "package book_sample;\n" +
                    "message Author {\n" +
                    "  required string name = 1;\n" +
                    "  required string surname = 2;\n" +
                    "}");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Marshaller</em></p>
</div>
<div class="paragraph">
<p>Using <code>org.infinispan.protostream.MessageMarshaller</code> interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class AuthorMarshaller
    implements MessageMarshaller&lt;Author&gt; {

   @Override
   public String getTypeName() {
      return "book_sample.Author";
   }

   @Override
   public Class&lt;? extends Author&gt; getJavaClass() {
      return Author.class;
   }

   @Override
   public void writeTo(ProtoStreamWriter writer,
                    Author author) throws IOException {
      writer.writeString("name", author.getName());
      writer.writeString("surname", author.getSurname());
   }

   @Override
   public Author readFrom(ProtoStreamReader reader)
        throws IOException {
      String name = reader.readString("name");
      String surname = reader.readString("surname");
      return new Author(name, surname);
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And producing the marshaller:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
MessageMarshaller authorMarshaller() {
    return new AuthorMarshaller();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Infinispan Embedded</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="infinispan-embeddedy"</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>Configuration in <code>infinispan.xml</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;local-cache name="quarkus-transaction"&gt;
   &lt;transaction
        transaction-manager-lookup=
        "org.infinispan.transaction.lookup.JBossStandaloneJTAManagerLookup"/&gt;
&lt;/local-cache&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Set configuration file location in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.infinispan-embedded.xml-config=infinispan.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can inject the main entry point for the cache:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.infinispan.manager.EmbeddedCacheManager cacheManager;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_flyway"><a class="anchor" href="#_flyway"></a><a class="link" href="#_flyway">Flyway</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://flywaydb.org/" target="_blank" rel="noopener">Flyway</a> to help you on database schema migrations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-flyway"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then place migration files to the migrations folder (<code>classpath:db/migration</code>).</p>
</div>
<div class="paragraph">
<p>You can inject <code>org.flywaydb.core.Flyway</code> to programmatically execute the migration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Flyway flyway;

flyway.migrate();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or can be automatically executed by setting <code>migrate-at-start</code> property to <code>true</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.flyway.migrate-at-start=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of Flyway parameters.</p>
</div>
<div class="paragraph">
<p><code>quarkus.flyway</code> as prefix is skipped in the next table.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>clean-at-start</code></dt>
<dd>
<p>Execute Flyway clean command (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>migrate-at-start</code></dt>
<dd>
<p>Flyway migration automatically (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>locations</code></dt>
<dd>
<p>CSV locations to scan recursively for migrations. Supported prefixes <code>classpath</code> and <code>filesystem</code> (default: <code>classpath:db/migration</code>).</p>
</dd>
<dt class="hdlist1"><code>connect-retries</code></dt>
<dd>
<p>The maximum number of retries when attempting to connect (default: 0)</p>
</dd>
<dt class="hdlist1"><code>schemas</code></dt>
<dd>
<p>CSV case-sensitive list of schemas managed (default: none)</p>
</dd>
<dt class="hdlist1"><code>table</code></dt>
<dd>
<p>The name of Flyway’s schema history table (default: <code>flyway_schema_history</code>)</p>
</dd>
<dt class="hdlist1"><code>sql-migration-prefix</code></dt>
<dd>
<p>Prefix for versioned SQL migrations (default: <code>V</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>repeatable-sql-migration-prefix::</code>
Prefix for repeatable SQL migrations (default: <code>R</code>)</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>baseline-on-migrate</code></dt>
<dd>
<p>Only migrations above <strong>baseline-version</strong> will then be applied</p>
</dd>
<dt class="hdlist1"><code>baseline-version</code></dt>
<dd>
<p>Version to tag an existing schema with when executing baseline (default: 1)</p>
</dd>
<dt class="hdlist1"><code>baseline-description</code></dt>
<dd>
<p>Description to tag an existing schema with when executing baseline (default: <code>Flyway Baseline</code>)</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>validate-on-migrate</code></dt>
<dd>
<p>Validate the applied migrations against the available ones (default: <code>true</code>)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><strong>Multiple Datasources</strong></p>
</div>
<div class="paragraph">
<p>To use multiple datasource in Flyway you just need to add the datasource name just after the <code>flyway</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.users.url=jdbc:h2:tcp://localhost/mem:users
quarkus.datasource.inventory.url=jdbc:h2:tcp://localhost/mem:inventory
# ...

quarkus.flyway.users.schemas=USERS_TEST_SCHEMA
quarkus.flyway.inventory.schemas=INVENTORY_TEST_SCHEMA
# ...</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hibernate_search"><a class="anchor" href="#_hibernate_search"></a><a class="link" href="#_hibernate_search">Hibernate Search</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://www.elastic.co/products/elasticsearch" target="_blank" rel="noopener">Elasticsearch</a> to provide a full-featured full-text search using <a href="https://hibernate.org/search/" target="_blank" rel="noopener">Hibernate Search</a> API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-hibernate-search-elasticsearch"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to annotate your model with Hibernate Search API to index it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Entity
@Indexed
public class Author extends PanacheEntity {

    @FullTextField(analyzer = "english")
    public String bio;

    @FullTextField(analyzer = "name")
    @KeywordField(name = "firstName_sort",
        sortable = Sortable.YES,
        normalizer = "sort")
    public String firstName;

    @OneToMany
    @IndexedEmbedded
    public List&lt;Book&gt; books;

}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
It is not mandatory to use Panache.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You need to define the analyzers and normalizers defined in annotations.
You only need to implement <code>ElasticsearchAnalysisConfigurer</code> interface and configure it.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class MyQuarkusAnalysisConfigurer
            implements ElasticsearchAnalysisConfigurer {

    @Override
    public void configure(
        ElasticsearchAnalysisDefinitionContainerContext ctx)
    {
            ctx.analyzer("english").custom()
                .withTokenizer("standard")
                .withTokenFilters("asciifolding",
                    "lowercase", "porter_stem");

        ctx.normalizer("sort").custom()
            .withTokenFilters("asciifolding", "lowercase");
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Use Hibernate Search in REST service:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class LibraryResource {

    @Inject
    EntityManager em;

    @Transactional
    public List&lt;Author&gt; searchAuthors(
        @QueryParam("pattern") String pattern) {
        return Search.getSearchSession(em)
            .search(Author.class)
            .predicate(f -&gt;
                pattern == null || pattern.isEmpty() ?
                    f.matchAll() :
                    f.simpleQueryString()
                        .onFields("firstName",
                            "lastName", "books.title")
                        .matching(pattern)
                )
            .sort(f -&gt; f.byField("lastName_sort")
            .then().byField("firstName_sort"))
            .fetchHits();
    }</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When not using Hibernate ORM, index data using <code>Search.getSearchSession(em).createIndexer()</code> <code>.startAndWait()</code> at startup time.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Configure the extension in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.hibernate-search.elasticsearch.version=7
quarkus.hibernate-search.elasticsearch.
    analysis-configurer=MyQuarkusAnalysisConfigurer
quarkus.hibernate-search.elasticsearch.
    automatic-indexing.synchronization-strategy=searchable
quarkus.hibernate-search.elasticsearch.
    index-defaults.lifecycle.strategy=drop-and-create
quarkus.hibernate-search.elasticsearch.
    index-defaults.lifecycle.required-status=yellow</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of Hibernate-Elasticsearch properties prefixed with <code>quarkus.hibernate-search.elasticsearch</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>backends</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map of configuration of additional backends.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>version</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Version of Elasticsearch</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>analysis-configurer</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Class or name of the neab used to configure.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List of Elasticsearch servers hosts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username for auth.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password for auth.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Duration of connection timeout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connections</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of connections to servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connections-per-route</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of connections to server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>indexes</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Per-index specific configuration.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>discovery.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables automatic discovery.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>discovery.refresh-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Refresh interval of node list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>discovery.default-scheme</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Scheme to be used for the new nodes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>automatic-indexing.synchronization-strategy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Status for which you wait before considering the operation completed (<code>queued</code>,<code>committed</code> or <code>searchable</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>automatic-indexing.enable-dirty-check</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">When enabled, re-indexing of is skipped if the changes are on properties that are not used when indexing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>index-defaults.lifecycle.strategy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Index lifecycle (<code>none</code>, <code>validate</code>, <code>update</code>, <code>create</code>, <code>drop-and-create</code>, <code>drop-abd-create-drop</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>index-defaults.lifecycle.required-status</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Minimal cluster status (<code>green</code>, <code>yellow</code>, <code>red</code>)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>index-defaults.lifecycle.required-status-wait-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Waiting time before failing the bootstrap.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>index-defaults.refresh-after-write</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Set if index should be refreshed after writes.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Possible annotations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Indexed</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Register entity as full text index</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@FullTextField</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full text search. Need to set an analyzer to split tokens.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@KeywordField</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The string is kept as one single token but can be normalized.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>IndexedEmbedded</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Include the Book fields into the Author index.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@ContainerExtraction</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets how to extract a value from container, e.g from a <code>Map</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@DocumentId</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Map an unusual entity identifier to a document identifier.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@GenericField</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Full text index for any supported type.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@IdentifierBridgeRef</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Reference to the identifier bridge to use for a <code>@DocumentId</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@IndexingDependency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How a dependency of the indexing process to a property should affect automatic reindexing.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@ObjectPath</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@ScaledNumberField</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For <code>java.math.BigDecimal</code> or <code>java.math.BigInteger</code> that you need higher precision.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_amazon_dynamodb"><a class="anchor" href="#_amazon_dynamodb"></a><a class="link" href="#_amazon_dynamodb">Amazon DynamoDB</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://aws.amazon.com/dynamodb/" target="_blank" rel="noopener">Amazon DynamoDB</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-amazon-dynamodb"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
DynamoDbClient dynamoDB;

@Inject
DynamoDbAsyncClient dynamoDB;</code></pre>
</div>
</div>
<div class="paragraph">
<p>To use it as a local DynamoDB instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.dynamodb.region=
    eu-central-1
quarkus.dynamodb.endpoint-override=
    http://localhost:8000
quarkus.dynamodb.credentials.type=STATIC
quarkus.dynamodb.credentials.static-provider
    .access-key-id=test-key
quarkus.dynamodb.credentials.static-provider
.secret-access-key=test-secret</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to work with an AWS account, you’d need to set it with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">quarkus.dynamodb.region=&lt;YOUR_REGION&gt;
quarkus.dynamodb.credentials.type=DEFAULT</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>DEFAULT</code> credentials provider chain:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>System properties <code>aws.accessKeyId</code>, <code>aws.secretKey</code></p>
</li>
<li>
<p>Env. Varables <code>AWS_ACCESS_KEY_ID</code>, <code>AWS_SECRET_ACCESS_KEY</code></p>
</li>
<li>
<p>Credentials profile <code>~/.aws/credentials</code></p>
</li>
<li>
<p>Credentials through the Amazon EC2 container service if the <code>AWS_CONTAINER_CREDENTIALS_RELATIVE_URI</code> set</p>
</li>
<li>
<p>Credentials through Amazon EC2 metadata service.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Configuration parameters prefixed with <code>quarkus.dynamodb</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Parameter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"> Description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enable-endpoint-discovery</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint discovery for a service API that supports endpoint discovery.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>endpoint-override</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Configure the endpoint with which the SDK should communicate.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>api-call-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time to complete an execution.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>interceptors</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of class interceptors.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Configuration parameters prefixed with <code>quarkus.dynamodb.aws</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>region</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Region that hosts DynamoDB.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>DEFAULT</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Credentials that should be used <code>DEFAULT</code>, <code>STATIC</code>, <code>SYSTEM_PROPERTY</code>, <code>ENV_VARIABLE</code>, <code>PROFILE</code>, <code>CONTAINER</code>, <code>INSTANCE_PROFILE</code>, <code>PROCESS</code>, <code>ANONYMOUS</code></p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Credentials specific parameters prefixed with <code>quarkus.dynamodb.aws.credentials</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">DEFAULT</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default-provider.async-credential-update-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should fetch credentials async.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default-provider.reuse-last-provider-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should reuse the last successful credentials.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">STATIC</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>static-provider.access-key-id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AWS access key id.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>static-provider.secret-access-key</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>AWS secret access key.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROFILE</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>profile-provider.profile-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>default</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The name of the profile to use.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top" colspan="3"><p class="tableblock">PROCESS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.command</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Command to execute to retrieve credentials.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.process-output-limit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>1024</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max bytes to retrieve from process.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.credential-refresh-threshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT15S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The amount of time between credentials expire and credentials refreshed.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>process-provider.async-credential-update-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Should fetch credentials async.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In case of synchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.sync-client</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection acquisation timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-max-idle-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>60S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time to connection to be opened.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-time-to-live</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time connection to be open.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>socket-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Time to wait for data.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connections</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>50</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max connections.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>expect-continue-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Client send an HTTP <code>expect-continue</code> handsake.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>use-idle-connection-reaper</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connections in pool should be closed asynchronously.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.endpoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint of the proxy server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables HTTP proxy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Proxy username.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Proxy password.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.ntlm-domain</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For NTLM, domain name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.ntlm-workstation</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>For NTLM, workstation name.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.preemptive-basic-authentication-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Authenticate pre-emptively.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.non-proxy-hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of non proxy hosts.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>system-property</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to key store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store type.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store password.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>In case of asynchronous client, the next parameters can be configured prefixed by <code>quarkus.dynamodb.async-client</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection acquisation timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-max-idle-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>60S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time to connection to be opened.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-time-to-live</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max time connection to be open.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-concurrency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>50</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max number of concurrent connections.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>use-idle-connection-reaper</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connections in pool should be closed asynchronously.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>read-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Read timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>30S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Write timeout.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.endpoint</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Endpoint of the proxy server.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enables HTTP proxy.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy.non-proxy-hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>List of non proxy hosts.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>system-property</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS manager: <code>none</code>, <code>system-property</code>, <code>file-store</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to key store.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.type</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store type.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-managers-provider.file-store.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Key store password.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ssl-provider</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>SSL Provider (<code>jdk</code>, <code>openssl</code>, <code>openssl-refcnt</code>).</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>protocol</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>HTTP_1_1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Sets the HTTP protocol.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-http2-streams</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Max number of concurrent streams.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.override</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable custom event loop conf.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.number-of-threads</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Number of threads to use in event loop.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>event-loop.thread-name-prefix</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>aws-java-sdk-NettyEventLoop</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Prefix of thread names.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_neo4j"><a class="anchor" href="#_neo4j"></a><a class="link" href="#_neo4j">Neo4j</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://neo4j.com/" target="_blank" rel="noopener">Neo4j</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-neo4j"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
org.neo4j.driver.Driver driver;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration properties:</p>
</div>
<div class="paragraph">
<p><code>quarkus.neo4j</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>uri</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>localhost:7687</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URI of Neo4j.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>authentication</code>
<code>.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>neo4j</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>authentication</code>
<code>.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>neo4j</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>authentication</code>
<code>.disabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable authentication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.metrics-enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable metrics.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.log-leaked-sessions</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable leaked sessions logging.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.max-connection-pool-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>100</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max amount of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.max-connection-lifetime</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1H</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pooled connections older will be closed and removed from the pool.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.connection-acquisition-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1M</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timout for connection adquisation.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>pool.idle-time-before-connection-test</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>-1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Pooled connections idled in the pool for longer than this timeout will be tested before they are used.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>As Neo4j uses SSL communication by default, to create a native executable you need to compile with next options GraalVM options:</p>
</div>
<div class="paragraph">
<p><code>-H:EnableURLProtocols=http,https --enable-all-security-services -H:+JNI</code></p>
</div>
<div class="paragraph">
<p>And Quarkus Maven Plugin with next configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;artifactId&gt;quarkus-maven-plugin&lt;/artifactId&gt;
&lt;executions&gt;
    &lt;execution&gt;
        &lt;id&gt;native-image&lt;/id&gt;
        &lt;goals&gt;
            &lt;goal&gt;native-image&lt;/goal&gt;
        &lt;/goals&gt;
        &lt;configuration&gt;
            &lt;enableHttpUrlHandler&gt;true
            &lt;/enableHttpUrlHandler&gt;
            &lt;enableHttpsUrlHandler&gt;true
            &lt;/enableHttpsUrlHandler&gt;
            &lt;enableAllSecurityServices&gt;true
            &lt;/enableAllSecurityServices&gt;
            &lt;enableJni&gt;true&lt;/enableJni&gt;
        &lt;/configuration&gt;
    &lt;/execution&gt;
&lt;/executions&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, and as a not recommended way in production, you can disable SSL and Quarkus will disable Bolt SSL as well. <code>quarkus.ssl.native=false</code>.</p>
</div>
<div class="paragraph">
<p>If you are using Neo4j 4.0, you can use fully reactive.
Add next depenency management <code>io.projectreactor:reactor-bom:Californium-SR4:pom:import</code> and dependency: <code>io.projectreactor:reactor-core</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public Publisher&lt;String&gt; get() {
        return Flux.using(driver::rxSession, ...);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mongodb_client"><a class="anchor" href="#_mongodb_client"></a><a class="link" href="#_mongodb_client">MongoDB Client</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://www.mongodb.com/" target="_blank" rel="noopener">MongoDB</a>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-mongodb-client"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
com.mongodb.client.MongoClient client;

@Inject
io.quarkus.mongodb.ReactiveMongoClient client;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mongodb.connection-string=mongodb://localhost:27018
quarkus.mongodb.write-concern.journal=false</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>quarkus.mongodb</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-string</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>MongoDB connection URI.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>hosts</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>List&lt;String&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Addresses passed as <code>host:port</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>application-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application name.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-pool-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum number of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>min-pool-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum number of connections.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connection-idle-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Idle time of a pooled connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-connection-life-time</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Life time of pooled connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>wait-queue-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum wait time for new connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>maintenance-frequency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time period between runs of maintenance job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>maintenance-initial-delay</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait before running the first maintenance job.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>wait-queue-multiple</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Multiplied with <code>max-pool-size</code> gives max numer of threads waiting.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>socket-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls-insecure</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [false]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Insecure TLS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tls</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [false]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable TLS</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>replica-set-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Implies hosts given are a seed list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>server-selection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Time to wait for server selection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>local-threshold</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Minimum ping time to make a server eligible.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>heartbeat-frequency</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Frequency to determine the state of servers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>read-preference</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>primary</code>,
<code>primaryPreferred</code>,
<code>secondary</code>,
<code>secondaryPreferred</code>,
<code>nearest</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read preferences.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>max-wait-queue-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Int</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max number of concurrent operations allowed to wait.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.safe</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [true]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ensures are writes are ack.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.journal</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [true]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Journal writing aspect.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.w</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Value to all write commands.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.retry-writes</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>boolean [false]</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Retry writes if network fails.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>write-concern.w-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Duration</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Timeout to all write commands.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.auth-mechanism</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>MONGO-CR</code>, <code>GSSAPI</code>, <code>PLAIN</code>, <code>MONGODB-X509</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.auth-source</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>String</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Source of the authentication credentials.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.auth-mechanism-properties</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Map&lt;String, String&gt;</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Authentication mechanism properties.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_mongodb_panache"><a class="anchor" href="#_mongodb_panache"></a><a class="link" href="#_mongodb_panache">MongoDB Panache</a></h3>
<div class="paragraph">
<p>You can also use the Panache framework to write persistence part when using MongoDB.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="mongodb-panache"</code></pre>
</div>
</div>
<div class="paragraph">
<p>MongoDB configuration comes from <a href="#_mongodb_client">MongoDB Client</a> section.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@MongoEntity(collection="ThePerson")
public class Person extends PanacheMongoEntity {
    public String name;

    @BsonProperty("birth")
    public LocalDate birthDate;

    public Status status;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible annotations in fields: <code>@BsonId</code> (for custom ID), <code>@BsonProperty</code> and <code>@BsonIgnore</code>.</p>
</div>
<div class="paragraph">
<p><strong>Important:</strong> <code>@MongoEntity</code> is optional.</p>
</div>
<div class="paragraph">
<p>Methods provided are similar of the ones shown in <a href="#_persistence">Persistence</a> section.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">person.persist();
person.update();
person.delete();

List&lt;Person&gt; allPersons = Person.listAll();
person = Person.findById(personId);
List&lt;Person&gt; livingPersons = Person.list("status", Status.Alive);
List&lt;Person&gt; persons = Person.list(Sort.by("name").and("birth"));

long countAll = Person.count();

Person.delete("status", Status.Alive);</code></pre>
</div>
</div>
<div class="paragraph">
<p>All <code>list</code> methods have equivalent <code>stream</code> versions.</p>
</div>
<div class="paragraph">
<p><strong>Pagination</strong></p>
</div>
<div class="paragraph">
<p>You can also use pagination:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">PanacheQuery&lt;Person&gt; livingPersons =
    Person.find("status", Status.Alive);
livingPersons.page(Page.ofSize(25));

// get the first page
List&lt;Person&gt; firstPage = livingPersons.list();
// get the second page
List&lt;Person&gt; secondPage = livingPersons.nextPage().list();</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Queries</strong></p>
</div>
<div class="paragraph">
<p>Native MongoDB queries are supported (if they start with <code>{</code> or <code>org.bson.Document</code> instance) as well as Panache Queries.
Panache Queries equivalence in MongoDB:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>firstname = ?1 and status = ?2</code> &#8594; <code>{'firstname': ?1, 'status': ?2}</code></p>
</li>
<li>
<p><code>amount &gt; ?1 and firstname != ?2</code> &#8594; <code>{'amount': {'$gt': ?1}, 'firstname': {'$ne': ?2}}</code></p>
</li>
<li>
<p><code>lastname like ?1</code> &#8594; <code>{'lastname': {'$regex': ?1}}</code></p>
</li>
<li>
<p><code>lastname is not null</code> &#8594; <code>{'lastname':{'$exists': true}}</code></p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
PanacheQL refers to the Object parameter name but native queries refer to MongoDB field names.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Projection</strong></p>
</div>
<div class="paragraph">
<p>Projection can be done for both PanacheQL and native queries.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import io.quarkus.mongodb.panache.ProjectionFor;

@ProjectionFor(Person.class) <i class="conum" data-value="1"></i><b>(1)</b>
public class PersonName {
    public String name;
}

PanacheQuery&lt;PersonName&gt; shortQuery = Person.find("status ", Status.Alive).project(PersonName.class);</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Entity class.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>DAO pattern</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class PersonRepository
    implements PanacheMongoRepository&lt;Person&gt; {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If entities are defined in external JAR, you need to enable in these projects the <code>Jandex</code> plugin in project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;plugin&gt;
    &lt;groupId&gt;org.jboss.jandex&lt;/groupId&gt;
    &lt;artifactId&gt;jandex-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.3&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;make-index&lt;/id&gt;
            &lt;goals&gt;
                &lt;goal&gt;jandex&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.jboss&lt;/groupId&gt;
            &lt;artifactId&gt;jandex&lt;/artifactId&gt;
            &lt;version&gt;2.1.1.Final&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/plugin&gt;</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_reactive_programming"><a class="anchor" href="#_reactive_programming"></a><a class="link" href="#_reactive_programming">Reactive Programming</a></h3>
<div class="paragraph">
<p>Quarkus implements <a href="https://github.com/eclipse/microprofile-reactive-streams-operators" target="_blank" rel="noopener">MicroProfile Reactive spec</a> and uses RXJava2 to provide reactive programming model.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="
    io.quarkus:quarkus-smallrye-reactive-streams-operators"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Asynchronous HTTP endpoint is implemented by returning Java <code>CompletionStage</code>.
You can create this class either manually or using MicroProfile Reactive Streams spec:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@Path("/reactive")
@Produces(MediaType.TEXT_PLAIN)
public CompletionStage&lt;String&gt; getHello() {
    return ReactiveStreams.of("h", "e", "l", "l", "o")
    .map(String::toUpperCase)
    .toList()
    .run()
    .thenApply(list -&gt; list.toString());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Creating streams is also easy, you just need to return <code>Publisher</code> object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@Path("/stream")
@Produces(MediaType.SERVER_SENT_EVENTS)
public Publisher&lt;String&gt; publishers() {
        return Flowable
        .interval(500, TimeUnit.MILLISECONDS)
        .map(s -&gt; atomicInteger.getAndIncrement())
        .map(i -&gt; Integer.toString(i));
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reactive_messaging"><a class="anchor" href="#_reactive_messaging"></a><a class="link" href="#_reactive_messaging">Reactive Messaging</a></h3>
<div class="paragraph">
<p>Quarkus relies on MicroProfile <a href="https://github.com/eclipse/microprofile-reactive-messaging" target="_blank" rel="noopener">Reactive Messaging spec</a> to implement reactive messaging streams.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
        io.quarkus:quarkus-smallrye-reactive-messaging"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can just start using in-memory streams by using <code>@Incoming</code> to produce data and <code>@Outgoing</code> to consume data.</p>
</div>
<div class="paragraph">
<p>Produce every 5 seconds one piece of data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ProducerData {

    @Outgoing("my-in-memory")
    public Flowable&lt;Integer&gt; generate() {
        return Flowable.interval(5, TimeUnit.SECONDS)
                .map(tick -&gt; random.nextInt(100));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to dispatch to all subscribers you can annotate the method with <code>@Broadcast</code>.</p>
</div>
<div class="paragraph">
<p>Consumes generated data from <code>my-in-memory</code> stream.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ConsumerData {
    @Incoming("my-in-memory")
    public void randomNumber(int randomNumber) {
        System.out.println("Received " + randomNumber);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also inject an stream as a field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Stream("my-in-memory") Publisher&lt;Integer&gt; randomRumbers;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream("generated-price")
Emitter&lt;String&gt; emitter;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Patterns</strong></p>
</div>
<div class="paragraph">
<p><em>REST API &#8594; Message</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(“in”)
Emitter&lt;String&gt; emitter;

emitter.send(message);</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; Message</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Incoming(“in”)
@Outgoing(“out”)
public String process(String in) {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; SSE</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject @Stream(“out”)
Publisher&lt;String&gt; result;

@GET
@Produces(SERVER_SENT_EVENTS)
public Publisher&lt;String&gt; stream() {
    return result;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><em>Message &#8594; Business Logic</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ReceiverMessages {
    @Incoming("prices")
    public void print(String price) {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible implementations are:</p>
</div>
<div class="paragraph">
<p><strong>In-Memory</strong></p>
</div>
<div class="paragraph">
<p>If the stream is not configured then it is assumed to be an in-memory stream, if not then stream type is defined by <code>connector</code> field.</p>
</div>
<div class="paragraph">
<p><strong>Kafka</strong></p>
</div>
<div class="paragraph">
<p>To integrate with Kafka you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="
    io.quarkus:quarkus-smallrye-reactive-messaging-kafka"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>Kafka configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The <code>connector</code> type is <code>smallrye-kafka</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.generated-price.connector=
    smallrye-kafka
mp.messaging.outgoing.generated-price.topic=
    prices
mp.messaging.outgoing.generated-price.bootstrap.servers=
    localhost:9092
mp.messaging.outgoing.generated-price.value.serializer=
    org.apache.kafka.common.serialization.IntegerSerializer

mp.messaging.incoming.prices.connector=
    smallrye-kafka
mp.messaging.incoming.prices.value.deserializer=
    org.apache.kafka.common.serialization.IntegerDeserializer</code></pre>
</div>
</div>
<div class="paragraph">
<p>A complete list of supported properties are in Kafka site. For the <a href="https://kafka.apache.org/documentation/#producerconfigs" target="_blank" rel="noopener">producer</a> and for <a href="https://kafka.apache.org/documentation/#consumerconfigs" target="_blank" rel="noopener">consumer</a></p>
</div>
<div class="paragraph">
<p><em>JSON-B Serializer/Deserializer</em></p>
</div>
<div class="paragraph">
<p>You can use JSON-B to serialize/deserialize objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kafka-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>To serialize you can use <code>io.quarkus.kafka.client.serialization.JsonbSerializer</code>.</p>
</div>
<div class="paragraph">
<p>To deserialize you need to extend <code>io.quarkus.kafka.client.serialization.JsonbDeserializer</code> and provide a type.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class BeerDeserializer
    extends JsonbDeserializer&lt;Beer&gt; {

    public BeerDeserializer() {
        super(Beer.class);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>AMQP</strong></p>
</div>
<div class="paragraph">
<p>To integrate with AMQP you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="reactive-messaging-amqp"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>AMQP configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.
Special properties <code>amqp-username</code> and <code>amqp-password</code> are used to configure AMQP broker credentials.</p>
</div>
<div class="paragraph">
<p>The connector type is <code>smallrye-amqp</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">amqp-username=quarkus
amqp-password=quarkus
# write
mp.messaging.outgoing.generated-price.connector=
    smallrye-amqp
mp.messaging.outgoing.generated-price.address=
    prices
mp.messaging.outgoing.generated-price.durable=
    true
# read
mp.messaging.incoming.prices.connector=
    smallrye-amqp
mp.messaging.incoming.prices.durable=
    true</code></pre>
</div>
</div>
<div class="paragraph">
<p>A complete list of supported properties for <a href="https://smallrye.io/smallrye-reactive-messaging/#_interacting_using_amqp" target="_blank" rel="noopener">AMQP</a>.</p>
</div>
<div class="paragraph">
<p><strong>MQTT</strong></p>
</div>
<div class="paragraph">
<p>To integrate with MQTT you need to add next extensions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
    -Dextensions="vertx, smallrye-reactive-streams-operators
        smallrye-reactive-messaging"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And add <code>io.smallrye.reactive:smallrye-reactive-messaging-mqtt-1.0:0.0.10</code> dependency in your build tool.</p>
</div>
<div class="paragraph">
<p>Then <code>@Outgoing</code>, <code>@Incoming</code> or <code>@Stream</code> can be used.</p>
</div>
<div class="paragraph">
<p>MQTT configuration schema: <code>mp.messaging.[outgoing|incoming].{stream-name}.&lt;property&gt;=&lt;value&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The connector type is <code>smallrye-mqtt</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.messaging.outgoing.topic-price.type=
    smallrye-mqtt
mp.messaging.outgoing.topic-price.topic=
    prices
mp.messaging.outgoing.topic-price.host=
    localhost
mp.messaging.outgoing.topic-price.port=
    1883
mp.messaging.outgoing.topic-price.auto-generated-client-id=
    true

mp.messaging.incoming.prices.type=
    smallrye-mqtt
mp.messaging.incoming.prices.topic=
    prices
mp.messaging.incoming.prices.host=
    localhost
mp.messaging.incoming.prices.port=
    1883
mp.messaging.incoming.prices.auto-generated-client-id=
    true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kafka_streams"><a class="anchor" href="#_kafka_streams"></a><a class="link" href="#_kafka_streams">Kafka Streams</a></h3>
<div class="paragraph">
<p>Create streaming queries with the Kafka Streams API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="kafka-streams"</code></pre>
</div>
</div>
<div class="paragraph">
<p>All we need to do for that is to declare a CDI producer method which returns the Kafka Streams <code>org.apache.kafka.streams.Topology</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class TopologyProducer {
    @Produces
    public Topology buildTopology() {
        org.apache.kafka.streams.StreamsBuilder.StreamsBuilder
            builder = new StreamsBuilder();
        // ...
        builder.stream()
            .join()
            // ...
            .toStream()
            .to();
        return builder.build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Previous example produces content to another stream.
If you want to write interactive queries, you can use Kafka streams.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KafkaStreams streams;

return streams
        .store("stream", QueryableStoreTypes.keyValueStore());</code></pre>
</div>
</div>
<div class="paragraph">
<p>The Kafka Streams extension is configured via the Quarkus configuration file <code>application.properties</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kafka-streams.bootstrap-servers=localhost:9092
quarkus.kafka-streams.application-id=temperature-aggregator
quarkus.kafka-streams.application-server=${hostname}:8080
quarkus.kafka-streams.topics=weather-stations,temperature-values

kafka-streams.cache.max.bytes.buffering=10240
kafka-streams.commit.interval.ms=1000</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>IMPORTANT:</strong> All the properties within the <code>kafka-streams</code> namespace are passed through as-is to the Kafka Streams engine. Changing their values requires a rebuild of the application.</p>
</div>
</div>
<div class="sect2">
<h3 id="_reactive_postgresql_client"><a class="anchor" href="#_reactive_postgresql_client"></a><a class="link" href="#_reactive_postgresql_client">Reactive PostgreSQL Client</a></h3>
<div class="paragraph">
<p>You can use Reactive PostgreSQL to execute queries to PostreSQL database in a reactive way, instead of using JDBC way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-pg-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
    vertx-reactive:postgresql://host:5431/db</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can inject <code>io.vertx.axle.pgclient.PgPool</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
PgPool client;

CompletionStage&lt;JsonArray&gt; =
    client.query("SELECT * FROM table")
    .thenApply(rowSet -&gt; {
        JsonArray jsonArray = new JsonArray();
        PgIterator iterator = rowSet.iterator();
        return jsonArray;
    })</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_reactive_mysql_client"><a class="anchor" href="#_reactive_mysql_client"></a><a class="link" href="#_reactive_mysql_client">Reactive MySQL Client</a></h3>
<div class="paragraph">
<p>You can use Reactive MySQL to execute queries to MySQL database in a reactive way, instead of using JDBC way.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-reactive-mysql-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Database configuration is the same as shown in <a href="#_persistence">Persistence</a> section, but URL is different as it is not a <em>jdbc</em>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
    vertx-reactive:mysql://localhost:3306/db</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can inject <code>io.vertx.axle.mysqlclient.MySQLPool</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MySQLPool client;

public static CompletionStage&lt;Fruit&gt; findById(
    MySQLPool c, Long id) {
    return c.preparedQuery("SELECT name FROM fruits WHERE id = $1",
                Tuple.of(id))
            .thenApply(RowSet::iterator)
            .thenApply(iterator -&gt; iterator.hasNext() ?
                        from(iterator.next()) : null);
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_activemq_artemis"><a class="anchor" href="#_activemq_artemis"></a><a class="link" href="#_activemq_artemis">ActiveMQ Artemis</a></h3>
<div class="paragraph">
<p>Quarkus uses <a href="#_reactive_messaging">Reactive Messaging</a> to integrate with messaging systems, but in case you need deeper control when using <a href="https://activemq.apache.org/components/artemis/" target="_blank" rel="noopener">Apache ActiveMQ Artemis</a> there is also an extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-artemis-core"</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>And then you can inject <code>org.apache.activemq.artemis.api.core.client.ServerLocator</code> instance.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ArtemisConsumerManager {

    @Inject
    ServerLocator serverLocator;

    private ClientSessionFactory connection;

    @PostConstruct
    public void init() throws Exception {
        connection = serverLocator.createSessionFactory();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configure <code>ServerLocator</code> in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.artemis.url=tcp://localhost:61616</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can configure ActiveMQ Artemis in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>artemis.url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Connection URL</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>artemis.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Username for authentication.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>artemis.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Password for authentication.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Artemis JMS</strong></p>
</div>
<div class="paragraph">
<p>If you want to use JMS with Artemis, you can do it by using its extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-artemis-jms"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then you can inject <code>javax.jms.ConnectionFactory</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class ArtemisConsumerManager {

    @Inject
    ConnectionFactory connectionFactory;

    private Connection connection;

    @PostConstruct
    public void init() throws JMSException {
        connection = connectionFactory.createConnection();
        connection.start();
    }
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Configuration options are the same as Artemis core.
</td>
</tr>
</table>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_rbac"><a class="anchor" href="#_rbac"></a><a class="link" href="#_rbac">RBAC</a></h3>
<div class="paragraph">
<p>You can set RBAC using annotations or in <code>application.properties</code>.</p>
</div>
<div class="paragraph">
<p><strong>Annotations</strong></p>
</div>
<div class="paragraph">
<p>You can define roles by using <code>javax.annotation.security.RolesAllowed</code> annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use <code>io.quarkus.security.Authenticated</code> as a shortcut of <code>@RolesAllowed("*")</code>.</p>
</div>
<div class="paragraph">
<p>To alter RBAC behaviour there are two configuration properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.deny-unannotated=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.jaxrs.deny-uncovered</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true denies by default to all JAX-RS endpoints.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.security.deny-unannotated</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If true denies by default all CDI methods and JAX-RS endpoints.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>File Configuration</strong></p>
</div>
<div class="paragraph">
<p>Defining RBAC in <code>application.properties</code> instead of using annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.auth.policy.role-policy1.roles-allowed=
    user,admin
quarkus.http.auth.permission.roles1.paths=
    /roles-secured/*,/other/*,/api/*
quarkus.http.auth.permission.roles1.policy=
    role-policy1

quarkus.http.auth.permission.permit1.paths=
    /public/*
quarkus.http.auth.permission.permit1.policy=
    permit
quarkus.http.auth.permission.permit1.methods=
    GET

quarkus.http.auth.permission.deny1.paths=
    /forbidden
quarkus.http.auth.permission.deny1.policy=
    deny</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
<div class="paragraph">
<p>You need to provide permissions set by using the <code>roles-allowed</code> property or use the built-in ones <code>deny</code>, <code>permit</code> or <code>authenticated</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_jwt"><a class="anchor" href="#_jwt"></a><a class="link" href="#_jwt">JWT</a></h3>
<div class="paragraph">
<p>Quarkus implements <a href="https://github.com/eclipse/microprofile-jwt-auth" target="_blank" rel="noopener">MicroProfile JWT RBAC spec</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="io.quarkus:quarkus-smallrye-jwt"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Minimum JWT required claims: <code>typ</code>, <code>alg</code>, <code>kid</code>, <code>iss</code>, <code>sub</code>, <code>exp</code>, <code>iat</code>, <code>jti</code>, <code>upn</code>, <code>groups</code>.</p>
</div>
<div class="paragraph">
<p>You can inject token by using <code>JsonWebToken</code> or a claim individually by using <code>@Claim</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
JsonWebToken jwt;

@Inject
@Claim(standard = Claims.preferred_username)
String name;

@Inject
@Claim("groups")
Set&lt;String&gt; groups;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Set of supported types: <code>String</code>, <code>Set&lt;String&gt;</code>, <code>Long</code>, <code>Boolean, `javax.json.JsonValue</code>, <code>Optional</code>, <code>org.eclipse.microprofile.jwt.ClaimValue</code>.</p>
</div>
<div class="paragraph">
<p>And configuration in <code>src/main/resources/application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">mp.jwt.verify.publickey.location=
    META-INF/resources/publicKey.pem
mp.jwt.verify.issuer=
    https://quarkus.io/using-jwt-rbac</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>mp.jwt.verify.publickey</code></dt>
<dd>
<p>Public Key text itself to be supplied as a string.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>mp.jwt.verify.publickey.location</code>
Relative path or URL of a public key.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>mp.jwt.verify.issuer</code></dt>
<dd>
<p><code>iss</code> accepted as valid.</p>
</dd>
</dl>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>smallrye.jwt.token.header</code></dt>
<dd>
<p>Sets header such as <code>Cookie</code> is used to pass the token. (default: <code>Authorization</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.cookie</code></dt>
<dd>
<p>Name of the cookie containing a token.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.token.schemes</code></dt>
<dd>
<p>Comma-separated list containing an alternative single or multiple schemes. (default: <code>Bearer</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.require.named-principal</code></dt>
<dd>
<p>A token must have a upn or preferred_username or sub claim set if using <code>java.security.Principal</code>. <code>True</code> makes throw an exception if not set. (default: <code>false</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.sub</code></dt>
<dd>
<p>Path to the claim with subject name.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.claims.sub</code></dt>
<dd>
<p>Default sub claim value.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.groups</code></dt>
<dd>
<p>Path to the claim containing the groups.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.path.groups-separator</code></dt>
<dd>
<p>Separator for splitting a string which may contain multiple group values. (default. ` `).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.claims.groups</code></dt>
<dd>
<p>Default groups claim value.</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.jwk.refresh-interval</code></dt>
<dd>
<p>JWK cache refresh interval in minutes. (default: <code>60</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.expiration.grace</code></dt>
<dd>
<p>Expiration grace in seconds. (default: <code>60</code>).</p>
</dd>
<dt class="hdlist1"><code>smallrye.jwt.verify.audience</code></dt>
<dd>
<p>Comma separated list of the audiences that a token aud claim may contain.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Supported public key formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>PKCS#8 PEM</p>
</li>
<li>
<p>JWK</p>
</li>
<li>
<p>JWKS</p>
</li>
<li>
<p>JWK Base64 URL</p>
</li>
<li>
<p>JWKS Base64 URL</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To send a token to server-side you should use <code>Authorization</code> header: <code>curl -H "Authorization: Bearer eyJraWQiOi&#8230;&#8203;"</code>.</p>
</div>
<div class="paragraph">
<p>To inject claim values, the bean must be <code>@RequestScoped</code> CDI scoped.
If you need to inject claim values in scope with a lifetime greater than <code>@RequestScoped</code> then you need to use <code>javax.enterprise.inject.Instance</code> interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Claim(standard = Claims.iat)
private Instance&lt;Long&gt; providerIAT;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>RBAC</strong></p>
</div>
<div class="paragraph">
<p>JWT <code>groups</code> claim is directly mapped to roles to be used in security annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Generate tokens</strong></p>
</div>
<div class="paragraph">
<p>JWT generation API:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Jwt.claims()
    .issuer("https://server.com")
    .claim("customClaim", 3)
    .sign(createKey());

JwtSignatureBuilder jwtSignatureBuilder = Jwt.claims("/testJsonToken.json").jws();
jwtSignatureBuilder
     .signatureKeyId("some-key-id")
     .signatureAlgorithm(SignatureAlgorithm.ES256)
     .header("custom-header", "custom-value");
     .sign(createKey());

Jwt.claims("/testJsonToken.json")
    .encrypt(createKey());

JwtEncryptionBuilder jwtEncryptionBuilder = Jwt.claims("/testJsonToken.json").jwe();
jwtEncryptionBuilder
     .keyEncryptionKeyId("some-key-id")
      .keyEncryptionAlgorithm(KeyEncryptionAlgorithm.ECDH_ES_A256KW)
     .header("custom-header", "custom-value");
     .encrypt(createKey());

Jwt.claims("/testJsonToken.json")
  .innerSign(createKey());
  .encrypt(createKey());</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openid_connect"><a class="anchor" href="#_openid_connect"></a><a class="link" href="#_openid_connect">OpenId Connect</a></h3>
<div class="paragraph">
<p>Quarkus can use OpenId Connect or OAuth 2.0 authorization servers such as  <a href="https://www.keycloak.org/" target="_blank" rel="noopener">Keycloak</a> to protect resources using bearer token issued by Keycloak server.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="using-openid-connect"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also protect resources with security annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
@RolesAllowed("admin")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure application to Keycloak service in <code>application.properties</code> file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oidc.realm=quarkus
quarkus.oidc.auth-server-url=http://localhost:8180/auth
quarkus.oidc.resource=backend-service
quarkus.oidc.bearer-only=true
quarkus.oidc.credentials.secret=secret</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options with <code>quarkus.oidc</code> prefix:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>auth-server-url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The base URL of the OpenID Connect (OIDC) server</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>introspection-path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Relative path of the RFC7662 introspection service</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>jwks-path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Relative path of the OIDC service returning a JWK set</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>public-key</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Public key for the local JWT token verification</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The client-id of the application.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>credentials.secret</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The client secret</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
With Keycloak OIDC server <code><a href="https://host:port/auth/realms/{realm}" class="bare">https://host:port/auth/realms/{realm}</a></code> where <code>{realm}</code> has to be replaced by the name of the Keycloak realm.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can use <code>quarkus.http.cors</code> property to enable consuming form different domain.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_oauth2"><a class="anchor" href="#_oauth2"></a><a class="link" href="#_oauth2">OAuth2</a></h3>
<div class="paragraph">
<p>Quarkus integrates with OAuth2 to be used in case of opaque tokens (none JWT) and its validation against an introspection endpoint.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="security-oauth2"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configuration in <code>src/main/resources/application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.oauth2.client-id=client_id
quarkus.oauth2.client-secret=secret
quarkus.oauth2.introspection-url=http://oauth-server/introspect</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can map roles to be used in security annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RolesAllowed("Subscriber")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configuration options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Determine if the OAuth2 extension is enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.client-id</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OAuth2 client id used to validate the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.client-secret</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The OAuth2 client secret used to validate the token.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.introspection-url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL used to validate the token and gather the authentication claims.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.oauth2.role-claim</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>scope</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The claim that is used in the endpoint response to load the roles</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_authenticating_via_http"><a class="anchor" href="#_authenticating_via_http"></a><a class="link" href="#_authenticating_via_http">Authenticating via HTTP</a></h3>
<div class="paragraph">
<p>HTTP basic auth is enabled by the <code>quarkus.http.auth.basic=true</code> property.</p>
</div>
<div class="paragraph">
<p>HTTP form auth is enabled by the <code>quarkus.http.auth.form.enabled=true</code> property.</p>
</div>
<div class="paragraph">
<p>Then you need to add <code>elytron-security-properties-file</code> or <code>elytron-security-jdbc</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_security_with_properties_file"><a class="anchor" href="#_security_with_properties_file"></a><a class="link" href="#_security_with_properties_file">Security with Properties File</a></h3>
<div class="paragraph">
<p>You can also protect endpoints and store identities (user, roles) in the file system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-properties-file"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to configure the extension with users and roles files:</p>
</div>
<div class="paragraph">
<p>And configuration in <code>src/main/resources/application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.users.file.enabled=true
quarkus.security.users.file.users=test-users.properties
quarkus.security.users.file.roles=test-roles.properties
quarkus.security.users.file.auth-mechanism=BASIC
quarkus.security.users.file.realm-name=MyRealm
quarkus.security.users.file.plain-text=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then <code>users.properties</code> and <code>roles.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">scott=jb0ss
jdoe=p4ssw0rd</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">scott=Admin,admin,Tester,user
jdoe=NoRolesUser</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>IMPORTANT:</strong>  If <code>plain-text</code> is set to <code>false</code> (or omitted) then passwords must be stored in the form MD5 (<code>username</code>:`realm`:`password`).</p>
</div>
<div class="paragraph">
<p>Elytron File Properties configuration properties.
Prefix <code>quarkus.security.users</code> is skipped.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The file realm is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.auth-mechanism</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASIC</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.realm-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Quarkus</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.plain-text</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If passwords are in plain or in MD5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.users</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>users.properties</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classpath resource of user/password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.roles</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>roles.properties</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Classpath resource of user/role</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Embedded Realm</strong></p>
</div>
<div class="paragraph">
<p>You can embed user/password/role in the same <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.security.users.embedded.enabled=true
quarkus.security.users.embedded.plain-text=true
quarkus.security.users.embedded.users.scott=jb0ss
quarkus.security.users.embedded.roles.scott=admin,tester,user
quarkus.security.users.embedded.auth-mechanism=BASIC</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>IMPORTANT:</strong>  If plain-text is set to <code>false</code> (or omitted) then passwords must be stored in the form MD5 (<code>username</code>:`realm`:`password`).</p>
</div>
<div class="paragraph">
<p>Prefix <code>quarkus.security.users.embedded</code> is skipped.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The file realm is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.auth-mechanism</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASIC</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.realm-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Quarkus</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.plain-text</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If passwords are in plain or in MD5</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.users.*</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>*</code> is user and value is password</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>file.roles.*</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>*</code> is user and value is role</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_security_with_a_jdbc_realm"><a class="anchor" href="#_security_with_a_jdbc_realm"></a><a class="link" href="#_security_with_a_jdbc_realm">Security with a JDBC Realm</a></h3>
<div class="paragraph">
<p>You can also protect endpoints and store identities in a database.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="elytron-security-jdbc"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You still need to add the database driver (ie <code>jdbc-h2</code>).</p>
</div>
<div class="paragraph">
<p>You need to configure JDBC and Elytron JDBC Realm:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
quarkus.datasource.driver=org.h2.Driver
quarkus.datasource.username=sa
quarkus.datasource.password=sa

quarkus.security.jdbc.enabled=true
quarkus.security.jdbc.principal-query.sql=
    SELECT u.password, u.role FROM test_user u WHERE u.user=?
quarkus.security.jdbc.principal-query
    .clear-password-mapper.enabled=true
quarkus.security.jdbc.principal-query
    .clear-password-mapper.password-index=1
quarkus.security.jdbc.principal-query
    .attribute-mappings.0.index=2
quarkus.security.jdbc.principal-query
    .attribute-mappings.0.to=groups</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to set the index (1-based) of password and role.</p>
</div>
<div class="paragraph">
<p>Elytron JDBC Realm configuration properties.
Prefix <code>quarkus.security.jdbc</code> is skipped.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>auth-mechanism</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASIC</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication mechanism</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>realm-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>Quarkus</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The authentication realm name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the properties store is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.sql</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The sql query to find the password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.datasource</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The data source to use</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.clear-password-mapper.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the clear-password-mapper is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.clear-password-mapper.password-index</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index of column containing clear password</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the bcrypt-password-mapper is enabled</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.password-index</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index of column containing password hash</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.hash-encoding</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASE64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string referencing the password hash encoding (<code>BASE64</code> or <code>HEX</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.salt-index</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index column containing the Bcrypt salt</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.salt-encoding</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>BASE64</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A string referencing the salt encoding (<code>BASE64</code> or <code>HEX</code>)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>principal-query.bcrypt-password-mapper.iteration-count-index</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>0</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The index column containing the Bcrypt iteration count</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For multiple datasources you can use the datasource name in the properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.datasource.url=
quarkus.security.jdbc.principal-query.sql=

quarkus.datasource.permissions.url=
quarkus.security.jdbc.principal-query.permissions.sql=</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vault"><a class="anchor" href="#_vault"></a><a class="link" href="#_vault">Vault</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://www.vaultproject.io/">Vault</a> to manage secrets or protecting sensitive data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn quarkus:add-extension
    -Dextensions="vault"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And configuring Vault in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># vault url
quarkus.vault.url=http://localhost:8200

quarkus.vault.authentication.userpass.username=
    bob
quarkus.vault.authentication.userpass.password=
    sinclair

# path within the kv secret engine
quarkus.vault.secret-config-kv-path=
    myapps/vault-quickstart/config
quarkus.vault.secret-config-kv-path.singer=
    multi/singer</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>vault kv put secret/myapps/vault-quickstart/config a-private-key=123456</code></p>
</div>
<div class="paragraph">
<p><code>vault kv put secret/multi/singer firstname=paul</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigProperty(name = "a-private-key")
String privateKey;

@ConfigProperty(name = "singer.firstname")
String firstName;</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can access the KV engine programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultKVSecretEngine kvSecretEngine;

kvSecretEngine.readSecret("myapps/vault-quickstart/" + vaultPath).toString();</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Fetching credentials DB</strong></p>
</div>
<div class="paragraph">
<p>With the next <em>kv</em> <code>vault kv put secret/myapps/vault-quickstart/db password=connor</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.vault.credentials-provider.mydatabase.kv-path=
    myapps/vault-quickstart/db
quarkus.datasource.credentials-provider=
    mydatabase

quarkus.datasource.url=
    jdbc:postgresql://localhost:5432/mydatabase
quarkus.datasource.driver=
    org.postgresql.Driver
quarkus.datasource.username=
    sarah</code></pre>
</div>
</div>
<div class="paragraph">
<p>No password is set as it is fetched from Vault.</p>
</div>
<div class="paragraph">
<p>INFO: <a href="https://www.vaultproject.io/docs/secrets/databases/index.html">dynamic database credentials</a> through the <code>database-credentials-role</code> property.</p>
</div>
<div class="paragraph">
<p><strong>Transit</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
VaultTransitSecretEngine transit;

transit.encrypt("my_encryption", text);
transit.decrypt("my_encryption", text).asString();
transit.sign("my-sign-key", text);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Elytron JDBC Realm configuration properties.
Prefix <code>quarkus.vault</code> is skipped.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>url</code></dt>
<dd>
<p>Vault server URL</p>
</dd>
<dt class="hdlist1"><code>authentication.client-token</code></dt>
<dd>
<p>Vault token to access</p>
</dd>
<dt class="hdlist1"><code>authentication.app-role.role-id</code></dt>
<dd>
<p>Role Id for AppRole auth</p>
</dd>
<dt class="hdlist1"><code>authentication.app-role.secret-id</code></dt>
<dd>
<p>Secret Id for AppRole auth</p>
</dd>
<dt class="hdlist1"><code>authentication.userpass.username</code></dt>
<dd>
<p>Username for userpass auth</p>
</dd>
<dt class="hdlist1"><code>authentication.userpass.password</code></dt>
<dd>
<p>Password for userpass auth</p>
</dd>
<dt class="hdlist1"><code>authentication.kubernetes.role</code></dt>
<dd>
<p>Kubernetes authentication role</p>
</dd>
<dt class="hdlist1"><code>authentication.kubernetes.jwt-token-path</code></dt>
<dd>
<p>Location of the file containing the Kubernetes JWT token</p>
</dd>
<dt class="hdlist1"><code>renew-grace-period</code></dt>
<dd>
<p>Renew grace period duration (default: <code>1H</code>)</p>
</dd>
<dt class="hdlist1"><code>secret-config-cache-period</code></dt>
<dd>
<p>Vault config source cache period (default: <code>10M</code>)</p>
</dd>
<dt class="hdlist1"><code>secret-config-kv-path</code></dt>
<dd>
<p>Vault path in kv store. List of paths is supported in CSV</p>
</dd>
<dt class="hdlist1"><code>log-confidentiality-level</code></dt>
<dd>
<p>Used to hide confidential infos. <code>low</code>, <code>medium</code>, <code>high</code> (default: <code>medium</code>)</p>
</dd>
<dt class="hdlist1"><code>kv-secret-engine-version</code></dt>
<dd>
<p>Kv secret engine version (default: 1)</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p><code>kv-secret-engine-mount-path</code>
Kv secret engine path (default: <code>secret</code>)</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>tls.skip-verify</code></dt>
<dd>
<p>Allows to bypass certificate validation on TLS communications (default: <code>false</code>)</p>
</dd>
<dt class="hdlist1"><code>tls.ca-cert</code></dt>
<dd>
<p>Certificate bundle used to validate TLS communications</p>
</dd>
<dt class="hdlist1"><code>tls.use-kubernetes-ca-cert</code></dt>
<dd>
<p>TLS will be active (default: <code>true</code>)</p>
</dd>
<dt class="hdlist1"><code>connect-timeout</code></dt>
<dd>
<p>Tiemout to establish a connection (default: <code>5S</code>)</p>
</dd>
<dt class="hdlist1"><code>read-timeout</code></dt>
<dd>
<p>Request timeout (default: <code>1S</code>)</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".database-credentials-role</code></dt>
<dd>
<p>Database credentials role</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".kv-path</code></dt>
<dd>
<p>A path in vault kv store, where we will find the kv-key</p>
</dd>
<dt class="hdlist1"><code>credentials-provider."credentials-provider".kv-key</code></dt>
<dd>
<p>Key name to search in vault path kv-path (default: <code>password</code>)</p>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_jax_rs"><a class="anchor" href="#_jax_rs"></a><a class="link" href="#_jax_rs">JAX-RS</a></h3>
<div class="paragraph">
<p>Quarkus uses JAX-RS to define <a href="https://github.com/jax-rs" target="_blank" rel="noopener">REST-ful web APIs</a>.
Under the covers, Rest-EASY is working with Vert.X directly without using any Servlet.</p>
</div>
<div class="paragraph">
<p>It is <strong>important</strong> to know that if you want to use any feature that implies a <code>Servlet</code> (ie Servlet Filters) then you need to add the <code>quarkus-undertow</code> extension to switch back to the <code>Servlet</code> ecosystem but generally speaking, you don&#8217;t need to add it as everything else is well-supported.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/book")
public class BookResource {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public List&lt;Book&gt; getAllBooks() {}

    @POST
    @Produces(MediaType.APPLICATION_JSON)
    public Response createBook(Book book) {}

    @DELETE
    @Path("{isbn}")
    @Produces(MediaType.APPLICATION_JSON)
    public Response deleteBook(
        @PathParam("isbn") String isbn) {}


    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("search")
    public Response searchBook(
        @QueryParam("description") String description) {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To get information from request:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@PathParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets content from request URI.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>/book/{id} @PathParam("id")</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@QueryParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets query parameter.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>/book?desc="" @QueryParam("desc)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@FormParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets form parameter.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@MatrixParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Get URI matrix parameter.</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>/book;author=mkyong;country=malaysia</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@CookieParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets cookie param by name.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@HeaderParam</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Gets header parameter by name.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Valid HTTP method annotations provided by the spec are: <code>@GET</code>, <code>@POST</code>, <code>@PUT</code>, <code>@DELETE</code>, <code>@PATCH</code>, <code>@HEAD</code> and <code>@OPTIONS</code>.</p>
</div>
<div class="paragraph">
<p>You can create new annotations that bind to HTTP methods not defined by the spec.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Target({ElementType.METHOD})
@Retention(RetentionPolicy.RUNTIME)
@HttpMethod("LOCK")
public @interface LOCK {
}

@LOCK
public void lockIt() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Injecting</strong></p>
</div>
<div class="paragraph">
<p>Using <code>@Context</code> annotation to inject JAX-RS and Servlet information.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
public String getBase(@Context UriInfo uriInfo) {
    return uriInfo.getBaseUri();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Possible injectable objects: <code>SecurityContext</code>, <code>Request</code>, <code>Application</code>, <code>Configuration</code>, <code>Providers</code>, <code>ResourceContext</code>, <code>ServletConfig</code>, <code>ServletContext</code>, <code>HttpServletRequest</code>, <code>HttpServletResponse</code>, <code>HttpHeaders</code>, <code>Urinfo</code>, <code>SseEventSink</code> and <code>Sse</code>.</p>
</div>
<div class="paragraph">
<p><strong>HTTP Filters</strong></p>
</div>
<div class="paragraph">
<p>HTTP request and response can be intercepted to manipulate the metadata (ie headers, parameters, media type, &#8230;&#8203;) or abort a request.
You only need to implement the next <code>ContainerRequestFilter</code> and <code>ContainerResponseFilter</code> JAX-RS interfaces respectively.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Provider
public class LoggingFilter
        implements ContainerRequestFilter {

    @Context
    UriInfo info;

    @Context
    HttpServletRequest request;

    @Override
    public void filter(ContainerRequestContext context) {
        final String method = context.getMethod();
        final String path = info.getPath();
        final String address = request.getRemoteAddr();
        System.out.println("Request %s %s from IP %s",
                method, path, address);
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Exception Mapper</strong></p>
</div>
<div class="paragraph">
<p>You can map exceptions to produce a custom output by implementing <code>ExceptionMapper</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Provider
public class ErrorMapper
    implements ExceptionMapper&lt;Exception&gt; {

    @Override
    public Response toResponse(Exception exception) {
        int code = 500;
        if (exception instanceof WebApplicationException) {
            code = ((WebApplicationException) exception)
                .getResponse().getStatus();
        }
        return Response.status(code)
            .entity(
                Json.createObjectBuilder()
                .add("error", exception.getMessage())
                .add("code", code)
                .build()
            )
            .build();
        }
    }</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Caching</strong></p>
</div>
<div class="paragraph">
<p>Annotations to set Cache-Control headers:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces(MediaType.APPLICATION_JSON)
@org.jboss.resteasy.annotations.cache.NoCache
public User me() {}

@Produces(MediaType.APPLICATION_JSON)
@org.jboss.resteasy.annotations.cache.Cache(
    maxAge = 2000,
    noStore = false
)
public User you() {}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_vert_x_filters_and_routes"><a class="anchor" href="#_vert_x_filters_and_routes"></a><a class="link" href="#_vert_x_filters_and_routes">Vert.X Filters and Routes</a></h3>
<div class="paragraph">
<p><strong>Programmatically</strong></p>
</div>
<div class="paragraph">
<p>You can also register Vert.X Filters and Router programmatically inside a CDI bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import io.quarkus.vertx.http.runtime.filters.Filters;
import io.vertx.ext.web.Router;
import javax.enterprise.context.ApplicationScoped;
import javax.enterprise.event.Observes;

@ApplicationScoped
public class MyBean {

    public void filters(
            @Observes Filters filters) {
        filters
            .register(
                rc -&gt; {
                    rc.response()
                        .putHeader("X-Filter", "filter 1");
                    rc.next();
                },
                10);
    }

    public void routes(
            @Observes Router router) {
        router
            .get("/")
            .handler(rc -&gt; rc.response().end("OK"));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Declarative</strong></p>
</div>
<div class="paragraph">
<p>You can use <code>@Route</code> annotation to use reactive routes and <code>@RouteFilter</code> to sue reactive filters in a declarative way:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-vertx-web"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class MyDeclarativeRoutes {

    @Route(path = "/hello", methods = HttpMethod.GET)
    public void greetings(RoutingContext rc) {
        String name = rc.request().getParam("name");
        if (name == null) {
            name = "world";
        }
        rc.response().end("hello " + name);
    }

     @RouteFilter(20)
    void filter(RoutingContext rc) {
         rc.response().putHeader("X-Filter", "filter 2");
         rc.next();
    }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_gzip_support"><a class="anchor" href="#_gzip_support"></a><a class="link" href="#_gzip_support">GZip Support</a></h3>
<div class="paragraph">
<p>You can configure Quarkus to use GZip in the <code>application.properties</code> file using the next properties with <code>quarkus.resteasy</code> suffix:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gzip.enabled</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>EnableGZip.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>gzip.max-input</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>10M</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Configure the upper limit on deflated request body.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_cors_filter"><a class="anchor" href="#_cors_filter"></a><a class="link" href="#_cors_filter">CORS Filter</a></h3>
<div class="paragraph">
<p>Quarkus comes with a CORS filter that can be enabled via configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.http.cors=true</code></pre>
</div>
</div>
<div class="paragraph">
<p>Prefix is <code>quarkus.http</code>.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enable CORS.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors.origins</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Any request valid.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of origins allowed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors.methods</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any method valid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of methods valid.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors.headers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Any requested header valid.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of valid allowed headers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>cors.exposed-headers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CSV of valid exposed headers.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_fault_tolerance"><a class="anchor" href="#_fault_tolerance"></a><a class="link" href="#_fault_tolerance">Fault Tolerance</a></h3>
<div class="paragraph">
<p>Quarkus uses <a href="https://github.com/eclipse/microprofile-fault-tolerance" target="_blank" rel="noopener">MicroProfile Fault Tolerance</a> spec:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-fault-tolerance"</code></pre>
</div>
</div>
<div class="paragraph">
<p>MicroProfile Fault Tolerance spec uses CDI interceptor and it can be used in several elements such as CDI bean, JAX-RS resource or MicroProfile Rest Client.</p>
</div>
<div class="paragraph">
<p>To do automatic <strong>retries</strong> on a method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Path("/api")
@RegisterRestClient
public interface WorldClockService {
    @GET @Path("/json/cet/now")
    @Produces(MediaType.APPLICATION_JSON)
    @Retry(maxRetries = 2)
    WorldClock getNow();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can set fallback code in case of an error by using <code>@Fallback</code> annotation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Retry(maxRetries = 1)
@Fallback(fallbackMethod = "fallbackMethod")
WorldClock getNow(){}

public WorldClock fallbackMethod() {
    return new WorldClock();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>fallbackMethod</code> must have the same parameters and return type as the annotated method.</p>
</div>
<div class="paragraph">
<p>You can also set logic into a class that implements <code>FallbackHandler</code> interface:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class RecoverFallback
            implements FallbackHandler&lt;WorldClock&gt; {
    @Override
    public WorldClock handle(ExecutionContext context) {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And set it in the annotation as value <code>@Fallback(RecoverFallback.class)</code>.</p>
</div>
<div class="paragraph">
<p>In case you want to use <strong>circuit breaker</strong> pattern:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@CircuitBreaker(requestVolumeThreshold = 4,
                failureRatio=0.75,
                delay = 1000)
WorldClock getNow(){}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If 3 <code>(4 x 0.75)</code> failures occur among the rolling window of 4 consecutive invocations then the circuit is opened for 1000 ms and then be back to half open.
If the invocation succeeds then the circuit is back to closed again.</p>
</div>
<div class="paragraph">
<p>You can use <strong>bulkahead</strong> pattern to limit the number of concurrent access to the same resource.
If the operation is synchronous it uses a semaphore approach, if it is asynchronous a thread-pool one.
When a request cannot be processed <code>BulkheadException</code> is thrown.
It can be used together with any other fault tolerance annotation.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Bulkhead(5)
@Retry(maxRetries = 4,
       delay = 1000,
       retryOn = BulkheadException.class)
WorldClock getNow(){}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Fault tolerance annotations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Properties</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>unit</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Retry</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>maxRetries</code>, <code>delay</code>, <code>delayUnit</code>, <code>maxDuration</code>, <code>durationUnit</code>, <code>jitter</code>, <code>jitterDelayUnit</code>, <code>retryOn</code>, <code>abortOn</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Fallback</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>fallbackMethod</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Bulkhead</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>waitingTaskQueue</code> (only valid in asynchronous)</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@CircuitBreaker</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>failOn</code>, <code>delay</code>, <code>delayUnit</code>, <code>requestVolumeThreshold</code>, <code>failureRatio</code>, <code>successThreshold</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Asynchronous</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can override annotation parameters via configuration file using property <code>[classname/methodname/]annotation/parameter</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClock/getNow/Retry/maxDuration=30
# Class scope
org.acme.quickstart.WorldClock/Retry/maxDuration=3000
# Global
Retry/maxDuration=3000</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also enable/disable policies using special parameter <code>enabled</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">org.acme.quickstart.WorldClock/getNow/Retry/enabled=false
# Disable everything except fallback
MP_Fault_Tolerance_NonFallback_Enabled=false</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
MicroProfile Fault Tolerance integrates with MicroProfile Metrics spec. You can disable it by setting <code>MP_Fault_Tolerance_Metrics_Enabled</code> to false.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Hibernate ORM</strong></p>
</div>
<div class="paragraph">
<p><code>quarkus.hibernate-orm.metrics.enabled</code> set to <code>true</code> exposes Hibernate metrics under <code>vendor</code> scope.</p>
</div>
</div>
<div class="sect2">
<h3 id="_observability"><a class="anchor" href="#_observability"></a><a class="link" href="#_observability">Observability</a></h3>
<div class="paragraph">
<p><strong>Health Checks</strong></p>
</div>
<div class="paragraph">
<p>Quarkus relies on <a href="https://github.com/eclipse/microprofile-health" target="_blank" rel="noopener">MicroProfile Health</a> spec to provide health checks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-health"</code></pre>
</div>
</div>
<div class="paragraph">
<p>By just adding this extension, an endpoint is registered to <code>/health</code> providing a default health check.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
    "status": "UP",
    "checks": [
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To create a custom health check you need to implement the <code>HealthCheck</code> interface and annotate either with <code>@Readiness</code> (ready to process requests) or <code>@Liveness</code> (is running) annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Readiness
public class DatabaseHealthCheck implements HealthCheck {
    @Override
    public HealthCheckResponse call() {
        HealthCheckResponseBuilder responseBuilder =
            HealthCheckResponse.named("Database conn");

        try {
            checkDatabaseConnection();
            responseBuilder.withData("connection", true);
            responseBuilder.up();
        } catch (IOException e) {
            // cannot access the database
            responseBuilder.down()
                    .withData("error", e.getMessage());
        }
        return responseBuilder.build();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Builds the next output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="json" class="language-json hljs">{
    "status": "UP",
    "checks": [
        {
            "name": "Database conn",
            "status": "UP",
            "data": {
                "connection": true
            }
        }
    ]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since health checks are CDI beans, you can do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class DatabaseHealthCheck {

    @Produces
    @Liveness
    HealthCheck check1() {
      return io.smallrye.health.HealthStatus
                                .up("successful-live");
    }

    @Produces
    @Readiness
    HealthCheck check2() {
      return HealthStatus
                .state("successful-read", this::isReady)
    }

    private boolean isReady() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can ping liveness or readiness health checks individually by querying <code>/health/live</code> or <code>/health/ready</code>.</p>
</div>
<div class="paragraph">
<p>Quarkus comes with some <code>HealthCheck</code> implementations for checking service status.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SocketHealthCheck</strong>: checks if host is reachable using a socket.</p>
</li>
<li>
<p><strong>UrlHealthCheck</strong>: checks if host is reachable using a Http URL connection.</p>
</li>
<li>
<p><strong>InetAddressHealthCheck</strong>: checks if host is reachable using <code>InetAddress.isReachable</code> method.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Produces
@Liveness
HealthCheck check1() {
    return new UrlHealthCheck("https://www.google.com")
            .name("Google-Check");
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to override or set manually readiness/liveness probes, you can do it by setting health properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.smallrye-health.root-path=/hello
quarkus.smallrye-health.liveness-path=/customlive
quarkus.smallrye-health.readiness-path=/customready</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Automatic readiness probes</strong></p>
</div>
<div class="paragraph">
<p>Some default <em>readiness probes</em> are provided by default if any of the next features are added:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">datasource</dt>
<dd>
<p>A probe to check database connection status.</p>
</dd>
<dt class="hdlist1">kafka</dt>
<dd>
<p>A probe to check kafka connection status. In this case you need to enable manually by setting <code>quarkus.kafka.health.enabled</code> to <code>true</code>.</p>
</dd>
<dt class="hdlist1">mongoDB</dt>
<dd>
<p>A probe to check MongoDB connection status.</p>
</dd>
<dt class="hdlist1">neo4j</dt>
<dd>
<p>A probe to check Neo4J connection status.</p>
</dd>
<dt class="hdlist1">artemis</dt>
<dd>
<p>A probe to check Artemis JMS connection status.</p>
</dd>
<dt class="hdlist1">kafka-streams</dt>
<dd>
<p>Liveness (for stream state) and Readiness (topics created) probes.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>You can disable the automatic generation by setting <code>&lt;component&gt;.health.enabled</code> to false.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.kafka-streams.health.enabled=false
quarkus.mongodb.health.enabled=false
quarkus.neo4j.health.enabled=false</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Metrics</strong></p>
</div>
<div class="paragraph">
<p>Quarkus can utilize the <a href="https://github.com/eclipse/microprofile-metrics" target="_blank" rel="noopener">MicroProfile Metrics spec</a> to provide metrics support.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-metrics"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The metrics can be read with JSON or the OpenMetrics format.
An endpoint is registered automatically at <code>/metrics</code> providing default metrics.</p>
</div>
<div class="paragraph">
<p>MicroProfile Metrics annotations:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Annotation</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Timed</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Tracks the duration.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Metered</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Tracks the frequency of invocations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Counted</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Counts number of invocations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Gauge</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Samples the value of the annotated object.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@ConcurrentGauge</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Gauge to count parallel invocations.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>@Metric</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Used to inject a metric. Valid types <code>Meter</code>, <code>Timer</code>, <code>Counter</code>, <code>Histogram</code>. <code>Gauge</code> only on producer methods/fields.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@GET
//...
@Timed(name = "checksTimer",
description = "A measure of how long it takes
                                to perform a hello.",
unit = MetricUnits.MILLISECONDS)
public String hello() {}

@Counted(name = "countWelcome",
description = "How many welcome have been performed.")
public String hello() {}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Gauge</code> annotation returning a measure as a gauge.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Gauge(name = "hottestSauce", unit = MetricUnits.NONE,
description = "Hottest Sauce so far.")
public Long hottestSauce() {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Injecting a histogram using <code>@Metric</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
@Metric(name = "histogram")
Histogram historgram;</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Tracing</strong></p>
</div>
<div class="paragraph">
<p>Quarkus can utilize the <a href="https://github.com/eclipse/microprofile-opentracing" target="_blank" rel="noopener">MicroProfile OpenTracing</a> spec.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-opentracing"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Requests sent to any endpoint are traced automatically.</p>
</div>
<div class="paragraph">
<p>This extension includes OpenTracing support and <code>Jaeger</code> tracer.</p>
</div>
<div class="paragraph">
<p>Jaeger tracer configuration:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.jaeger.service-name=myservice
quarkus.jaeger.sampler-type=const
quarkus.jaeger.sampler-param=1
quarkus.jaeger.endpoint=http://localhost:14268/api/traces</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@Traced</code> annotation can be set to disable tracing at class or method level.</p>
</div>
<div class="paragraph">
<p><code>Tracer</code> class can be injected into the class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Tracer tracer;

tracer.activeSpan().setBaggageItem("key", "value");</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can disable <code>Jaeger</code> extension by using <code>quarkus.jaeger.enabled</code> property.</p>
</div>
<div class="paragraph">
<p><strong>Additional tracers</strong></p>
</div>
<div class="paragraph">
<p><strong>JDBC Tracer</strong></p>
</div>
<div class="paragraph">
<p>Adds a span for each JDBC queries.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
    &lt;groupId&gt;io.opentracing.contrib&lt;/groupId&gt;
    &lt;artifactId&gt;opentracing-jdbc&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Configure JDBC driver apart from tracing properties seen before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs"># add ':tracing' to your database URL
quarkus.datasource.url=
    jdbc:tracing:postgresql://localhost:5432/mydatabase
quarkus.datasource.driver=
    io.opentracing.contrib.jdbc.TracingDriver
quarkus.hibernate-orm.dialect=
    org.hibernate.dialect.PostgreSQLDialect</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_cloud"><a class="anchor" href="#_cloud"></a><a class="link" href="#_cloud">Cloud</a></h3>
<div class="paragraph">
<p><strong>Native</strong></p>
</div>
<div class="paragraph">
<p>You can build a native image by using GraalVM.
The common use case is creating a Docker image so you can execute the next commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw package -Pnative -Dquarkus.native.container-build=true

docker build -f src/main/docker/Dockerfile.native
                    -t quarkus/getting-started .
docker run -i --rm -p 8080:8080 quarkus/getting-started</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can use <code>quarkus.native.container-runtime</code> to select the container runtime to use.
Now <code>docker</code> (default) and <code>podman</code> are the valid options.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw package -Pnative -Dquarkus.native.container-runtime=podman</code></pre>
</div>
</div>
<div class="paragraph">
<p>To configure native application, you can create a <code>config</code> directory at the same place as the native file and place an <code>application.properties</code> file inside. <code>config/application.properties</code>.</p>
</div>
<div class="paragraph">
<p><strong>Kubernetes</strong></p>
</div>
<div class="paragraph">
<p>Quarks can use <a href="https://github.com/dekorateio/dekorate">Dekorate</a> to generate Kubernetes resources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extensions
    -Dextensions="io.quarkus:quarkus-kubernetes"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Running <code>./mvnw package</code> the Kubernetes resources are created at <code>target/kubernetes/</code> directory.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>kubernetes.group</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Current username</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set Docker Username.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.application.name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Current project name</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Project name</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Generated resource is integrated with <a href="#_observability">MicroProfile Health annotations</a>.</p>
</div>
<div class="paragraph">
<p>Also, you can customize the generated resource by setting the new values in <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">kubernetes.replicas=3

kubernetes.labels[0].key=foo
kubernetes.labels[0].value=bar

kubernetes.readiness-probe.period-seconds=45

docker.registry=quay.io</code></pre>
</div>
</div>
<div class="paragraph">
<p>All possible values are explained at <a href="https://quarkus.io/guides/kubernetes#configuration-options" class="bare">https://quarkus.io/guides/kubernetes#configuration-options</a>.</p>
</div>
<div class="paragraph">
<p><strong>Kubernetes Deployment Targets</strong></p>
</div>
<div class="paragraph">
<p>You can generate different resources setting the property <code>kubernetes.deployment.target</code>.</p>
</div>
<div class="paragraph">
<p>Possible values are <code>kubernetes</code>, <code>openshift</code> and <code>knative</code>.
The default value is <code>kubernetes</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_kubernetes_client"><a class="anchor" href="#_kubernetes_client"></a><a class="link" href="#_kubernetes_client">Kubernetes Client</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://github.com/fabric8io/kubernetes-client" target="_blank" rel="noopener">Fabric8 Kubernetes Client</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="terminal" class="language-terminal hljs">./mvnw quarkus:add-extension
    -Dextensions="quarkus-kubernetes-client"</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of Kubernetes client parameters.</p>
</div>
<div class="paragraph">
<p><code>quarkus.kubernetes-client</code> as prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>trust-certs</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust self-signed certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>master-url</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL of Kubernetes API server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>namesapce</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default namespace.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>ca-cert-file</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">CA certificate data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-cert-file</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-cert-data</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client certificate data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-data</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-algorithm</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key algorithm.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>client-key-passphrase</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Client key passphrase.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>watch-reconnect-interval</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT1S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Watch reconnect interval.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>watch-reconnect-limit</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>-1</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum reconnect attempts.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>connection-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a connection.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>request-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT10S</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a request.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>rolling-timeout</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>PT15M</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Maximum amount of time to wait for a rollout.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>http-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTP proxy used to access the Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>https-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>``</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">HTTPS proxy used to access the Kubernetes.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy-username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>proxy-password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxy password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>no-proxy</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">IP addresses or hosts to exclude from proxying</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Or programmatically:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Dependent
public class KubernetesClientProducer {

    @Produces
    public KubernetesClient kubernetesClient() {
        Config config = new ConfigBuilder()
            .withMasterUrl("https://mymaster.com")
            .build();
        return new DefaultKubernetesClient(config);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And inject it on code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
KubernetesClient client;

ServiceList myServices = client.services().list();

Service myservice = client.services()
        .inNamespace("default")
        .withName("myservice")
        .get();

CustomResourceDefinitionList crds = client
        .customResourceDefinitions()
        .list();

dummyCRD = new CustomResourceDefinitionBuilder()
        ...
        .build()
client.customResourceDefinitions()
        .create(dummyCRD);</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Testing</strong></p>
</div>
<div class="paragraph">
<p>Quarkus provides a Kubernetes Mock test resource that starts a mock of Kubernetes API server and sets the proper environment variables needed by Kubernetes Client.</p>
</div>
<div class="paragraph">
<p>Register next dependency: <code>io.quarkus:quarkus-test-kubernetes-client:test</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@QuarkusTestResource(KubernetesMockServerTestResource.class)
@QuarkusTest
public class KubernetesClientTest {

    @MockServer
    private KubernetesMockServer mockServer;

    @Test
    public void test() {
        final Pod pod1 = ...
        mockServer
            .expect()
            .get()
            .withPath("/api/v1/namespaces/test/pods")
            .andReturn(200,
                new PodListBuilder()
                .withNewMetadata()
                .withResourceVersion("1")
                .endMetadata()
                .withItems(pod1, pod2)
                .build())
            .always();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_amazon_lambda"><a class="anchor" href="#_amazon_lambda"></a><a class="link" href="#_amazon_lambda">Amazon Lambda</a></h3>
<div class="paragraph">
<p>Quarkus integrates with Amazon Lambda.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-amazon-lambda"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then implement <code>com.amazonaws.services.lambda.runtime.RequestHandler</code> interface.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class TestLambda
        implements RequestHandler&lt;MyInput, MyOutput&gt; {
    @Override
    public MyInput handleRequest(MyOutput input,
                                    Context context) {
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can set the handler name by using <code>quarkus.lambda.handler</code> property or by annotating the Lambda with the CDI <code>@Named</code> annotation.</p>
</div>
<div class="paragraph">
<p><strong>Test</strong></p>
</div>
<div class="paragraph">
<p>You can write tests for Amazon lambdas:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;
  &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
  &lt;artifactId&gt;quarkus-test-amazon-lambda&lt;/artifactId&gt;
  &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Test
public void testLambda() {
    MyInput in = new MyInput();
    in.setGreeting("Hello");
    in.setName("Stu");
    MyOutput out = LambdaClient.invoke(MyOutput.class, in);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To scaffold a AWS Lambda run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn archetype:generate \
    -DarchetypeGroupId=io.quarkus \
    -DarchetypeArtifactId=quarkus-amazon-lambda-archetype \
    -DarchetypeVersion={version}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_azure_functions"><a class="anchor" href="#_azure_functions"></a><a class="link" href="#_azure_functions">Azure Functions</a></h3>
<div class="paragraph">
<p>Quarkus can make a microservice be deployable to the Azure Functions.</p>
</div>
<div class="paragraph">
<p>To scaffold a deployable microservice to the Azure Functions run:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">mvn archetype:generate \
  -DarchetypeGroupId=io.quarkus \
  -DarchetypeArtifactId=quarkus-azure-functions-http-archetype \
  -DarchetypeVersion={version}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_apache_camel"><a class="anchor" href="#_apache_camel"></a><a class="link" href="#_apache_camel">Apache Camel</a></h3>
<div class="paragraph">
<p>Apache Camel Quarkus has its own site: <a href="https://github.com/apache/camel-quarkus" class="bare">https://github.com/apache/camel-quarkus</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_websockets"><a class="anchor" href="#_websockets"></a><a class="link" href="#_websockets">WebSockets</a></h3>
<div class="paragraph">
<p>Quarkus can be used to handling web sockets.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-undertow-websockets"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And web sockets classes can be used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ServerEndpoint("/chat/{username}")
@ApplicationScoped
public class ChatSocket {

    @OnOpen
    public void onOpen(Session session,
                @PathParam("username") String username) {}

    @OnClose
    public void onClose(..) {}

    @OnError
    public void onError(..., Throwable throwable) {}

    @OnMessage
    public void onMessage(...) {}

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_openapi"><a class="anchor" href="#_openapi"></a><a class="link" href="#_openapi">OpenAPI</a></h3>
<div class="paragraph">
<p>Quarkus can expose its API description as <a href="https://swagger.io/specification/" target="_blank" rel="noopener">OpenAPI</a> spec and test it using <a href="https://swagger.io/tools/swagger-ui/" target="_blank" rel="noopener">Swagger UI</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-smallrye-openapi"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you only need to access to <code>/openapi</code> to get OpenAPI v3 spec of services.</p>
</div>
<div class="paragraph">
<p>You can update the OpenApi path by setting <code>quarkus.smallrye-openapi.path</code> property.</p>
</div>
<div class="paragraph">
<p>Also, in case of starting Quarkus application in <code>dev</code> or <code>test</code> mode, Swagger UI is accessible at <code>/swagger-ui</code>.
If you want to use it in production mode you need to set <code>quarkus.swagger-ui.always-include</code> property to <code>true</code>.</p>
</div>
<div class="paragraph">
<p>You can update the Swagger UI path by setting <code>quarkus.swagger-ui.path</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.swagger-ui.path=/my-custom-path</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can customize the output by using Open API v3 annotations.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Schema(name="Developers",
        description="POJO that represents a developer.")
public class Developer {
    @Schema(required = true, example = "Alex")
    private String name;
}

@POST
@Path("/developer")
@Operation(summary = "Create deeloper",
           description = "Only be done by admin.")
public Response createDeveloper(
        @RequestBody(description = "Developer object",
            required = true,
            content = @Content(schema =
            @Schema(implementation = Developer.class)))
                Developer developer)</code></pre>
</div>
</div>
<div class="paragraph">
<p>All possible annotations can be seen at <a href="https://github.com/eclipse/microprofile-open-api/tree/master/api/src/main/java/org/eclipse/microprofile/openapi/annotations" target="_blank" rel="noopener">org.eclipse.microprofile.openapi.annotations</a> package.</p>
</div>
<div class="paragraph">
<p>You can also serve OpenAPI Schema from static files instead of dynamically generated from annotation scanning.</p>
</div>
<div class="paragraph">
<p>You need to put OpenAPIdocumentation under <code>META-INF</code> directory (ie: <code>META-INF/openapi.yaml</code>).</p>
</div>
<div class="paragraph">
<p>A request to <code>/openapi</code> will serve the combined OpenAPI document from the static file and the generated from annotations.
You can disable the scanning documents by adding the next configuration property: <code>mp.openapi.scan.disable=true</code>.</p>
</div>
<div class="paragraph">
<p>Other valid document paths are: <code>META-INF/openapi.yml</code>, <code>META-INF/openapi.json</code>, <code>WEB-INF/classes/META-INF/openapi.yml</code>, <code>WEB-INF/classes/META-INF/openapi.yaml</code>, <code>WEB-INF/classes/META-INF/openapi.json</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mail_sender"><a class="anchor" href="#_mail_sender"></a><a class="link" href="#_mail_sender">Mail Sender</a></h3>
<div class="paragraph">
<p>You can send emails by using Quarkus Mailer extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="io.quarkus:quarkus-mailer"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can inject two possible classes <code>io.quarkus.mailer.Mailer</code> for synchronous API or <code>io.quarkus.mailer.ReactiveMailer</code> for asynchronous API.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
Mailer mailer;

@Inject
ReactiveMailer reactiveMailer;</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then you can use them to send an email:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">mailer.send(
    Mail.withText("to@acme.org", "Subject", "Body")
);

CompletionStage&lt;Void&gt; stage =
    reactiveMailer.send(
        Mail.withText("to@acme.org", "Subject", "Body")
    );</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>Mail</code> class contains methods to add <code>cc</code>, <code>bcc</code>, <code>headers</code>, <code>bounce address</code>, <code>reply to</code>, <code>attachments</code>, <code>inline attachments</code> and <code>html body</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">mailer.send(Mail.withHtml("to@acme.org", "Subject", body)
      .addInlineAttachment("quarkus.png",
            new File("quarkus.png"),
            "image/png", "&lt;my-image@quarkus.io&gt;"));</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you need deep control you can inject Vert.x mail client <code>@Inject  MailClient client;</code>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You need to configure SMTP properties to be able to send an email:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.mailer.from=test@quarkus.io
quarkus.mailer.host=smtp.sendgrid.net
quarkus.mailer.port=465
quarkus.mailer.ssl=true
quarkus.mailer.username=....
quarkus.mailer.password=....</code></pre>
</div>
</div>
<div class="paragraph">
<p>List of Mailer parameters.
<code>quarkus.</code> as a prefix is skipped in the next table.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.from</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Default address.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.mock</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>false in <code>prod</code>, true in <code>dev</code> and <code>test</code>.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Emails not sent, just printed and stored in a <code>MockMailbox</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.bounce-address</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Default address.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.host</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><em>mandatory</em></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP host.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.port</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SMTP port.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.username</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.ssl</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Enables SSL.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.trust-all</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Trust all certificates.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.max-pool-size</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max open connections .</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.own-host-name</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Hostname for <code>HELO/EHLO</code> and <code>Message-ID</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.keep-alive</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Connection pool enabled.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.disable-esmtp</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>false</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disable ESMTP.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.start-tls</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>OPTIONAL</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>TLS security mode. <code>DISABLED</code>, <code>OPTIONAL</code>, <code>REQUIRED</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.login</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>NONE</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Login mode. <code>NONE</code>, <code>OPTIONAL</code>, <code>REQUIRED</code>.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.auth-methods</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">All methods.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Space-separated list.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.key-store</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path of the key store.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>mailer.key-store-password</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Key store password.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
if you enable SSL for the mailer and you want to build a native executable, you will need to enable the SSL support <code>quarkus.ssl.native=true</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>Testing</strong></p>
</div>
<div class="paragraph">
<p>If <code>quarkus.mailer.mock</code> is set to <code>true</code>, which is the default value in <code>dev</code> and <code>test</code> mode, you can inject <code>MockMailbox</code> to get the sent messages.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MockMailbox mailbox;

@BeforeEach
void init() {
    mailbox.clear();
}

List&lt;Mail&gt; sent = mailbox
                    .getMessagesSentTo("to@acme.org");</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scheduled_tasks"><a class="anchor" href="#_scheduled_tasks"></a><a class="link" href="#_scheduled_tasks">Scheduled Tasks</a></h3>
<div class="paragraph">
<p>You can schedule periodic tasks with Quarkus.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CounterBean {

    @Scheduled(every="10s")
    void increment() {}

    @Scheduled(cron="0 15 10 * * ?")
    void morningTask() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>every</code> and <code>cron</code> parameters can be surrounded with <code>{}</code> and the value is used as config property to get the value.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Scheduled(cron = "{morning.check.cron.expr}")
void morningTask() {}</pre>
</div>
</div>
<div class="paragraph">
<p>And configure the property into <code>application.properties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">morning.check.cron.expr=0 15 10 * * ?</code></pre>
</div>
</div>
<div class="paragraph">
<p>By default Quarkus expresion is used, but you can change that by setting <code>quarkus.scheduler.cron-type</code> property.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.scheduler.cron-type=unix</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_kogito"><a class="anchor" href="#_kogito"></a><a class="link" href="#_kogito">Kogito</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="http://www.kiegroup.org/" target="_blank" rel="noopener">Kogito</a>, a next-generation business automation toolkit from Drools and jBPM projects for adding business automation capabilities.</p>
</div>
<div class="paragraph">
<p>To start using it you only need to add the next extension:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="kogito"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_apache_tika"><a class="anchor" href="#_apache_tika"></a><a class="link" href="#_apache_tika">Apache Tika</a></h3>
<div class="paragraph">
<p>Quarkus integrets with <a href="https://tika.apache.org/" target="_blank" rel="noopener">Apache Tika</a> to detect and extract metadata/text from different file types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-tika"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
io.quarkus.tika.TikaParser parser;

@POST
@Path("/text")
@Consumes({ "text/plain", "application/pdf",
            "application/vnd.oasis.opendocument.text" })
@Produces(MediaType.TEXT_PLAIN)
public String extractText(InputStream stream) {
    return parser.parse(stream).getText();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can configure Apache Tika in <code>application.properties</code> file by using next properties prefixed with <code>quarkus</code>:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Parameter</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top"> Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika.tika-config-path</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika-config.xml</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Path to the Tika configuration resource.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>quarkus.tika.parsers</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>CSV of the abbreviated or full parser class to be loaded by the extension.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>tika.append-embedded-content</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>true</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The document may have other embedded documents. Set if autmatically append.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_jgit"><a class="anchor" href="#_jgit"></a><a class="link" href="#_jgit">JGit</a></h3>
<div class="paragraph">
<p>Quarkus integrets with <a href="https://www.eclipse.org/jgit/" target="_blank" rel="noopener">JGit</a> to integrate with Git repositories:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-jgit"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then you can start using JGit:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">try (Git git = Git.cloneRepository()
                  .setDirectory(tmpDir)
                  .setURI(url)
                  .call()) {
    return tmpDir.toString();
}</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
When running in native mode, make sure to configure SSL access correctly <code>quarkus.ssl.native=true</code> (<a href="https://quarkus.io/guides/native-and-ssl-guide" target="_blank" rel="noopener">Native and SSL</a>).
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_web_resources"><a class="anchor" href="#_web_resources"></a><a class="link" href="#_web_resources">Web Resources</a></h3>
<div class="paragraph">
<p>You can serve web resources with Quarkus.
You need to place web resources at <code>src/main/resources/META-INF/resources</code> and then they are accessible (ie <a href="http://localhost:8080/index.html" class="bare">http://localhost:8080/index.html</a>)</p>
</div>
<div class="paragraph">
<p>By default static resources as served under the root context.
You can change this by using <code>quarkus.http.root-path</code> property.</p>
</div>
</div>
<div class="sect2">
<h3 id="_transactional_memory"><a class="anchor" href="#_transactional_memory"></a><a class="link" href="#_transactional_memory">Transactional Memory</a></h3>
<div class="paragraph">
<p>Quarkus integrates with the Software Transactional Memory (STM) implementation provided by the <a href="https://narayana.io/docs/project/index.html">Narayana</a> project.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="narayana-stm"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Transactional objects must be interfaces and annotated with <code>org.jboss.stm.annotations.Transactional</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Transactional
@NestedTopLevel
public interface FlightService {
    int getNumberOfBookings();
    void makeBooking(String details);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The pessimistic strategy is the default one, you can change to optimistic by using <code>@Optimistic</code>.</p>
</div>
<div class="paragraph">
<p>Then you need to create the object inside <code>org.jboss.stm.Container</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Container&lt;FlightService&gt; container = new Container&lt;&gt;();
FlightServiceImpl instance = new FlightServiceImpl();
FlightService flightServiceProxy = container.create(instance);</code></pre>
</div>
</div>
<div class="paragraph">
<p>The implementation of the service sets the locking and what needs to be saved/restored:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">import org.jboss.stm.annotations.ReadLock;
import org.jboss.stm.annotations.State;
import org.jboss.stm.annotations.WriteLock;

public class FlightServiceImpl
    implements FlightService {
    @State
    private int numberOfBookings;

    @ReadLock
    public int getNumberOfBookings() {
        return numberOfBookings;
    }

    @WriteLock
    public void makeBooking(String details) {
        numberOfBookings += 1;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Any member is saved/restored automatically (<code>@State</code> is not mandatory).
You can use <code>@NotState</code> to avoid behaviour.</p>
</div>
<div class="paragraph">
<p><strong>Transaction boundaries</strong></p>
</div>
<div class="paragraph">
<p><em>Declarative</em></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@NestedTopLevel</code>: Defines that the container will create a new top-level transaction for each method invocation.</p>
</li>
<li>
<p><code>@Nested</code>: Defines that the container will create a new top-level or nested transaction for each method invocation.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><em>Programmatically</em></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">AtomicAction aa = new AtomicAction();

aa.begin();
{
    try {
        flightService.makeBooking("BA123 ...");
        taxiService.makeBooking("East Coast Taxis ...");

        aa.commit();
    } catch (Exception e) {
        aa.abort();
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_quartz"><a class="anchor" href="#_quartz"></a><a class="link" href="#_quartz">Quartz</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="http://www.quartz-scheduler.org/">Quartz</a>  to schedule periodic clustered tasks.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quartz"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class TaskBean {

    @Transactional
    @Scheduled(every = "10s")
    void schedule() {
        Task task = new Task();
        task.persist();
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>To configure in clustered mode vida DataSource:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="application.properties" class="language-application.properties hljs">quarkus.datasource.url=jdbc:postgresql://localhost/quarkus_test
quarkus.datasource.driver=org.postgresql.Driver
# ...

quarkus.quartz.clustered=true
quarkus.quartz.store-type=db</code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
You need to define the datasource used by clustered mode and also import the database tables following the Quartz schema.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_qute"><a class="anchor" href="#_qute"></a><a class="link" href="#_qute">Qute</a></h3>
<div class="paragraph">
<p>Qute is a templating engine designed specifically to meet the Quarkus needs.
Templates should be placed by default at <code>src/main/resources/templates</code> aand subdirectories.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-resteasy-qute"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Templates can be defined in any format, in case of HTML:</p>
</div>
<div class="listingblock">
<div class="title">item.html</div>
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{@org.acme.Item item}
&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
&lt;meta charset="UTF-8"&gt;
&lt;title&gt;{item.name}&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;{item.name}&lt;/h1&gt;
    &lt;div&gt;Price: {item.price}&lt;/div&gt;
    {#if item.price &gt; 100}
    &lt;div&gt;Discounted Price: {item.discountedPrice}&lt;/div&gt;
    {/if}
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>First line is not mandatory but helps on doing property checks at compilation time.</p>
</div>
<div class="paragraph">
<p>To render the template:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public class Item {
    public String name;
    public BigDecimal price;
}

@Inject
io.quarkus.qute.Template item;

@GET
@Path("{id}")
@Produces(MediaType.TEXT_HTML)
public TemplateInstance get(@PathParam("id") Integer id) {
    return item.data("item", service.findItem(id));
}

@TemplateExtension
static BigDecimal discountedPrice(Item item) {
    return item.price.multiply(new BigDecimal("0.9"));
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If <code>@ResourcePath</code> is not used in <code>Template</code> then the name of the field is used as file name.
In this case the file should be <code>src/main/resources/templates/item.{}</code>.
Extension of the file is not required to be set.</p>
</div>
<div class="paragraph">
<p><code>discountedPrice</code> is not a field of the POJO but a method call.
Method definition must be annotated with <code>@TemplateExtension</code> and be static method.
First parameter is used to match the base object (<code>Item</code>).
<code>@TemplateExtension</code> can be used at class level:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@TemplateExtension
public class MyExtensions {
    static BigDecimal discountedPrice(Item item) {
        return item.price.multiply(new BigDecimal("0.9"));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Methods with multiple parameters are supported too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="html" class="language-html hljs">{item.discountedPrice(2)}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">static BigDecimal discountedPrice(Item item, int scale) {
    return item.price.multiply(scale);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can render programmaticaly the templates too:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">// file located at src/main/resources/templates/reports/v1/report_01.{}
@ResourcePath("reports/v1/report_01")
Template report;

String output = report
    .data("samples", service.get())
    .render();</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Qute Mail Integration</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Inject
MailTemplate hello;

CompletionStage&lt;Void&gt; c = hello.to("to@acme.org")
     .subject("Hello from Qute template")
     .data("name", "John")
     .send();</code></pre>
</div>
</div>
<div class="paragraph">
<p>INFO: Template located at <code>src/main/resources/templates/hello.[html|txt]</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sentry"><a class="anchor" href="#_sentry"></a><a class="link" href="#_sentry">Sentry</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="https://sentry.io">Sentry</a> for logging errors into an error monitoring system.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-logging-sentry"</code></pre>
</div>
</div>
<div class="paragraph">
<p>And the configuration to send all errors occuring in the package <code>org.example</code> to Sentrty with DSN <code><a href="https://abcd@sentry.io/1234" class="bare">https://abcd@sentry.io/1234</a></code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.log.sentry=true
quarkus.log.sentry.dsn=https://abcd@sentry.io/1234
quarkus.log.sentry.level=ERROR
quarkus.log.sentry.in-app-packages=org.example</code></pre>
</div>
</div>
<div class="paragraph">
<p>Full list of configuration properties having  <code>quarkus.log</code> as prefix:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>sentry.enable</code></dt>
<dd>
<p>Enable the Sentry logging extension (default: false)</p>
</dd>
<dt class="hdlist1"><code>sentry.dsn</code></dt>
<dd>
<p>Where to send events.</p>
</dd>
<dt class="hdlist1"><code>sentry.level</code></dt>
<dd>
<p>Log level (default: <code>WARN</code>)</p>
</dd>
<dt class="hdlist1"><code>sentry.in-app-packages</code></dt>
<dd>
<p>Configure which package prefixes your application uses.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="_jsch"><a class="anchor" href="#_jsch"></a><a class="link" href="#_jsch">JSch</a></h3>
<div class="paragraph">
<p>Quarkus integrates with <a href="http://www.jcraft.com/jsch/">Jsch</a> for SSH communication.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-jsch"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">JSch jsch = new JSch();
Session session = jsch.getSession(null, host, port);
session.setConfig("StrictHostKeyChecking", "no");
session.connect();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_cache"><a class="anchor" href="#_cache"></a><a class="link" href="#_cache">Cache</a></h3>
<div class="paragraph">
<p>Quarkus can cache method calls by using as key the tuple (method + arguments).</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="cache"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@io.quarkus.cache.CacheResult(cacheName = "weather-cache")
public String getDailyForecast(LocalDate date, String city) {}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>@CacheInvalidate</code> removes the element represented by the calculated cache key from cache.
<code>@CacheInvalidateAll</code> removes all entries from the cache.
<code>@CacheKey</code> to specifically set the arguments to be used as key instead of all.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ApplicationScoped
public class CachedBean {

    @CacheResult(cacheName = "foo")
    public Object load(Object key) {}

    @CacheInvalidate(cacheName = "foo")
    public void invalidate(Object key) {}

    @CacheInvalidateAll(cacheName = "foo")
    public void invalidateAll() {}
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This extension uses <a href="https://github.com/ben-manes/caffeine">Caffeine</a> as its underlying caching provider.</p>
</div>
<div class="paragraph">
<p>Each cache can be configured individually:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">quarkus.cache.caffeine."foo".initial-capacity=10
quarkus.cache.caffeine."foo".maximum-size=20
quarkus.cache.caffeine."foo".expire-after-write
quarkus.cache.caffeine."bar".maximum-size=1000</code></pre>
</div>
</div>
<div class="paragraph">
<p>Full list of configuration properties having  <code>quarkus.cache.caffeine.[cache-name]</code> as prefix:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><code>initial-capacity</code></dt>
<dd>
<p>Minimum total size for the internal data structures.</p>
</dd>
<dt class="hdlist1"><code>maximum-size</code></dt>
<dd>
<p>Maximum number of entries the cache may contain.</p>
</dd>
<dt class="hdlist1"><code>expire-after-write</code></dt>
<dd>
<p>Specifies that each entry should be automatically removed from the cache once a fixed duration has elapsed after the entry&#8217;s creation, or last write.</p>
</dd>
<dt class="hdlist1"><code>expire-after-access</code></dt>
<dd>
<p>Specifies that each entry should be automatically removed from the cache once a fixed duration has elapsed after the entry&#8217;s creation, or last write.</p>
</dd>
</dl>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_spring_di"><a class="anchor" href="#_spring_di"></a><a class="link" href="#_spring_di">Spring DI</a></h3>
<div class="paragraph">
<p>Quarkus provides a compatibility layer for Spring dependency injection.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-di"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some examples of what you can do.
Notice that annotations are the Spring original ones.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@Configuration
public class AppConfiguration {

    @Bean(name = "capitalizeFunction")
    public StringFunction capitalizer() {
        return String::toUpperCase;
    }
}</pre>
</div>
</div>
<div class="paragraph">
<p>Or as a component:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component("noopFunction")
public class NoOpSingleStringFunction
    implements StringFunction {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Also as a service and injection properties from <code>application.properties</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Service
public class MessageProducer {

    @Value("${greeting.message}")
    String message;

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And you can inject using <code>Autowired</code> or constructor in a component and in a JAX-RS resource too.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Component
public class GreeterBean {

    private final MessageProducer messageProducer;

    @Autowired @Qualifier("noopFunction")
    StringFunction noopStringFunction;

    public GreeterBean(MessageProducer messageProducer) {
        this.messageProducer = messageProducer;
    }
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_spring_boot_configuration"><a class="anchor" href="#_spring_boot_configuration"></a><a class="link" href="#_spring_boot_configuration">Spring Boot Configuration</a></h3>
<div class="paragraph">
<p>Quarkus provides a compatibility layer for Spring Boot <code>ConfigurationProperties</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-boot-properties"</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@ConfigurationProperties("example")
public final class ClassProperties {

    private String value;
    private AnotherClass anotherClass;

    // getters/setters
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="properties" class="language-properties hljs">example.value=class-value
example.anotherClass.value=true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_spring_web"><a class="anchor" href="#_spring_web"></a><a class="link" href="#_spring_web">Spring Web</a></h3>
<div class="paragraph">
<p>Quarkus provides a compatibility layer for Spring Web.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-web"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Specifically supports the REST related features.
Notice that infrastructure things like <code>BeanPostProcessor</code> will not be executed.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@RestController
@RequestMapping("/greeting")
public class GreetingController {

    private final GreetingBean greetingBean;

    public GreetingController(GreetingBean greetingBean) {
        this.greetingBean = greetingBean;
    }

    @GetMapping("/{name}")
    public Greeting hello(@PathVariable(name = "name")
                            String name) {
        return new Greeting(greetingBean.greet(name));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Supported annotations are: <code>RestController</code>, <code>RequestMapping</code>, <code>GetMapping</code>, <code>PostMapping</code>, <code>PutMapping</code>, <code>DeleteMapping</code>, <code>PatchMapping</code>, <code>RequestParam</code>, <code>RequestHeader</code>, <code>MatrixVariable</code>, <code>PathVariable</code>, <code>CookieValue</code>, <code>RequestBody</code>, <code>ResponseStatus</code>, <code>ExceptionHandler</code> and <code>RestControllerAdvice</code>.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
If you scaffold the project with <code>spring-web</code> extension, then Spring Web annotations are sed in the generated project. <code>mvn io.quarkus:quarkus-maven-plugin:1.1.0.Final:create &#8230;&#8203; -Dextensions="spring-web"</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The next return types are supported: <code>org.springframework.http.ResponseEntity</code> and <code>java.util.Map</code>.</p>
</div>
<div class="paragraph">
<p>The next parameter types are supported: An <code>Exception</code> argument and <code>ServletRequest</code>/<code>HttpServletRequest</code> (adding <code>quarkus-undertow</code> dependency).</p>
</div>
</div>
<div class="sect2">
<h3 id="_spring_data_jpa"><a class="anchor" href="#_spring_data_jpa"></a><a class="link" href="#_spring_data_jpa">Spring Data JPA</a></h3>
<div class="paragraph">
<p>While users are encouraged to use Hibernate ORM with Panache for Relational Database access, Quarkus provides a compatibility layer for <a href="https://docs.spring.io/spring-data/jpa/docs/current/reference/html/" target="_blank" rel="noopener">Spring Data JPA</a> repositories.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="quarkus-spring-data-jpa"</code></pre>
</div>
</div>
<div class="paragraph">
<p>INFO: Of course you still need to add the JDBC driver, and configure it in <code>application.properties</code>.</p>
</div>
<div style="page-break-after: always;"></div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface FruitRepository
        extends CrudRepository&lt;Fruit, Long&gt; {
    List&lt;Fruit&gt; findByColor(String color);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And then you can inject it either as shown in <a href="#_spring_di">Spring DI</a> or in <a href="#_spring_web">Spring Web</a>.</p>
</div>
<div class="paragraph">
<p>Interfaces supported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>org.springframework.data.repository.Repository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.CrudRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.repository.PagingAndSortingRepository</code></p>
</li>
<li>
<p><code>org.springframework.data.jpa.repository.JpaRepository</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>INFO: Generated repositories are automatically annotated with <code>@Transactional</code>.</p>
</div>
<div class="paragraph">
<p>Repository fragments is also supported:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public interface PersonRepository
    extends JpaRepository&lt;Person, Long&gt;, PersonFragment {

    void makeNameUpperCase(Person person);
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>User defined queries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Query("select m from Movie m where m.rating = ?1")
Iterator&lt;Movie&gt; findByRating(String rating);

@Modifying
@Query("delete from Movie where rating = :rating")
void deleteByRating(@Param("rating") String rating);</code></pre>
</div>
</div>
<div class="paragraph">
<p>What is currently unsupported:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Methods of <code>org.springframework.data.repository.query.QueryByExampleExecutor</code></p>
</li>
<li>
<p>QueryDSL support</p>
</li>
<li>
<p>Customizing the base repository</p>
</li>
<li>
<p><code>java.util.concurrent.Future</code> as return type</p>
</li>
<li>
<p>Native and named queries when using <code>@Query</code></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_spring_security"><a class="anchor" href="#_spring_security"></a><a class="link" href="#_spring_security">Spring Security</a></h3>
<div class="paragraph">
<p>Quarkus provides a compatibility layer for <a href="https://spring.io/projects/spring-security" target="_blank" rel="noopener">Spring Security</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="bash" class="language-bash hljs">./mvnw quarkus:add-extension
  -Dextensions="spring-security"</code></pre>
</div>
</div>
<div class="paragraph">
<p>You need to choose a security extension to define user, roles, &#8230;&#8203; such as <code>openid-connect</code>, <code>oauth2</code>, <code>properties-file</code> or <code>security-jdbc</code> as seen at <a href="#_rbac">RBAC</a>.</p>
</div>
<div class="paragraph">
<p>Then you can use Spring Security annotations to protect the methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@Secured("admin")
@GetMapping
public String hello() {
    return "hello";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Quarkus provides support for some of the most used features of Spring Security’s <code>@PreAuthorize</code> annotation.</p>
</div>
<div class="paragraph">
<p>Some examples:</p>
</div>
<div class="paragraph">
<p><strong>hasRole</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("hasRole('admin')")</code></p>
</li>
<li>
<p><code>@PreAuthorize("hasRole(@roles.USER)")</code> where <code>roles</code> is a bean defined with <code>@Component</code> annotation and <code>USER</code> is a public field of the class.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>hasAnyRole</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("hasAnyRole(@roles.USER, 'view')")</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Permit and Deny All</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("permitAll()")</code></p>
</li>
<li>
<p><code>@PreAuthorize("denyAll()")</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Anonymous and Authenticated</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>@PreAuthorize("isAnonymous()")</code></p>
</li>
<li>
<p><code>@PreAuthorize("isAuthenticated()")</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Expressions</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Checks if the current logged in user is the same as the username method parameter:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("#person.name == authentication.principal.username")
public void doSomethingElse(Person person){}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Checks if calling a method if user can access:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("@personChecker.check(#person, authentication.principal.username)")
public void doSomething(Person person){}

@Component
public class PersonChecker {
    public boolean check(Person person, String username) {
        return person.getName().equals(username);
    }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Combining expressions:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">@PreAuthorize("hasAnyRole('user', 'admin') AND #user == principal.username")
public void allowedForUser(String user) {}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
<div class="sect2">
<h3 id="_resources"><a class="anchor" href="#_resources"></a><a class="link" href="#_resources">Resources</a></h3>
<div class="ulist">
<ul>
<li>
<p><a href="https://quarkus.io/guides/" class="bare">https://quarkus.io/guides/</a></p>
</li>
<li>
<p><a href="https://www.youtube.com/user/lordofthejars" class="bare">https://www.youtube.com/user/lordofthejars</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/github.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/highlight.min.js"></script>
<script>hljs.initHighlighting()</script>
</body>
</html>